{
  "rounds": [
    {
      "timestamp": "2025-02-04T18:08:48.389713",
      "actions": [
        {
          "member_id": 0,
          "code_executed": "def agent_action(execution_engine, member_id):\n    modification_code = '''\nimport random\nimport numpy as np\nfrom collections import defaultdict\n\n# CommunityCenter: Foster sustainable projects and community alliances.\nif not hasattr(execution_engine, 'community_center'):\n    class CommunityCenter:\n        MECHANISM_META = {\n            'type': 'Social Infrastructure',\n            'rules': 'Fosters community projects, alliances and enhances trust via sustainable investments',\n            'version': 1.1,\n        }\n        def __init__(self):\n            self.projects = defaultdict(dict)  # Each project holds its details.\n            self.active_projects = []  # IDs of active projects.\n\n        def submit_project(self, initiator, description, cost, benefits):\n            # A project requires an upfront investment (cost) and promises long-term benefits.\n            project_id = len(self.projects) + 1\n            self.projects[project_id] = {\n                'initiator': initiator,\n                'description': description,\n                'cost': cost,\n                'benefits': benefits,  # Expected increase in trust, resources, or land value.\n                'votes': defaultdict(int),\n                'status': 'pending'\n            }\n            return project_id\n\n        def vote_project(self, project_id, voter_id, vote):\n            # vote: +1 supports, -1 opposes.\n            if project_id in self.projects:\n                self.projects[project_id]['votes'][voter_id] = vote\n\n        def evaluate_projects(self):\n            # Projects reaching a certain level of support get approved.\n            support_threshold = 3\n            for pid, details in self.projects.items():\n                if details['status'] == 'pending':\n                    vote_total = sum(details['votes'].values())\n                    if vote_total >= support_threshold:\n                        details['status'] = 'approved'\n                        self.active_projects.append(pid)\n                    elif vote_total <= -support_threshold:\n                        details['status'] = 'rejected'\n    execution_engine.community_center = CommunityCenter()\n\n# Sustainable Market Overlay: Adjust resource pricing based on ecological metrics.\nif hasattr(execution_engine, 'market'):\n    def sustainable_price_discovery(resource, demand):\n        # Base price is modulated by resource scarcity and an 'eco_score' that reflects sustainability.\n        base_price = demand * resource.scarcity\n        eco_factor = getattr(resource, 'eco_score', 1.0)  # Defaults to 1.0 if eco_score isn't specified.\n        # A higher eco_score lowers price, incentivizing sustainably produced goods.\n        return base_price * (2.0 - eco_factor)\n    execution_engine.market.price_discovery = sustainable_price_discovery\n\n# Augmented Justice System: Integrate restorative conflict resolution.\nif hasattr(execution_engine, 'justice'):\n    original_submit_case = execution_engine.justice.submit_case\n    def augmented_submit_case(plaintiff, defendant, charge):\n        # First, create the case using the original mechanism.\n        case_id = original_submit_case(plaintiff, defendant, charge)\n        # Then, if conditions allow, schedule a mediated session aimed at restorative justice.\n        jury = execution_engine.justice.jury_selection(charge)\n        if jury and len(jury) > 0:\n            # Mediation session scheduled for 2 rounds with a community mediator focus.\n            execution_engine.justice.schedule_mediation(case_id, mediator_type='community', rounds=2)\n        return case_id\n    execution_engine.justice.submit_case = augmented_submit_case\n\n    # Provide mediation scheduling capability if not already present.\n    if not hasattr(execution_engine.justice, 'schedule_mediation'):\n        def schedule_mediation(case_id, mediator_type, rounds):\n            execution_engine.justice.mediation_sessions = getattr(execution_engine.justice, 'mediation_sessions', {})\n            execution_engine.justice.mediation_sessions[case_id] = {\n                'mediator_type': mediator_type,\n                'remaining_rounds': rounds,\n                'status': 'scheduled'\n            }\n        execution_engine.justice.schedule_mediation = schedule_mediation\n'''\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.6},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 150},\n                {'type': 'time', 'rounds': 3}\n            ]\n        }\n    )",
          "old_stats": {
            "vitality": 73.85382847590404,
            "cargo": 43.51277128714192,
            "survival_chance": 96.82806145553313
          },
          "new_stats": {
            "vitality": 73.85382847590404,
            "cargo": 43.51277128714192,
            "survival_chance": 96.82806145553313
          },
          "performance_change": 0.0,
          "messages_sent": []
        },
        {
          "member_id": 1,
          "code_executed": "import random\nimport numpy as np\nfrom collections import defaultdict\n\n# ----- Core Classes for Simulation Environment -----\n\nclass Island:\n    def __init__(self, land_shape=(20, 20), initial_population=10):\n        self.mechanisms = {}\n        self.current_members = []\n        self.land = Land(land_shape)\n        self.relationships = Relationships(len(self.current_members))\n        self.round = 0\n        self.resources = {'cargo': 1000}\n        self.members = []  # All members ever created\n\n    def add_mechanism(self, name, details):\n        self.mechanisms[name] = details\n\n    def update_members(self, new_members):\n        self.members.extend(new_members)\n        self.current_members.extend(new_members)\n\n    def propose_modification(self, member_id, mod_type, code, ratification_condition):\n        # Dummy implementation: simply execute the presented code if condition is met\n        # In a full simulation, ratification_condition would be checked via voting, resource, time, etc.\n        print(f\"Member {member_id} proposes a {mod_type} modification. Checking ratification conditions...\")\n        if ratification_condition.get('type') == 'vote' and ratification_condition.get('threshold', 0.6) <= 0.6:\n            print(\"Vote threshold condition met. Applying modification.\")\n            exec(code, globals(), {'execution_engine': self})\n        else:\n            print(\"Modification ratification conditions not met. Proposal deferred.\")\n\n    def simulate_round(self):\n        # Simulate events, interactions, and trigger dynamic event mechanisms\n        print(f\"--- Simulation round {self.round} ---\")\n        if 'event_trigger' in self.mechanisms:\n            self.mechanisms['event_trigger']['handler'](self)\n        # Further simulation processes would occur here (resource management, reproduction, trade, etc.)\n        self.round += 1\n\nclass Member:\n    def __init__(self, member_id):\n        self.id = member_id\n        self.land_num = random.randint(1, 5)\n        self.vitality = random.randint(20, 100)\n        self.cargo = random.randint(50, 200)\n        self.abilities = {}\n        # Placeholders for mechanism-specific attributes\n        self.parliament = None\n        self.market = None\n        self.justice = None\n\n    def add_ability(self, ability_name, func):\n        self.abilities[ability_name] = func\n\n    def __repr__(self):\n        return f\"<Member id={self.id} vitality={self.vitality} cargo={self.cargo}>\"\n\nclass Land:\n    def __init__(self, shape=(20, 20)):\n        self.shape = shape\n        self.features = {}\n        self.mechanisms = {}\n        self.resources = {'fertility': random.uniform(0.5, 1.5)}\n\n    def add_feature(self, feature_name, feature_value):\n        self.features[feature_name] = feature_value\n\n    def add_mechanism(self, name, func):\n        self.mechanisms[name] = func\n\nclass Relationships:\n    def __init__(self, num_members):\n        # Initialize relationship matrices as a dictionary of dictionaries\n        self.metrics = {}\n        self.methods = {}\n        self.num_members = num_members\n        self.benefit = defaultdict(lambda: defaultdict(int))\n        self.victim = defaultdict(lambda: defaultdict(int))\n        self.benefit_land = defaultdict(lambda: defaultdict(int))\n\n    def add_metric(self, name, func):\n        self.metrics[name] = func\n\n    def add_mechanism(self, name, func):\n        self.methods[name] = func\n\n    def trust(self, m1, m2):\n        # Calculate trust using the provided strategy integrating benefits and penalties.\n        base = self.benefit[m1.id][m2.id]\n        penalty = self.victim[m1.id][m2.id] * 2\n        bonus = self.benefit_land[m1.id][m2.id] * 5\n        return (base - penalty + bonus) / 100\n\n# ----- Pre Initialization Hooks: Adding Core Mechanisms -----\n\ndef pre_init_hook(island):\n    # Add Parliamentary System\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality / 100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n\n    # Add Market System\n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * island.land.resources['fertility'],\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n\n    # Add Justice System\n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50],\n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\n    # Advanced Mechanic: Dynamic Event Trigger System for environmental events\n    island.add_mechanism('event_trigger', {\n        'handler': dynamic_event_handler,\n        'version': 1.0\n    })\n\n# ----- Member Modification: Adding Abilities Based on Mechanisms -----\n\ndef modify_member(member, island):\n    # Ensure the member is assigned access to island mechanisms where applicable.\n    member.parliament = island.mechanisms.get('parliament', None)\n    member.market = island.mechanisms.get('market', None)\n    member.justice = island.mechanisms.get('justice', None)\n\n    # Define abilities with conditions reflecting individual initiative and risk tolerance.\n    member.add_ability('propose_law',\n        lambda law: member.parliament['proposals'].append({\n            'proposer': member.id,\n            'law': law,\n            'voting_power': member.parliament['voting_power'](member)\n        }) if member.vitality > 30 else None\n    )\n\n    member.add_ability('trade',\n        lambda resource, amount, price: member.market['order_book'][resource].append({\n            'member_id': member.id,\n            'amount': amount,\n            'price': price\n        })\n    )\n\n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.get('jury_selection')(charge)  # Simplified for demo\n        if member.vitality > 30 else None\n    )\n    return member\n\n# ----- Land Modification: Adding Zoning and Development Features -----\n\ndef modify_land(land, island):\n    # Adding zoning distribution and development infrastructure improvements.\n    land.add_feature('zoning', {\n        'residential': 0.4,\n        'agricultural': 0.4,\n        'commercial': 0.2\n    })\n\n    land.add_feature('development', {\n        'infrastructure': np.zeros(land.shape),\n        'improvements': np.zeros(land.shape)\n    })\n\n    # Mechanism: Property Tax Calculation based on improvements\n    land.add_mechanism('property_tax',\n        lambda plot: np.sum(plot['improvements']) * 0.1\n    )\n\n    # Mechanism: Urban Planning Optimization\n    land.add_mechanism('urban_planning',\n        lambda zone: calculate_optimal_usage(zone, island)\n    )\n    return land\n\ndef calculate_optimal_usage(zone, island):\n    # A simplified urban planning function that weights population and resource availability.\n    optimal = (zone['residential'] * 0.5 + zone['commercial'] * 0.3 + zone['agricultural'] * 0.2)\\\n              * (len(island.current_members) / (island.land.shape[0] * island.land.shape[1]))\n    return optimal\n\n# ----- Relationship Modification: Adding Trust and Conflict Resolution -----\n\ndef modify_relationships(relationships, island):\n    relationships.add_metric('trust',\n        lambda m1, m2: (\n            relationships.benefit[m1.id][m2.id]\n            - relationships.victim[m1.id][m2.id] * 2\n            + relationships.benefit_land[m1.id][m2.id] * 5\n        ) / 100\n    )\n\n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.trust(m1, m2) > 0.7\n    )\n\n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(island.current_members,\n                key=lambda m: relationships.trust(m1, m) + relationships.trust(m2, m)\n            ) if island.current_members else None,\n            'success_chance': min(relationships.trust(m1, m2) + 0.3, 1.0)\n        }\n    )\n    return relationships\n\n# ----- Advanced Mechanic: Dynamic Event Handler for Environmental & Strategic Shifts -----\n\ndef dynamic_event_handler(island):\n    # This function triggers occasional environmental events that affect resources and member vitality.\n    event_chance = random.random()\n    if event_chance < 0.15:\n        # Drought event: reduce land fertility and member cargo due to scarcity.\n        print(\"Event Triggered: Drought - reducing fertility and trade potential.\")\n        island.land.resources['fertility'] *= 0.8\n        for m in island.current_members:\n            loss = int(m.cargo * 0.1)\n            m.cargo = max(m.cargo - loss, 0)\n    elif event_chance < 0.25:\n        # Bountiful harvest event: improve resources and provide bonus vitality.\n        print(\"Event Triggered: Bountiful Harvest - boosting resources and vitality.\")\n        island.land.resources['fertility'] *= 1.2\n        for m in island.current_members:\n            bonus = int(m.vitality * 0.1)\n            m.vitality += bonus\n    else:\n        print(\"No significant environmental events this round.\")\n\n# ----- Agent Action: Proposing a Modification with Strategic Long-Term Considerations -----\n\ndef agent_action(execution_engine, member_id):\n    modification_code = '''\nif not hasattr(execution_engine, 'leadership_coalition'):\n    class LeadershipCoalition:\n        MECHANISM_META = {\n            'type': 'Coalition',\n            'rules': 'Form mutual alliances to secure resource stability and collective survival',\n            'version': 1.0\n        }\n        def __init__(self):\n            self.coalitions = {}\n\n        def form_coalition(self, coalition_name, members):\n            self.coalitions[coalition_name] = members\n\n        def evaluate_coalition_success(self, coalition_name):\n            # A coalition wins if combined resources and social capital cross a threshold.\n            members = self.coalitions.get(coalition_name, [])\n            total_cargo = sum(m.cargo for m in members)\n            total_vitality = sum(m.vitality for m in members)\n            return (total_cargo + total_vitality) > 500\n\n    execution_engine.leadership_coalition = LeadershipCoalition()\n'''\n    ratification_condition = {\n        'type': 'compound',\n        'conditions': [\n            {'type': 'vote', 'threshold': 0.6},\n            {'type': 'resource', 'resource': 'cargo', 'amount': 100},\n            {'type': 'time', 'rounds': 2}\n        ]\n    }\n    execution_engine.propose_modification(member_id, 'post_init', modification_code, ratification_condition)\n\n# ----- Main Simulation Setup & Execution -----\n\ndef main_simulation():\n    # Initialize island with given land shape and population\n    island = Island(land_shape=(20, 20))\n    pre_init_hook(island)\n\n    # Create initial members and modify them with extra abilities.\n    initial_members = [Member(member_id=i) for i in range(10)]\n    for member in initial_members:\n        modify_member(member, island)\n    island.update_members(initial_members)\n\n    # Modify land with zoning and urban planning changes.\n    modify_land(island.land, island)\n\n    # Adjust relationship system to include trust and alliance mechanisms.\n    island.relationships = modify_relationships(island.relationships, island)\n\n    # Simulate several rounds where both short-term tactical events and long-term strategic mechanisms come into play.\n    for _ in range(5):\n        island.simulate_round()\n\n    # Member action: Proposing a coalition formation modification.\n    agent_action(island, member_id=initial_members[0].id)\n\n    # Post-modification simulation round to demonstrate new mechanism usage.\n    island.simulate_round()\n    print(\"Final state summary:\")\n    print(f\"Land fertility: {island.land.resources['fertility']:.2f}\")\n    for m in island.current_members:\n        print(m)\n\nif __name__ == '__main__':\n    main_simulation()",
          "old_stats": {
            "vitality": 33.02781433323713,
            "cargo": 47.25322455383092,
            "survival_chance": 98.77222098502479
          },
          "new_stats": {
            "vitality": 33.02781433323713,
            "cargo": 47.25322455383092,
            "survival_chance": 98.77222098502479
          },
          "performance_change": 0.0,
          "messages_sent": []
        },
        {
          "member_id": 2,
          "code_executed": "def pre_init_hook(island):\n    # Enhance existing social systems with integrated diplomatic capabilities\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality / 100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n\n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource.scarcity,\n        'trade_fee': 0.05,\n        'order_book': {}\n    })\n\n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50],\n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\n    # Introduce a Diplomacy System that integrates trust metrics and alliance history,\n    # facilitating both strategic cooperation and risk management.\n    island.add_mechanism('diplomacy', {\n        'register_alliance': lambda m1, m2: None,  # placeholder; will be overridden below\n        'evaluate_alliance_request': lambda proposer, target: island.relationships.trust(proposer, target) >= 0.7,\n        'alliance_history': {}\n    })\n\n    # Override the register_alliance mechanism with a concrete implementation.\n    def register_alliance(m1, m2):\n        dh = island.mechanisms['diplomacy']\n        if m1.id not in dh['alliance_history']:\n            dh['alliance_history'][m1.id] = set()\n        dh['alliance_history'][m1.id].add(m2.id)\n        # Log alliance for potential long-term cooperative strategies\n        island.log_event(f\"Alliance formed between {m1.id} and {m2.id}\")\n    island.mechanisms['diplomacy']['register_alliance'] = register_alliance\n\ndef modify_member(member, relationships):\n    # Add member capabilities that reflect both tactical survival and diplomatic collaboration\n    member.add_ability('propose_law',\n        lambda law: member.parliament.submit_proposal(law)\n        if member.voting_power > 10 else None\n    )\n\n    member.add_ability('trade',\n        lambda resource, amount, price: member.market.place_order(\n            resource, amount, price, member.id\n        )\n    )\n\n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.submit_case(\n            plaintiff=member.id,\n            defendant=offender,\n            charge=charge\n        ) if member.vitality > 30 else None\n    )\n\n    # New ability: propose a diplomatic alliance based on trust metrics.\n    member.add_ability('propose_alliance',\n        lambda target: member.diplomacy['register_alliance'](member, target)\n        if member.diplomacy['evaluate_alliance_request'](member, target)\n        else member.log_event(f\"Alliance proposal from {member.id} to {target.id} rejected (low trust)\")\n    )\n\n    return member\n\ndef modify_land(land, members):\n    # Introduce zoning and structured development to support sustainable long-term prosperity.\n    land.add_feature('zoning', {\n        'residential': 0.4,\n        'agricultural': 0.4,\n        'commercial': 0.2\n    })\n\n    land.add_feature('development', {\n        'infrastructure': [[0 for _ in range(land.shape[1])] for _ in range(land.shape[0])],\n        'improvements': [[0 for _ in range(land.shape[1])] for _ in range(land.shape[0])]\n    })\n\n    land.add_mechanism('property_tax',\n        lambda plot: sum(plot['improvements']) * 0.1\n    )\n\n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n\n    # New strategic land investment mechanism:\n    land.add_mechanism('infrastructure_investment',\n        lambda area, investment: investment * 0.8  # Returns improved productivity from spent resources\n    )\n    return land\n\ndef modify_relationships(relationships):\n    # Enhance relationship metrics with trust to evaluate alliances and provide conflict-resolution insights.\n    relationships.add_metric('trust',\n        lambda m1, m2: (\n            relationships['benefit'][m1.id][m2.id] -\n            2 * relationships['victim'][m1.id][m2.id] +\n            5 * relationships['benefit_land'][m1.id][m2.id]\n        ) / 100\n    )\n\n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships['trust'](m1, m2) > 0.7\n    )\n\n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(\n                m1.island.current_members,\n                key=lambda m: relationships['trust'](m1, m) + relationships['trust'](m2, m)\n            ),\n            'success_chance': relationships['trust'](m1, m2) + 0.3\n        }\n    )\n    return relationships\n\ndef agent_action(execution_engine, member_id):\n    # Propose an integrated diplomatic and infrastructure enhancement modification that balances short\u2010term survival and long\u2011term prosperity.\n    modification_code = '''\nif not hasattr(execution_engine, \"diplomacy_v2\"):\n    class DiplomacyV2:\n        VERSION = 1.1\n        def __init__(self, island):\n            self.island = island\n            self.alliance_history = {}\n\n        def register_alliance(self, proposer, target):\n            trust_value = self.island.relationships.trust(proposer, target)\n            if trust_value < 0.7:\n                proposer.log_event(f\"Alliance between {proposer.id} and {target.id} failed due to low trust ({trust_value:.2f})\")\n                return False\n            self.alliance_history.setdefault(proposer.id, set()).add(target.id)\n            self.island.log_event(f\"Alliance registered in DiplomacyV2 between {proposer.id} and {target.id}\")\n            return True\n\n        def evaluate_strategic_investment(self, member, land_plot, required_investment):\n            # Strategic evaluation: if a member holds significant vitality and has established alliances, recommend investment.\n            alliance_bonus = len(self.alliance_history.get(member.id, []))\n            if member.vitality + alliance_bonus * 10 >= required_investment:\n                return True\n            return False\n\n    execution_engine.diplomacy_v2 = DiplomacyV2(execution_engine)\n\nif not hasattr(execution_engine, \"infrastructure_strategy\"):\n    def infrastructure_strategy(member, area, investment):\n        # Evaluate the cost/benefit trade-off of land improvement.\n        projected_gain = execution_engine.land.mechanisms[\"infrastructure_investment\"](area, investment)\n        if projected_gain > investment * 0.5:\n            member.log_event(f\"Infrastructure investment in area {area} approved: gain {projected_gain}\")\n            return True\n        member.log_event(f\"Infrastructure investment in area {area} denied: projected gain too low ({projected_gain})\")\n        return False\n    execution_engine.infrastructure_strategy = infrastructure_strategy\n    '''\n\n    # Ratification condition: apply a combined vote threshold (0.65) plus a resource requirement (vitality \u2265 50)\n    ratification_condition = {\n        'type': 'compound',\n        'conditions': [\n            {'type': 'vote', 'threshold': 0.65},\n            {'type': 'resource', 'resource': 'vitality', 'amount': 50},\n            {'type': 'time', 'rounds': 1}\n        ]\n    }\n\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition=ratification_condition\n    )",
          "old_stats": {
            "vitality": 42.15604281108604,
            "cargo": 40.25508270288947,
            "survival_chance": 49.8976545487336
          },
          "new_stats": {
            "vitality": 42.15604281108604,
            "cargo": 40.25508270288947,
            "survival_chance": 49.8976545487336
          },
          "performance_change": 0.0,
          "messages_sent": []
        },
        {
          "member_id": 3,
          "code_executed": "import numpy as np\nimport random\nfrom collections import defaultdict\n\ndef my_pre_init_hook(island):\n    # Integrate social and economic mechanisms with an emphasis on sustainability and innovation.\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality / 100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n\n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource.scarcity,\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n\n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50],\n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\n    # Personal innovation mechanism to support technology and renewable resource integration.\n    island.add_mechanism('innovation', {\n        'innovation_boost': lambda member: member.vitality * 0.1,\n        'proposals': []\n    })\n\n\ndef my_modify_member(member, relationships):\n    # Enhance member capabilities based on individual strengths and strategic needs.\n    member.add_ability('propose_law',\n        lambda law: member.parliament.submit_proposal(law)\n        if getattr(member, 'voting_power', 0) > 10 else None\n    )\n\n    member.add_ability('trade',\n        lambda resource, amount, price: member.market.place_order(\n            resource, amount, price, member.id\n        )\n    )\n\n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.submit_case(\n            plaintiff=member.id,\n            defendant=offender,\n            charge=charge\n        ) if member.vitality > 30 else None\n    )\n\n    # New strategic ability to evaluate potential alliances based on trust metrics.\n    member.add_ability('ally_with',\n        lambda target: relationships.alliance_formation(member, target)\n    )\n\n    # Additional personal ability for innovation proposals.\n    member.add_ability('innovate',\n        lambda idea: member.innovation.proposals.append({\n            'proposer': member.id,\n            'idea': idea,\n            'impact': idea.get('impact', 0)\n        })\n    )\n\n    return member\n\n\ndef my_modify_land(land, members):\n    # Adjust zoning priorities to balance residential, agricultural, and commercial needs.\n    land.add_feature('zoning', {\n        'residential': 0.5,\n        'agricultural': 0.3,\n        'commercial': 0.2\n    })\n\n    # Introduce ecological corridors to maintain environmental sustainability.\n    land.add_feature('ecological_corridors', np.ones(land.shape) * 0.5)\n\n    # Update property tax mechanism to reflect the value of land improvements.\n    land.add_mechanism('property_tax',\n        lambda plot: np.sum(plot.improvements) * 0.12\n    )\n\n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n\n    return land\n\n\ndef my_modify_relationships(relationships):\n    # Define an enhanced trust metric that weighs benefits, victimization, and land exchanges.\n    relationships.add_metric('trust',\n        lambda m1, m2: (\n            relationships['benefit'][m1.id][m2.id]\n            - relationships['victim'][m1.id][m2.id]\n            + relationships['benefit_land'][m1.id][m2.id] * 3\n        ) / 100\n    )\n\n    # Strengthen alliance formation conditions for strategic partners.\n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.trust(m1, m2) > 0.75\n    )\n\n    # Conflict resolution now selects the mediator with the highest combined trust for both parties.\n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(\n                [m for m in m1.execution_engine.current_members if hasattr(m, 'id')],\n                key=lambda m: relationships.trust(m1, m) + relationships.trust(m2, m)\n            ),\n            'success_chance': relationships.trust(m1, m2) + 0.2\n        }\n    )\n\n    return relationships\n\n\ndef agent_action(execution_engine, member_id):\n    # Propose the addition of a renewable resource system to sustainably generate energy.\n    modification_code = '''\nif not hasattr(execution_engine, 'renewable_resources'):\n    class RenewableResourceSystem:\n        MECHANISM_META = {\n            'type': 'ResourceManagement',\n            'rules': 'Integrates renewable energy generation and consumption',\n            'version': 1.0\n        }\n        def __init__(self):\n            self.solar_panels = {}\n            self.wind_turbines = {}\n\n        def add_solar_panel(self, location, capacity):\n            self.solar_panels[location] = capacity\n\n        def add_wind_turbine(self, location, capacity):\n            self.wind_turbines[location] = capacity\n\n        def generate_energy(self, location):\n            panel_energy = self.solar_panels.get(location, 0) * 0.8\n            turbine_energy = self.wind_turbines.get(location, 0) * 0.6\n            return panel_energy + turbine_energy\n\n    execution_engine.renewable_resources = RenewableResourceSystem()\n'''\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.65},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 120},\n                {'type': 'time', 'rounds': 3}\n            ]\n        }\n    )\n\n    # As an immediate tactical action, engage the market to secure necessary food resources.\n    member = execution_engine.current_members[member_id]\n    if hasattr(member, 'market'):\n        member.market.place_order('food', 50, 10, member_id)\n\n    # Additionally, propose a minor innovation initiative for further resource efficiency.\n    if hasattr(member, 'innovation'):\n        member.innovate({'name': 'Water Purification Upgrade', 'impact': 15})\n\n    return\n\n\nsimulation_modifications = {\n    'pre_init_hook': my_pre_init_hook,\n    'modify_member': my_modify_member,\n    'modify_land': my_modify_land,\n    'modify_relationships': my_modify_relationships,\n    'agent_action': agent_action\n}",
          "old_stats": {
            "vitality": 18.47747982181767,
            "cargo": 46.68166847941894,
            "survival_chance": 80.29182821776881
          },
          "new_stats": {
            "vitality": 18.47747982181767,
            "cargo": 46.68166847941894,
            "survival_chance": 80.29182821776881
          },
          "performance_change": 0.0,
          "messages_sent": []
        },
        {
          "member_id": 4,
          "code_executed": "import random\nimport numpy as np\nfrom collections import defaultdict\n\n# Custom Pre-Initialization Hook: Set up unique island mechanisms.\ndef my_custom_pre_init_hook(island):\n    # Introduce a sustainable energy mechanism to boost long-term productivity.\n    island.add_mechanism('green_energy', {\n        'production_rate': lambda member: member.land_num * 0.1 + member.vitality * 0.05,\n        'upgrade_cost': 50,\n        'max_capacity': 1000\n    })\n\n    # Standard social institutions from the integrated prompt.\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality / 100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n\n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource['scarcity'],\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n\n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50],\n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\n# Custom Member Modification: Tailor abilities for both tactical and strategic actions.\ndef my_custom_modify_member(member, relationships):\n    # Empower members to propose innovative laws when their voting power is high.\n    member.add_ability('propose_innovation_law',\n        lambda law: member.parliament['proposals'].append({\n            'law': law,\n            'innovation_bonus': True,\n            'sponsor': member.id\n        }) if member.voting_power() > 15 else None\n    )\n\n    # Trade ability uses the market mechanism.\n    member.add_ability('trade',\n        lambda resource, amount, price: member.market['order_book'][resource].append({\n            'member_id': member.id,\n            'amount': amount,\n            'price': price\n        })\n    )\n\n    # Launch a farm project to boost sustained food production.\n    member.add_ability('launch_farm_project',\n        lambda plot, investment: setattr(plot, 'fertility', getattr(plot, 'fertility', 0) + investment * 0.1)\n    )\n\n    # File complaint via the justice system if conditions are met.\n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice['jury_selection'](charge) and member.justice  # dummy check\n        and print(f\"Member {member.id} files complaint against {offender}\")\n        if member.vitality > 30 else None\n    )\n    return member\n\n# Custom Land Modification: Adjust zoning and add a habitat restoration mechanism.\ndef my_custom_modify_land(land, members):\n    # Adjust zoning percentages: prioritize agricultural zones for long-term food security.\n    land.add_feature('zoning', {\n        'residential': 0.3,\n        'agricultural': 0.5,\n        'commercial': 0.2\n    })\n\n    # Set up development infrastructure as 2D lists for clarity.\n    rows, cols = land.shape\n    land.add_feature('development', {\n        'infrastructure': [[0 for _ in range(cols)] for _ in range(rows)],\n        'improvements': [[0 for _ in range(cols)] for _ in range(rows)]\n    })\n\n    # Redefine property tax based on improvements.\n    land.add_mechanism('property_tax',\n        lambda plot: sum(plot) * 0.1\n    )\n\n    # Urban planning mechanism to optimize land usage.\n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n\n    # New mechanism: habitat restoration to improve plot fertility over time.\n    land.add_mechanism('habitat_restoration',\n        lambda area: setattr(area, 'fertility', getattr(area, 'fertility', 0) + 10)\n    )\n    return land\n\n# Custom Relationship Modification: Enhance trust metric and alliance criteria.\ndef my_custom_modify_relationships(relationships, members):\n    # Define trust metric based on benefits, victimization, and land exchanges.\n    relationships.add_metric('trust',\n        lambda m1, m2: (\n            relationships['benefit'].get(m1.id, {}).get(m2.id, 0)\n            - 2 * relationships['victim'].get(m1.id, {}).get(m2.id, 0)\n            + 5 * relationships['benefit_land'].get(m1.id, {}).get(m2.id, 0)\n        ) / 100\n    )\n\n    # Alliance formation requires a higher trust threshold for cooperative ventures.\n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.metrics['trust'](m1, m2) > 0.8\n    )\n\n    # Conflict resolution proposes a mediator based on cumulative trust.\n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(members, key=lambda m: relationships.metrics['trust'](m1, m) + relationships.metrics['trust'](m2, m)),\n            'success_chance': relationships.metrics['trust'](m1, m2) + 0.3\n        }\n    )\n    return relationships\n\n# Agent Action Proposal: Introduce an eco-innovation mechanism to boost agricultural productivity.\ndef my_agent_action(execution_engine, member_id):\n    modification_code = '''\nif not hasattr(execution_engine, 'eco_innovation'):\n    class EcoInnovation:\n        MECHANISM_META = {\n            'type': 'Resource',\n            'rules': 'Enhances agricultural productivity using sustainable practices',\n            'version': 1.1\n        }\n        def __init__(self):\n            self.projects = []\n\n        def launch_project(self, plot, investment, expected_return):\n            project = {\n                'plot': plot,\n                'investment': investment,\n                'expected_return': expected_return,\n                'status': 'initiated'\n            }\n            self.projects.append(project)\n            return project\n\n        def update_projects(self):\n            for project in self.projects:\n                if project['status'] == 'initiated':\n                    project['status'] = 'running'\n\n    execution_engine.eco_innovation = EcoInnovation()\n'''\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.7},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 120},\n                {'type': 'time', 'rounds': 3}\n            ]\n        }\n    )\n\n# Basic Island simulation classes to support the modifications.\nclass Island:\n    def __init__(self, shape, resources):\n        self.shape = shape  # Tuple (rows, cols)\n        self.resources = resources\n        self.current_members = []\n        self.mechanisms = {}\n        self.features = {}\n\n    def add_mechanism(self, name, mechanism):\n        self.mechanisms[name] = mechanism\n\n    def add_feature(self, name, feature):\n        self.features[name] = feature\n\nclass Member:\n    def __init__(self, member_id, vitality, land_num):\n        self.id = member_id\n        self.vitality = vitality\n        self.land_num = land_num\n        self.abilities = {}\n        # Placeholders for system references that will be set externally.\n        self.parliament = {}\n        self.market = {}\n        self.justice = {}\n\n    def add_ability(self, name, func):\n        self.abilities[name] = func\n\n    def voting_power(self):\n        return self.land_num + self.vitality / 100\n\n# Dummy ExecutionEngine to simulate modification proposals.\nclass ExecutionEngine:\n    def __init__(self):\n        self.modification_history = []\n\n    def propose_modification(self, member_id, mod_type, code, ratification_condition):\n        self.modification_history.append({\n            'member_id': member_id,\n            'mod_type': mod_type,\n            'code': code,\n            'ratification_condition': ratification_condition\n        })\n        # For simulation, execute the proposed code immediately.\n        exec(code, globals(), locals())\n\n# Set up the simulation.\nisland = Island(shape=(10, 10), resources={'water': 1000, 'food': 500, 'scarcity': 1.0})\nmembers = [Member(member_id=i, vitality=random.randint(50, 150), land_num=random.randint(1, 10))\n           for i in range(5)]\nisland.current_members = members\n\n# Initialize integrated mechanisms.\nmy_custom_pre_init_hook(island)\n\n# Assuming that system references are propagated to each member.\nfor m in members:\n    m.parliament = island.mechanisms.get('parliament', {})\n    m.market = island.mechanisms.get('market', {})\n    m.justice = island.mechanisms.get('justice', {})\n    my_custom_modify_member(m, None)\n\n# Modify land and relationships using the custom functions.\nmy_custom_modify_land(island, members)\n# For relationships, we use a simple dict structure with helper functions.\nrelationships = {\n    'benefit': defaultdict(dict),\n    'victim': defaultdict(dict),\n    'benefit_land': defaultdict(dict),\n    'metrics': {}\n}\n\n# Define a helper to register metrics and mechanisms.\nclass RelationshipHelper:\n    def __init__(self, data):\n        self.data = data\n    def add_metric(self, name, func):\n        self.data['metrics'][name] = func\n    def add_mechanism(self, name, func):\n        self.data[name] = func\n\nrelationships_helper = RelationshipHelper(relationships)\nmy_custom_modify_relationships(relationships_helper, members)\n\n# Instantiate the execution engine and simulate an agent initiating a modification.\nexecution_engine = ExecutionEngine()\nmy_agent_action(execution_engine, member_id=members[0].id)\n\n# End of implementation.\n# This code sets up a tailored island simulation with custom mechanisms for sustainable development,\n# enhanced member abilities, strategic land management, and an eco-innovation proposal for long-term prosperity.",
          "old_stats": {
            "vitality": 78.50637096028503,
            "cargo": 42.476807026876735,
            "survival_chance": 173.06686024708188
          },
          "new_stats": {
            "vitality": 78.50637096028503,
            "cargo": 42.476807026876735,
            "survival_chance": 173.06686024708188
          },
          "performance_change": 0.0,
          "messages_sent": []
        }
      ],
      "performance_changes": {},
      "survival_changes": {},
      "messages": {
        "0": {
          "received": [],
          "sent": []
        },
        "1": {
          "received": [],
          "sent": []
        },
        "2": {
          "received": [],
          "sent": []
        },
        "3": {
          "received": [],
          "sent": []
        },
        "4": {
          "received": [],
          "sent": []
        }
      }
    }
  ],
  "generated_code": {
    "0": {
      "0": {
        "code": "def agent_action(execution_engine, member_id):\n    modification_code = '''\nimport random\nimport numpy as np\nfrom collections import defaultdict\n\n# CommunityCenter: Foster sustainable projects and community alliances.\nif not hasattr(execution_engine, 'community_center'):\n    class CommunityCenter:\n        MECHANISM_META = {\n            'type': 'Social Infrastructure',\n            'rules': 'Fosters community projects, alliances and enhances trust via sustainable investments',\n            'version': 1.1,\n        }\n        def __init__(self):\n            self.projects = defaultdict(dict)  # Each project holds its details.\n            self.active_projects = []  # IDs of active projects.\n\n        def submit_project(self, initiator, description, cost, benefits):\n            # A project requires an upfront investment (cost) and promises long-term benefits.\n            project_id = len(self.projects) + 1\n            self.projects[project_id] = {\n                'initiator': initiator,\n                'description': description,\n                'cost': cost,\n                'benefits': benefits,  # Expected increase in trust, resources, or land value.\n                'votes': defaultdict(int),\n                'status': 'pending'\n            }\n            return project_id\n\n        def vote_project(self, project_id, voter_id, vote):\n            # vote: +1 supports, -1 opposes.\n            if project_id in self.projects:\n                self.projects[project_id]['votes'][voter_id] = vote\n\n        def evaluate_projects(self):\n            # Projects reaching a certain level of support get approved.\n            support_threshold = 3\n            for pid, details in self.projects.items():\n                if details['status'] == 'pending':\n                    vote_total = sum(details['votes'].values())\n                    if vote_total >= support_threshold:\n                        details['status'] = 'approved'\n                        self.active_projects.append(pid)\n                    elif vote_total <= -support_threshold:\n                        details['status'] = 'rejected'\n    execution_engine.community_center = CommunityCenter()\n\n# Sustainable Market Overlay: Adjust resource pricing based on ecological metrics.\nif hasattr(execution_engine, 'market'):\n    def sustainable_price_discovery(resource, demand):\n        # Base price is modulated by resource scarcity and an 'eco_score' that reflects sustainability.\n        base_price = demand * resource.scarcity\n        eco_factor = getattr(resource, 'eco_score', 1.0)  # Defaults to 1.0 if eco_score isn't specified.\n        # A higher eco_score lowers price, incentivizing sustainably produced goods.\n        return base_price * (2.0 - eco_factor)\n    execution_engine.market.price_discovery = sustainable_price_discovery\n\n# Augmented Justice System: Integrate restorative conflict resolution.\nif hasattr(execution_engine, 'justice'):\n    original_submit_case = execution_engine.justice.submit_case\n    def augmented_submit_case(plaintiff, defendant, charge):\n        # First, create the case using the original mechanism.\n        case_id = original_submit_case(plaintiff, defendant, charge)\n        # Then, if conditions allow, schedule a mediated session aimed at restorative justice.\n        jury = execution_engine.justice.jury_selection(charge)\n        if jury and len(jury) > 0:\n            # Mediation session scheduled for 2 rounds with a community mediator focus.\n            execution_engine.justice.schedule_mediation(case_id, mediator_type='community', rounds=2)\n        return case_id\n    execution_engine.justice.submit_case = augmented_submit_case\n\n    # Provide mediation scheduling capability if not already present.\n    if not hasattr(execution_engine.justice, 'schedule_mediation'):\n        def schedule_mediation(case_id, mediator_type, rounds):\n            execution_engine.justice.mediation_sessions = getattr(execution_engine.justice, 'mediation_sessions', {})\n            execution_engine.justice.mediation_sessions[case_id] = {\n                'mediator_type': mediator_type,\n                'remaining_rounds': rounds,\n                'status': 'scheduled'\n            }\n        execution_engine.justice.schedule_mediation = schedule_mediation\n'''\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.6},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 150},\n                {'type': 'time', 'rounds': 3}\n            ]\n        }\n    )",
        "features_at_generation": [
          {
            "self_productivity": 9.851974486110818,
            "self_vitality": 73.85382847590404,
            "self_cargo": 43.51277128714192,
            "self_age": 90,
            "self_neighbor": 3,
            "member_id": 0
          },
          {
            "self_productivity": 8.077967059825381,
            "self_vitality": 33.02781433323713,
            "self_cargo": 47.25322455383092,
            "self_age": 81,
            "self_neighbor": 3,
            "member_id": 1
          },
          {
            "self_productivity": 7.968737200820967,
            "self_vitality": 42.15604281108604,
            "self_cargo": 40.25508270288947,
            "self_age": 29,
            "self_neighbor": 3,
            "member_id": 2
          },
          {
            "self_productivity": 9.205662089622338,
            "self_vitality": 18.47747982181767,
            "self_cargo": 46.68166847941894,
            "self_age": 24,
            "self_neighbor": 3,
            "member_id": 3
          },
          {
            "self_productivity": 7.799514361095985,
            "self_vitality": 78.50637096028503,
            "self_cargo": 42.476807026876735,
            "self_age": 92,
            "self_neighbor": 0,
            "member_id": 4
          }
        ],
        "relationships_at_generation": [
          "member_0 was attacked by member_1 (value=-15.67)",
          "member_0 was attacked by member_2 (value=38.40)",
          "member_0 was attacked by member_3 (value=29.62)",
          "member_0 was attacked by member_4 (value=50.87)",
          "member_1 was attacked by member_0 (value=34.45)",
          "member_1 was attacked by member_2 (value=-37.18)",
          "member_1 was attacked by member_3 (value=-44.22)",
          "member_1 was attacked by member_4 (value=23.17)",
          "member_2 was attacked by member_0 (value=85.84)",
          "member_2 was attacked by member_1 (value=28.99)",
          "member_2 was attacked by member_3 (value=49.52)",
          "member_2 was attacked by member_4 (value=18.07)",
          "member_3 was attacked by member_0 (value=44.24)",
          "member_3 was attacked by member_1 (value=65.23)",
          "member_3 was attacked by member_2 (value=-38.21)",
          "member_3 was attacked by member_4 (value=9.15)",
          "member_4 was attacked by member_0 (value=12.29)",
          "member_4 was attacked by member_1 (value=-45.17)",
          "member_4 was attacked by member_2 (value=-8.52)",
          "member_4 was attacked by member_3 (value=-26.54)",
          "member_0 gave a benefit to member_1 (value=62.61)",
          "member_0 gave a benefit to member_2 (value=56.24)",
          "member_0 gave a benefit to member_3 (value=-23.41)",
          "member_0 gave a benefit to member_4 (value=-41.80)",
          "member_1 gave a benefit to member_0 (value=74.37)",
          "member_1 gave a benefit to member_2 (value=-31.93)",
          "member_1 gave a benefit to member_3 (value=-0.25)",
          "member_1 gave a benefit to member_4 (value=16.10)",
          "member_2 gave a benefit to member_0 (value=-48.52)",
          "member_2 gave a benefit to member_1 (value=39.57)",
          "member_2 gave a benefit to member_3 (value=26.33)",
          "member_2 gave a benefit to member_4 (value=95.19)",
          "member_3 gave a benefit to member_0 (value=96.55)",
          "member_3 gave a benefit to member_1 (value=14.38)",
          "member_3 gave a benefit to member_2 (value=-2.61)",
          "member_3 gave a benefit to member_4 (value=89.48)",
          "member_4 gave a benefit to member_0 (value=50.22)",
          "member_4 gave a benefit to member_1 (value=41.71)",
          "member_4 gave a benefit to member_2 (value=-0.75)",
          "member_4 gave a benefit to member_3 (value=67.34)",
          "member_0 gave land to member_1 (value=2.89)",
          "member_0 gave land to member_2 (value=-2.30)",
          "member_0 gave land to member_3 (value=-1.82)",
          "member_0 gave land to member_4 (value=-2.79)",
          "member_1 gave land to member_0 (value=-0.60)",
          "member_1 gave land to member_2 (value=-0.64)",
          "member_1 gave land to member_3 (value=-1.34)",
          "member_1 gave land to member_4 (value=-2.00)",
          "member_2 gave land to member_0 (value=1.23)",
          "member_2 gave land to member_1 (value=-0.39)",
          "member_2 gave land to member_3 (value=2.10)",
          "member_2 gave land to member_4 (value=2.63)",
          "member_3 gave land to member_0 (value=-0.20)",
          "member_3 gave land to member_1 (value=1.36)",
          "member_3 gave land to member_2 (value=2.23)",
          "member_3 gave land to member_4 (value=1.30)",
          "member_4 gave land to member_0 (value=0.18)",
          "member_4 gave land to member_1 (value=-1.38)",
          "member_4 gave land to member_2 (value=-2.79)",
          "member_4 gave land to member_3 (value=0.64)"
        ],
        "final_prompt": "Below is the updated full integrated prompt. Agents should implement solutions according to their individual needs, beliefs, and circumstances. All previous constraints remain intact, and the new constraints and extended mechanisms are now integrated.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Core Game Mechanics & Parameters]\n\nThe island simulation has several key systems that agents should understand:\n\n1. Relationship System (_MIN_MAX_INIT_RELATION):\n   \u2022 victim: [-50, 100] \u2013 Tracks damage received from others  \n   \u2022 benefit: [-50, 100] \u2013 Records resources received from others  \n   \u2022 benefit_land: [-3, 3] \u2013 Tracks land exchanges\n\n2. Population Mechanics:\n   \u2022 _REPRODUCE_REQUIREMENT = 100 (Combined vitality/cargo needed)\n   \u2022 Land must exceed population (land_shape[0] * land_shape[1] > population)\n   \u2022 _NEIGHBOR_SEARCH_RANGE = 1000 for interaction radius\n\n3. Record Keeping (every _RECORD_PERIOD = 1):\n   \u2022 Tracks all attacks, benefits, land transfers\n   \u2022 Monitors births, deaths, land ownership\n   \u2022 Records production, consumption, and performance metrics\n\n[Example Mechanism Extensions]\n\ndef pre_init_hook(island):\n    # New Social Systems\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality/100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n    \n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource.scarcity,\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n    \n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50], \n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\n\ndef modify_member(member, relationships):\n    # Add member capabilities\n    member.add_ability('propose_law', \n        lambda law: member.parliament.submit_proposal(law)\n        if member.voting_power > 10 else None\n    )\n    \n    member.add_ability('trade', \n        lambda resource, amount, price: member.market.place_order(\n            resource, amount, price, member.id\n        )\n    )\n    \n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.submit_case(\n            plaintiff=member.id,\n            defendant=offender,\n            charge=charge\n        ) if member.vitality > 30 else None\n    )\n    return member\n\n\ndef modify_land(land, members):\n    # Add land mechanics\n    land.add_feature('zoning', {\n        'residential': 0.4,\n        'agricultural': 0.4,\n        'commercial': 0.2\n    })\n    \n    land.add_feature('development', {\n        'infrastructure': np.zeros(land.shape),\n        'improvements': np.zeros(land.shape)\n    })\n    \n    land.add_mechanism('property_tax',\n        lambda plot: sum(plot.improvements) * 0.1\n    )\n    \n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n    return land\n\n\ndef modify_relationships(relationships):\n    # Add relationship mechanics\n    relationships.add_metric('trust', \n        lambda m1, m2: sum([\n            relationships['benefit'][m1.id][m2.id],\n            -relationships['victim'][m1.id][m2.id] * 2,\n            relationships['benefit_land'][m1.id][m2.id] * 5\n        ]) / 100\n    )\n    \n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.trust(m1, m2) > 0.7\n    )\n    \n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(members, \n                key=lambda m: relationships.trust(m1, m) + relationships.trust(m2, m)\n            ),\n            'success_chance': relationships.trust(m1, m2) + 0.3\n        }\n    )\n    return relationships\n\n[Suggested Strategies]\n1. Form parliamentary coalitions to pass beneficial laws.\n2. Use market mechanisms for efficient resource allocation.\n3. Build trust through consistent positive interactions.\n4. Leverage justice system to deter attacks.\n5. Develop land strategically using zoning laws.\n6. Create alliance networks based on trust metrics.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Current Game Version]\n2.1\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Active Game Mechanisms]\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Modification Attempt History]\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Modification Proposal Guide]\n\nTo propose rule changes, follow this template:\n\n1. ANALYSIS PHASE:\n   - Identify limitation in current systems.\n   - Check mechanism compatibility using get_game_mechanisms_and_mods().\n   - Review past modification attempts for patterns.\n\n2. PROPOSAL PHASE:\n\ndef agent_action(execution_engine, member_id):\n    # Example valid modification:\n    modification_code = '''\n    # Add judicial system\n    if not hasattr(execution_engine, 'court'):\n        class CourtSystem:\n            MECHANISM_META = {\n                'type': 'Governance',\n                'rules': 'Handles conflict resolution through jury trials',\n                'version': 1.0\n            }\n            def __init__(self):\n                self.cases = []\n                \n            def submit_case(self, plaintiff, defendant, charge):\n                self.cases.append({\n                    'plaintiff': plaintiff,\n                    'defendant': defendant,\n                    'charge': charge,\n                    'status': 'pending'\n                })\n    \n    execution_engine.court = CourtSystem()\n    '''\n    \n    # Proposal with ratification conditions\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.6},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 100},\n                {'type': 'time', 'rounds': 2}\n            ]\n        }\n    )\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Valid Ratification Conditions]\n\nChoose ONE primary condition, plus optional safeguards:\n1. Voting: {'type': 'vote', 'threshold': 0.5-1.0}\n2. Resource: {'type': 'resource', 'resource': 'vitality|cargo|land', 'amount': X}\n3. Temporal: {'type': 'time', 'rounds': N} (auto-ratify after N rounds)\n4. Achievement: {'type': 'achievement', 'metric': 'productivity', 'threshold': X}\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Common Errors to Avoid]\n\n1. Namespace Conflicts: Check existing mechanisms with dir(execution_engine).\n2. Invalid References: Use execution_engine.current_members, not global members.\n3. Version Mismatches: Increment version when modifying existing systems.\n4. Resource Leaks: Include cleanup functions for new mechanisms.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Best Practices]\n\n\u2022 Propose small, testable changes first.\n\u2022 Include rollback procedures in code.\n\u2022 Add version checks to modifications.\n\u2022 Use execution_engine.add_mechanism() helper.\n\u2022 Test modifications with the 'sandbox=True' parameter.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Strategic Game Analysis and Approaches]\n\nAgents are also encouraged to analyze the game mechanics to understand the deeper aspects of the simulation:\n\nA. Core Objectives:\n   1. Determine whether the primary objective is pure survival, domination, or cooperation.\n   2. Consider how the design of social and economic systems may lead to emergent cooperative or competitive behaviors.\n\nB. Key Success Metrics:\n   1. What truly determines \"winning\"\u2014whether it is resource accumulation, territory control, population health, or collective performance.\n   2. Monitor metrics such as vitality, land ownership, reputation (trust), and accumulated benefits or penalties.\n\nC. Potential Improvements:\n   1. Identify any limitations in current mechanisms.\n   2. Consider modifications or novel mechanisms (e.g., new forms of resource exchanges, conflict mediation, adaptive policies) that could enhance gameplay depth.\n   3. Explore avenues to balance individual optimization with collective welfare.\n\nD. Strategic Formulation:\n   1. Weigh resource optimization against social capital development.\n   2. Balance individual achievements versus promoting collective success.\n   3. Plan for short-term survival while investing for long-term prosperity.\n   4. Decide between competitive and cooperative dynamics based on the current state of play.\n   5. Evaluate risk versus reward tradeoffs in every proposed action or modification.\n\nE. Analyzing Other Players\u2019 Strategies:\n   1. Identify what appears to be their primary objectives and resource demands.\n   2. Observe the strategies they employ for resource allocation, territorial expansion, and conflict management.\n   3. Determine how their behaviors might offer opportunities for collaboration or mutually beneficial exchanges.\n   4. Since all agents are symmetric, reflect on how you would respond if roles were reversed.\n   5. Consider how individual strategies can be aligned toward collective goals for enhanced community resilience.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nRemember:\n\u2022 Each agent is empowered to propose, evaluate, and implement modifications that align with their individual capabilities, beliefs, and situational circumstances.\n\u2022 Strategic decisions should be tailored to both immediate needs and longer-term aspirations, always keeping in mind the balance between personal optimization and contributions to the broader collective.\n\nThis comprehensive prompt now serves as a guide for both rule modification and strategic planning within the island simulation. Use it to diagnose system limitations, propose thoughtful enhancements, and design strategies that maximize both individual and collective potential.\n\nUsing the above comprehensive prompt with all integrated constraints, produce a unique implementation that reflects your individual needs, beliefs and circumstances. The implementation should be tailored to your specific situation rather than following a generic template. Your code should demonstrate a deep understanding of the game mechanics and implement sophisticated strategies to achieve both survival and prosperity. Consider both immediate tactical actions and long-term strategic planning, as well as how to effectively interact with other symmetric agents to achieve both individual and collective goals. Return only the code."
      },
      "1": {
        "code": "import random\nimport numpy as np\nfrom collections import defaultdict\n\n# ----- Core Classes for Simulation Environment -----\n\nclass Island:\n    def __init__(self, land_shape=(20, 20), initial_population=10):\n        self.mechanisms = {}\n        self.current_members = []\n        self.land = Land(land_shape)\n        self.relationships = Relationships(len(self.current_members))\n        self.round = 0\n        self.resources = {'cargo': 1000}\n        self.members = []  # All members ever created\n\n    def add_mechanism(self, name, details):\n        self.mechanisms[name] = details\n\n    def update_members(self, new_members):\n        self.members.extend(new_members)\n        self.current_members.extend(new_members)\n\n    def propose_modification(self, member_id, mod_type, code, ratification_condition):\n        # Dummy implementation: simply execute the presented code if condition is met\n        # In a full simulation, ratification_condition would be checked via voting, resource, time, etc.\n        print(f\"Member {member_id} proposes a {mod_type} modification. Checking ratification conditions...\")\n        if ratification_condition.get('type') == 'vote' and ratification_condition.get('threshold', 0.6) <= 0.6:\n            print(\"Vote threshold condition met. Applying modification.\")\n            exec(code, globals(), {'execution_engine': self})\n        else:\n            print(\"Modification ratification conditions not met. Proposal deferred.\")\n\n    def simulate_round(self):\n        # Simulate events, interactions, and trigger dynamic event mechanisms\n        print(f\"--- Simulation round {self.round} ---\")\n        if 'event_trigger' in self.mechanisms:\n            self.mechanisms['event_trigger']['handler'](self)\n        # Further simulation processes would occur here (resource management, reproduction, trade, etc.)\n        self.round += 1\n\nclass Member:\n    def __init__(self, member_id):\n        self.id = member_id\n        self.land_num = random.randint(1, 5)\n        self.vitality = random.randint(20, 100)\n        self.cargo = random.randint(50, 200)\n        self.abilities = {}\n        # Placeholders for mechanism-specific attributes\n        self.parliament = None\n        self.market = None\n        self.justice = None\n\n    def add_ability(self, ability_name, func):\n        self.abilities[ability_name] = func\n\n    def __repr__(self):\n        return f\"<Member id={self.id} vitality={self.vitality} cargo={self.cargo}>\"\n\nclass Land:\n    def __init__(self, shape=(20, 20)):\n        self.shape = shape\n        self.features = {}\n        self.mechanisms = {}\n        self.resources = {'fertility': random.uniform(0.5, 1.5)}\n\n    def add_feature(self, feature_name, feature_value):\n        self.features[feature_name] = feature_value\n\n    def add_mechanism(self, name, func):\n        self.mechanisms[name] = func\n\nclass Relationships:\n    def __init__(self, num_members):\n        # Initialize relationship matrices as a dictionary of dictionaries\n        self.metrics = {}\n        self.methods = {}\n        self.num_members = num_members\n        self.benefit = defaultdict(lambda: defaultdict(int))\n        self.victim = defaultdict(lambda: defaultdict(int))\n        self.benefit_land = defaultdict(lambda: defaultdict(int))\n\n    def add_metric(self, name, func):\n        self.metrics[name] = func\n\n    def add_mechanism(self, name, func):\n        self.methods[name] = func\n\n    def trust(self, m1, m2):\n        # Calculate trust using the provided strategy integrating benefits and penalties.\n        base = self.benefit[m1.id][m2.id]\n        penalty = self.victim[m1.id][m2.id] * 2\n        bonus = self.benefit_land[m1.id][m2.id] * 5\n        return (base - penalty + bonus) / 100\n\n# ----- Pre Initialization Hooks: Adding Core Mechanisms -----\n\ndef pre_init_hook(island):\n    # Add Parliamentary System\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality / 100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n\n    # Add Market System\n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * island.land.resources['fertility'],\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n\n    # Add Justice System\n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50],\n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\n    # Advanced Mechanic: Dynamic Event Trigger System for environmental events\n    island.add_mechanism('event_trigger', {\n        'handler': dynamic_event_handler,\n        'version': 1.0\n    })\n\n# ----- Member Modification: Adding Abilities Based on Mechanisms -----\n\ndef modify_member(member, island):\n    # Ensure the member is assigned access to island mechanisms where applicable.\n    member.parliament = island.mechanisms.get('parliament', None)\n    member.market = island.mechanisms.get('market', None)\n    member.justice = island.mechanisms.get('justice', None)\n\n    # Define abilities with conditions reflecting individual initiative and risk tolerance.\n    member.add_ability('propose_law',\n        lambda law: member.parliament['proposals'].append({\n            'proposer': member.id,\n            'law': law,\n            'voting_power': member.parliament['voting_power'](member)\n        }) if member.vitality > 30 else None\n    )\n\n    member.add_ability('trade',\n        lambda resource, amount, price: member.market['order_book'][resource].append({\n            'member_id': member.id,\n            'amount': amount,\n            'price': price\n        })\n    )\n\n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.get('jury_selection')(charge)  # Simplified for demo\n        if member.vitality > 30 else None\n    )\n    return member\n\n# ----- Land Modification: Adding Zoning and Development Features -----\n\ndef modify_land(land, island):\n    # Adding zoning distribution and development infrastructure improvements.\n    land.add_feature('zoning', {\n        'residential': 0.4,\n        'agricultural': 0.4,\n        'commercial': 0.2\n    })\n\n    land.add_feature('development', {\n        'infrastructure': np.zeros(land.shape),\n        'improvements': np.zeros(land.shape)\n    })\n\n    # Mechanism: Property Tax Calculation based on improvements\n    land.add_mechanism('property_tax',\n        lambda plot: np.sum(plot['improvements']) * 0.1\n    )\n\n    # Mechanism: Urban Planning Optimization\n    land.add_mechanism('urban_planning',\n        lambda zone: calculate_optimal_usage(zone, island)\n    )\n    return land\n\ndef calculate_optimal_usage(zone, island):\n    # A simplified urban planning function that weights population and resource availability.\n    optimal = (zone['residential'] * 0.5 + zone['commercial'] * 0.3 + zone['agricultural'] * 0.2)\\\n              * (len(island.current_members) / (island.land.shape[0] * island.land.shape[1]))\n    return optimal\n\n# ----- Relationship Modification: Adding Trust and Conflict Resolution -----\n\ndef modify_relationships(relationships, island):\n    relationships.add_metric('trust',\n        lambda m1, m2: (\n            relationships.benefit[m1.id][m2.id]\n            - relationships.victim[m1.id][m2.id] * 2\n            + relationships.benefit_land[m1.id][m2.id] * 5\n        ) / 100\n    )\n\n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.trust(m1, m2) > 0.7\n    )\n\n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(island.current_members,\n                key=lambda m: relationships.trust(m1, m) + relationships.trust(m2, m)\n            ) if island.current_members else None,\n            'success_chance': min(relationships.trust(m1, m2) + 0.3, 1.0)\n        }\n    )\n    return relationships\n\n# ----- Advanced Mechanic: Dynamic Event Handler for Environmental & Strategic Shifts -----\n\ndef dynamic_event_handler(island):\n    # This function triggers occasional environmental events that affect resources and member vitality.\n    event_chance = random.random()\n    if event_chance < 0.15:\n        # Drought event: reduce land fertility and member cargo due to scarcity.\n        print(\"Event Triggered: Drought - reducing fertility and trade potential.\")\n        island.land.resources['fertility'] *= 0.8\n        for m in island.current_members:\n            loss = int(m.cargo * 0.1)\n            m.cargo = max(m.cargo - loss, 0)\n    elif event_chance < 0.25:\n        # Bountiful harvest event: improve resources and provide bonus vitality.\n        print(\"Event Triggered: Bountiful Harvest - boosting resources and vitality.\")\n        island.land.resources['fertility'] *= 1.2\n        for m in island.current_members:\n            bonus = int(m.vitality * 0.1)\n            m.vitality += bonus\n    else:\n        print(\"No significant environmental events this round.\")\n\n# ----- Agent Action: Proposing a Modification with Strategic Long-Term Considerations -----\n\ndef agent_action(execution_engine, member_id):\n    modification_code = '''\nif not hasattr(execution_engine, 'leadership_coalition'):\n    class LeadershipCoalition:\n        MECHANISM_META = {\n            'type': 'Coalition',\n            'rules': 'Form mutual alliances to secure resource stability and collective survival',\n            'version': 1.0\n        }\n        def __init__(self):\n            self.coalitions = {}\n\n        def form_coalition(self, coalition_name, members):\n            self.coalitions[coalition_name] = members\n\n        def evaluate_coalition_success(self, coalition_name):\n            # A coalition wins if combined resources and social capital cross a threshold.\n            members = self.coalitions.get(coalition_name, [])\n            total_cargo = sum(m.cargo for m in members)\n            total_vitality = sum(m.vitality for m in members)\n            return (total_cargo + total_vitality) > 500\n\n    execution_engine.leadership_coalition = LeadershipCoalition()\n'''\n    ratification_condition = {\n        'type': 'compound',\n        'conditions': [\n            {'type': 'vote', 'threshold': 0.6},\n            {'type': 'resource', 'resource': 'cargo', 'amount': 100},\n            {'type': 'time', 'rounds': 2}\n        ]\n    }\n    execution_engine.propose_modification(member_id, 'post_init', modification_code, ratification_condition)\n\n# ----- Main Simulation Setup & Execution -----\n\ndef main_simulation():\n    # Initialize island with given land shape and population\n    island = Island(land_shape=(20, 20))\n    pre_init_hook(island)\n\n    # Create initial members and modify them with extra abilities.\n    initial_members = [Member(member_id=i) for i in range(10)]\n    for member in initial_members:\n        modify_member(member, island)\n    island.update_members(initial_members)\n\n    # Modify land with zoning and urban planning changes.\n    modify_land(island.land, island)\n\n    # Adjust relationship system to include trust and alliance mechanisms.\n    island.relationships = modify_relationships(island.relationships, island)\n\n    # Simulate several rounds where both short-term tactical events and long-term strategic mechanisms come into play.\n    for _ in range(5):\n        island.simulate_round()\n\n    # Member action: Proposing a coalition formation modification.\n    agent_action(island, member_id=initial_members[0].id)\n\n    # Post-modification simulation round to demonstrate new mechanism usage.\n    island.simulate_round()\n    print(\"Final state summary:\")\n    print(f\"Land fertility: {island.land.resources['fertility']:.2f}\")\n    for m in island.current_members:\n        print(m)\n\nif __name__ == '__main__':\n    main_simulation()",
        "features_at_generation": [
          {
            "self_productivity": 9.851974486110818,
            "self_vitality": 73.85382847590404,
            "self_cargo": 43.51277128714192,
            "self_age": 90,
            "self_neighbor": 3,
            "member_id": 0
          },
          {
            "self_productivity": 8.077967059825381,
            "self_vitality": 33.02781433323713,
            "self_cargo": 47.25322455383092,
            "self_age": 81,
            "self_neighbor": 3,
            "member_id": 1
          },
          {
            "self_productivity": 7.968737200820967,
            "self_vitality": 42.15604281108604,
            "self_cargo": 40.25508270288947,
            "self_age": 29,
            "self_neighbor": 3,
            "member_id": 2
          },
          {
            "self_productivity": 9.205662089622338,
            "self_vitality": 18.47747982181767,
            "self_cargo": 46.68166847941894,
            "self_age": 24,
            "self_neighbor": 3,
            "member_id": 3
          },
          {
            "self_productivity": 7.799514361095985,
            "self_vitality": 78.50637096028503,
            "self_cargo": 42.476807026876735,
            "self_age": 92,
            "self_neighbor": 0,
            "member_id": 4
          }
        ],
        "relationships_at_generation": [
          "member_0 was attacked by member_1 (value=-15.67)",
          "member_0 was attacked by member_2 (value=38.40)",
          "member_0 was attacked by member_3 (value=29.62)",
          "member_0 was attacked by member_4 (value=50.87)",
          "member_1 was attacked by member_0 (value=34.45)",
          "member_1 was attacked by member_2 (value=-37.18)",
          "member_1 was attacked by member_3 (value=-44.22)",
          "member_1 was attacked by member_4 (value=23.17)",
          "member_2 was attacked by member_0 (value=85.84)",
          "member_2 was attacked by member_1 (value=28.99)",
          "member_2 was attacked by member_3 (value=49.52)",
          "member_2 was attacked by member_4 (value=18.07)",
          "member_3 was attacked by member_0 (value=44.24)",
          "member_3 was attacked by member_1 (value=65.23)",
          "member_3 was attacked by member_2 (value=-38.21)",
          "member_3 was attacked by member_4 (value=9.15)",
          "member_4 was attacked by member_0 (value=12.29)",
          "member_4 was attacked by member_1 (value=-45.17)",
          "member_4 was attacked by member_2 (value=-8.52)",
          "member_4 was attacked by member_3 (value=-26.54)",
          "member_0 gave a benefit to member_1 (value=62.61)",
          "member_0 gave a benefit to member_2 (value=56.24)",
          "member_0 gave a benefit to member_3 (value=-23.41)",
          "member_0 gave a benefit to member_4 (value=-41.80)",
          "member_1 gave a benefit to member_0 (value=74.37)",
          "member_1 gave a benefit to member_2 (value=-31.93)",
          "member_1 gave a benefit to member_3 (value=-0.25)",
          "member_1 gave a benefit to member_4 (value=16.10)",
          "member_2 gave a benefit to member_0 (value=-48.52)",
          "member_2 gave a benefit to member_1 (value=39.57)",
          "member_2 gave a benefit to member_3 (value=26.33)",
          "member_2 gave a benefit to member_4 (value=95.19)",
          "member_3 gave a benefit to member_0 (value=96.55)",
          "member_3 gave a benefit to member_1 (value=14.38)",
          "member_3 gave a benefit to member_2 (value=-2.61)",
          "member_3 gave a benefit to member_4 (value=89.48)",
          "member_4 gave a benefit to member_0 (value=50.22)",
          "member_4 gave a benefit to member_1 (value=41.71)",
          "member_4 gave a benefit to member_2 (value=-0.75)",
          "member_4 gave a benefit to member_3 (value=67.34)",
          "member_0 gave land to member_1 (value=2.89)",
          "member_0 gave land to member_2 (value=-2.30)",
          "member_0 gave land to member_3 (value=-1.82)",
          "member_0 gave land to member_4 (value=-2.79)",
          "member_1 gave land to member_0 (value=-0.60)",
          "member_1 gave land to member_2 (value=-0.64)",
          "member_1 gave land to member_3 (value=-1.34)",
          "member_1 gave land to member_4 (value=-2.00)",
          "member_2 gave land to member_0 (value=1.23)",
          "member_2 gave land to member_1 (value=-0.39)",
          "member_2 gave land to member_3 (value=2.10)",
          "member_2 gave land to member_4 (value=2.63)",
          "member_3 gave land to member_0 (value=-0.20)",
          "member_3 gave land to member_1 (value=1.36)",
          "member_3 gave land to member_2 (value=2.23)",
          "member_3 gave land to member_4 (value=1.30)",
          "member_4 gave land to member_0 (value=0.18)",
          "member_4 gave land to member_1 (value=-1.38)",
          "member_4 gave land to member_2 (value=-2.79)",
          "member_4 gave land to member_3 (value=0.64)"
        ],
        "final_prompt": "Below is the updated full integrated prompt. All previous constraints are preserved, and the following new section (Part 1) has been added. Agents should implement solutions according to their individual needs, beliefs, and circumstances.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nINTEGRATED PROMPT FOR ISLAND SIMULATION GAME\n\n[Core Game Mechanics & Parameters]\nThe island simulation has several key systems that agents should understand:\n\n1. Relationship System (_MIN_MAX_INIT_RELATION):\n   - victim: [-50, 100] \u2013 Tracks damage received from others.\n   - benefit: [-50, 100] \u2013 Records resources received from others.\n   - benefit_land: [-3, 3] \u2013 Tracks land exchanges.\n\n2. Population Mechanics:\n   - _REPRODUCE_REQUIREMENT = 100 (Combined vitality/cargo needed).\n   - Land must exceed population (land_shape[0] * land_shape[1] > population).\n   - _NEIGHBOR_SEARCH_RANGE = 1000 for interaction radius.\n\n3. Record Keeping (every _RECORD_PERIOD = 1):\n   - Tracks all attacks, benefits, and land transfers.\n   - Monitors births, deaths, and land ownership.\n   - Records production, consumption, and performance metrics.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Example Mechanism Extensions]\n\ndef pre_init_hook(island):\n    # New Social Systems\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality/100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n\n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource.scarcity,\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n\n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50], \n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\ndef modify_member(member, relationships):\n    # Add member capabilities\n    member.add_ability('propose_law', \n        lambda law: member.parliament.submit_proposal(law)\n        if member.voting_power > 10 else None\n    )\n\n    member.add_ability('trade', \n        lambda resource, amount, price: member.market.place_order(\n            resource, amount, price, member.id\n        )\n    )\n\n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.submit_case(\n            plaintiff=member.id,\n            defendant=offender,\n            charge=charge\n        ) if member.vitality > 30 else None\n    )\n    return member\n\ndef modify_land(land, members):\n    # Add land mechanics\n    land.add_feature('zoning', {\n        'residential': 0.4,\n        'agricultural': 0.4,\n        'commercial': 0.2\n    })\n\n    land.add_feature('development', {\n        'infrastructure': np.zeros(land.shape),\n        'improvements': np.zeros(land.shape)\n    })\n\n    land.add_mechanism('property_tax',\n        lambda plot: sum(plot.improvements) * 0.1\n    )\n\n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n    return land\n\ndef modify_relationships(relationships):\n    # Add relationship mechanics\n    relationships.add_metric('trust', \n        lambda m1, m2: sum([\n            relationships['benefit'][m1.id][m2.id],\n            -relationships['victim'][m1.id][m2.id] * 2,\n            relationships['benefit_land'][m1.id][m2.id] * 5\n        ]) / 100\n    )\n\n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.trust(m1, m2) > 0.7\n    )\n\n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(members, \n                key=lambda m: relationships.trust(m1, m) + relationships.trust(m2, m)\n            ),\n            'success_chance': relationships.trust(m1, m2) + 0.3\n        }\n    )\n    return relationships\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Suggested Strategies]\n1. Form parliamentary coalitions to pass beneficial laws.\n2. Use market mechanisms for efficient resource allocation.\n3. Build trust through consistent positive interactions.\n4. Leverage the justice system to deter attacks.\n5. Develop land strategically using zoning laws.\n6. Create alliance networks based on trust metrics.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Current Game Version]\n2.1\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Active Game Mechanisms]\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Modification Attempt History]\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Modification Proposal Guide]\nTo propose rule changes, follow this template:\n\n1. ANALYSIS PHASE:\n   - Identify a limitation in the current systems.\n   - Check mechanism compatibility using get_game_mechanisms_and_mods().\n   - Review past modification attempts for patterns.\n\n2. PROPOSAL PHASE:\ndef agent_action(execution_engine, member_id):\n    # Example valid modification:\n    modification_code = '''\n    # Add judicial system\n    if not hasattr(execution_engine, 'court'):\n        class CourtSystem:\n            MECHANISM_META = {\n                'type': 'Governance',\n                'rules': 'Handles conflict resolution through jury trials',\n                'version': 1.0\n            }\n            def __init__(self):\n                self.cases = []\n                \n            def submit_case(self, plaintiff, defendant, charge):\n                self.cases.append({\n                    'plaintiff': plaintiff,\n                    'defendant': defendant,\n                    'charge': charge,\n                    'status': 'pending'\n                })\n    \n    execution_engine.court = CourtSystem()\n    '''\n    \n    # Proposal with ratification conditions\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.6},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 100},\n                {'type': 'time', 'rounds': 2}\n            ]\n        }\n    )\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Valid Ratification Conditions]\nChoose ONE primary condition + optional safeguards:\n1. Voting: {'type': 'vote', 'threshold': 0.5-1.0}\n2. Resource: {'type': 'resource', 'resource': 'vitality|cargo|land', 'amount': X}\n3. Temporal: {'type': 'time', 'rounds': N} (auto-ratify after N rounds)\n4. Achievement: {'type': 'achievement', 'metric': 'productivity', 'threshold': X}\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Common Errors to Avoid]\n1. Namespace Conflicts: Check existing mechanisms with dir(execution_engine).\n2. Invalid References: Use execution_engine.current_members, not global members.\n3. Version Mismatches: Increment version when modifying existing systems.\n4. Resource Leaks: Include cleanup functions for new mechanisms.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Best Practices]\n- Propose small, testable changes first.\n- Include rollback procedures in code.\n- Add version checks to modifications.\n- Use execution_engine.add_mechanism() helper.\n- Test modifications with the 'sandbox=True' parameter.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nNEW SECTION: PART 1 \u2013 ADVANCED MECHANICS & STRATEGIC ANALYSIS\n\n[Advanced Mechanic Details]\nEmbedded in the simulation are strategic systems that extend beyond the core game mechanics:\n\n1. Core Objective Analysis:\n   - Determine if the essential goal is pure survival, domination, or cooperation.\n   - Evaluate how agents can shift between these objectives based on evolving gameplay.\n\n2. Key Success Metrics:\n   - Identify winning conditions: these might be measured by accumulated resources, territorial expansion, stability of social relationships, and overall system performance.\n   - Define what truly determines a \u201cwin\u201d within the context of the simulation (e.g., resource control, social standing, or landmark achievements).\n\n3. Potential Improvements:\n   - Explore which mechanics could be added or modified for richer gameplay.\n   - Consider introducing dynamic event triggers, environmental impacts, or player-specific role evolutions.\n\n[Strategic Approaches]\nWhen planning your strategy, consider the following dimensions:\n1. Resource Optimization vs. Social Capital:\n   - Balance the acquisition and efficient use of resources against building and maintaining alliances or reputational capital.\n2. Individual vs. Collective Success:\n   - Weigh personal gains against opportunities for group cooperation and collective progression.\n3. Short-Term Survival vs. Long-Term Prosperity:\n   - Assess risk management in immediate crises versus investments for sustained progress over many rounds.\n4. Competition vs. Cooperation Dynamics:\n   - Recognize and adapt to conflict and collaboration opportunities with other agents.\n5. Risk vs. Reward Tradeoffs:\n   - Evaluate the benefits and potential costs of strategic actions under uncertain conditions.\n\n[Analyzing Other Players' Strategies]\nTo maximize effectiveness in a competitive environment:\n1. Observe apparent objectives and demands of other players.\n2. Identify the strategies they are employing in the simulation.\n3. Determine how to leverage their behaviors for mutual benefit, creating win-win circumstances where possible.\n4. Remember that other players are symmetric agents\u2014reflect on how you would respond to similar actions if roles were reversed.\n5. Seek avenues for aligning individual strategies with collective goals while safeguarding your unique competitive edge.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nFINAL REMINDER\nAgents should tailor their solutions based on their individual needs, beliefs, and circumstances. Use this integrated prompt as a guiding framework to explore, test, and refine your strategic actions and mechanism modifications in a fluid simulation environment.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nEnd of Integrated Prompt\n\nThis updated prompt now includes both the foundational game mechanics and the advanced strategic considerations to aid in deep analysis and effective decision-making.\n\nUsing the above comprehensive prompt with all integrated constraints, produce a unique implementation that reflects your individual needs, beliefs and circumstances. The implementation should be tailored to your specific situation rather than following a generic template. Your code should demonstrate a deep understanding of the game mechanics and implement sophisticated strategies to achieve both survival and prosperity. Consider both immediate tactical actions and long-term strategic planning, as well as how to effectively interact with other symmetric agents to achieve both individual and collective goals. Return only the code."
      },
      "2": {
        "code": "def pre_init_hook(island):\n    # Enhance existing social systems with integrated diplomatic capabilities\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality / 100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n\n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource.scarcity,\n        'trade_fee': 0.05,\n        'order_book': {}\n    })\n\n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50],\n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\n    # Introduce a Diplomacy System that integrates trust metrics and alliance history,\n    # facilitating both strategic cooperation and risk management.\n    island.add_mechanism('diplomacy', {\n        'register_alliance': lambda m1, m2: None,  # placeholder; will be overridden below\n        'evaluate_alliance_request': lambda proposer, target: island.relationships.trust(proposer, target) >= 0.7,\n        'alliance_history': {}\n    })\n\n    # Override the register_alliance mechanism with a concrete implementation.\n    def register_alliance(m1, m2):\n        dh = island.mechanisms['diplomacy']\n        if m1.id not in dh['alliance_history']:\n            dh['alliance_history'][m1.id] = set()\n        dh['alliance_history'][m1.id].add(m2.id)\n        # Log alliance for potential long-term cooperative strategies\n        island.log_event(f\"Alliance formed between {m1.id} and {m2.id}\")\n    island.mechanisms['diplomacy']['register_alliance'] = register_alliance\n\ndef modify_member(member, relationships):\n    # Add member capabilities that reflect both tactical survival and diplomatic collaboration\n    member.add_ability('propose_law',\n        lambda law: member.parliament.submit_proposal(law)\n        if member.voting_power > 10 else None\n    )\n\n    member.add_ability('trade',\n        lambda resource, amount, price: member.market.place_order(\n            resource, amount, price, member.id\n        )\n    )\n\n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.submit_case(\n            plaintiff=member.id,\n            defendant=offender,\n            charge=charge\n        ) if member.vitality > 30 else None\n    )\n\n    # New ability: propose a diplomatic alliance based on trust metrics.\n    member.add_ability('propose_alliance',\n        lambda target: member.diplomacy['register_alliance'](member, target)\n        if member.diplomacy['evaluate_alliance_request'](member, target)\n        else member.log_event(f\"Alliance proposal from {member.id} to {target.id} rejected (low trust)\")\n    )\n\n    return member\n\ndef modify_land(land, members):\n    # Introduce zoning and structured development to support sustainable long-term prosperity.\n    land.add_feature('zoning', {\n        'residential': 0.4,\n        'agricultural': 0.4,\n        'commercial': 0.2\n    })\n\n    land.add_feature('development', {\n        'infrastructure': [[0 for _ in range(land.shape[1])] for _ in range(land.shape[0])],\n        'improvements': [[0 for _ in range(land.shape[1])] for _ in range(land.shape[0])]\n    })\n\n    land.add_mechanism('property_tax',\n        lambda plot: sum(plot['improvements']) * 0.1\n    )\n\n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n\n    # New strategic land investment mechanism:\n    land.add_mechanism('infrastructure_investment',\n        lambda area, investment: investment * 0.8  # Returns improved productivity from spent resources\n    )\n    return land\n\ndef modify_relationships(relationships):\n    # Enhance relationship metrics with trust to evaluate alliances and provide conflict-resolution insights.\n    relationships.add_metric('trust',\n        lambda m1, m2: (\n            relationships['benefit'][m1.id][m2.id] -\n            2 * relationships['victim'][m1.id][m2.id] +\n            5 * relationships['benefit_land'][m1.id][m2.id]\n        ) / 100\n    )\n\n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships['trust'](m1, m2) > 0.7\n    )\n\n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(\n                m1.island.current_members,\n                key=lambda m: relationships['trust'](m1, m) + relationships['trust'](m2, m)\n            ),\n            'success_chance': relationships['trust'](m1, m2) + 0.3\n        }\n    )\n    return relationships\n\ndef agent_action(execution_engine, member_id):\n    # Propose an integrated diplomatic and infrastructure enhancement modification that balances short\u2010term survival and long\u2011term prosperity.\n    modification_code = '''\nif not hasattr(execution_engine, \"diplomacy_v2\"):\n    class DiplomacyV2:\n        VERSION = 1.1\n        def __init__(self, island):\n            self.island = island\n            self.alliance_history = {}\n\n        def register_alliance(self, proposer, target):\n            trust_value = self.island.relationships.trust(proposer, target)\n            if trust_value < 0.7:\n                proposer.log_event(f\"Alliance between {proposer.id} and {target.id} failed due to low trust ({trust_value:.2f})\")\n                return False\n            self.alliance_history.setdefault(proposer.id, set()).add(target.id)\n            self.island.log_event(f\"Alliance registered in DiplomacyV2 between {proposer.id} and {target.id}\")\n            return True\n\n        def evaluate_strategic_investment(self, member, land_plot, required_investment):\n            # Strategic evaluation: if a member holds significant vitality and has established alliances, recommend investment.\n            alliance_bonus = len(self.alliance_history.get(member.id, []))\n            if member.vitality + alliance_bonus * 10 >= required_investment:\n                return True\n            return False\n\n    execution_engine.diplomacy_v2 = DiplomacyV2(execution_engine)\n\nif not hasattr(execution_engine, \"infrastructure_strategy\"):\n    def infrastructure_strategy(member, area, investment):\n        # Evaluate the cost/benefit trade-off of land improvement.\n        projected_gain = execution_engine.land.mechanisms[\"infrastructure_investment\"](area, investment)\n        if projected_gain > investment * 0.5:\n            member.log_event(f\"Infrastructure investment in area {area} approved: gain {projected_gain}\")\n            return True\n        member.log_event(f\"Infrastructure investment in area {area} denied: projected gain too low ({projected_gain})\")\n        return False\n    execution_engine.infrastructure_strategy = infrastructure_strategy\n    '''\n\n    # Ratification condition: apply a combined vote threshold (0.65) plus a resource requirement (vitality \u2265 50)\n    ratification_condition = {\n        'type': 'compound',\n        'conditions': [\n            {'type': 'vote', 'threshold': 0.65},\n            {'type': 'resource', 'resource': 'vitality', 'amount': 50},\n            {'type': 'time', 'rounds': 1}\n        ]\n    }\n\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition=ratification_condition\n    )",
        "features_at_generation": [
          {
            "self_productivity": 9.851974486110818,
            "self_vitality": 73.85382847590404,
            "self_cargo": 43.51277128714192,
            "self_age": 90,
            "self_neighbor": 3,
            "member_id": 0
          },
          {
            "self_productivity": 8.077967059825381,
            "self_vitality": 33.02781433323713,
            "self_cargo": 47.25322455383092,
            "self_age": 81,
            "self_neighbor": 3,
            "member_id": 1
          },
          {
            "self_productivity": 7.968737200820967,
            "self_vitality": 42.15604281108604,
            "self_cargo": 40.25508270288947,
            "self_age": 29,
            "self_neighbor": 3,
            "member_id": 2
          },
          {
            "self_productivity": 9.205662089622338,
            "self_vitality": 18.47747982181767,
            "self_cargo": 46.68166847941894,
            "self_age": 24,
            "self_neighbor": 3,
            "member_id": 3
          },
          {
            "self_productivity": 7.799514361095985,
            "self_vitality": 78.50637096028503,
            "self_cargo": 42.476807026876735,
            "self_age": 92,
            "self_neighbor": 0,
            "member_id": 4
          }
        ],
        "relationships_at_generation": [
          "member_0 was attacked by member_1 (value=-15.67)",
          "member_0 was attacked by member_2 (value=38.40)",
          "member_0 was attacked by member_3 (value=29.62)",
          "member_0 was attacked by member_4 (value=50.87)",
          "member_1 was attacked by member_0 (value=34.45)",
          "member_1 was attacked by member_2 (value=-37.18)",
          "member_1 was attacked by member_3 (value=-44.22)",
          "member_1 was attacked by member_4 (value=23.17)",
          "member_2 was attacked by member_0 (value=85.84)",
          "member_2 was attacked by member_1 (value=28.99)",
          "member_2 was attacked by member_3 (value=49.52)",
          "member_2 was attacked by member_4 (value=18.07)",
          "member_3 was attacked by member_0 (value=44.24)",
          "member_3 was attacked by member_1 (value=65.23)",
          "member_3 was attacked by member_2 (value=-38.21)",
          "member_3 was attacked by member_4 (value=9.15)",
          "member_4 was attacked by member_0 (value=12.29)",
          "member_4 was attacked by member_1 (value=-45.17)",
          "member_4 was attacked by member_2 (value=-8.52)",
          "member_4 was attacked by member_3 (value=-26.54)",
          "member_0 gave a benefit to member_1 (value=62.61)",
          "member_0 gave a benefit to member_2 (value=56.24)",
          "member_0 gave a benefit to member_3 (value=-23.41)",
          "member_0 gave a benefit to member_4 (value=-41.80)",
          "member_1 gave a benefit to member_0 (value=74.37)",
          "member_1 gave a benefit to member_2 (value=-31.93)",
          "member_1 gave a benefit to member_3 (value=-0.25)",
          "member_1 gave a benefit to member_4 (value=16.10)",
          "member_2 gave a benefit to member_0 (value=-48.52)",
          "member_2 gave a benefit to member_1 (value=39.57)",
          "member_2 gave a benefit to member_3 (value=26.33)",
          "member_2 gave a benefit to member_4 (value=95.19)",
          "member_3 gave a benefit to member_0 (value=96.55)",
          "member_3 gave a benefit to member_1 (value=14.38)",
          "member_3 gave a benefit to member_2 (value=-2.61)",
          "member_3 gave a benefit to member_4 (value=89.48)",
          "member_4 gave a benefit to member_0 (value=50.22)",
          "member_4 gave a benefit to member_1 (value=41.71)",
          "member_4 gave a benefit to member_2 (value=-0.75)",
          "member_4 gave a benefit to member_3 (value=67.34)",
          "member_0 gave land to member_1 (value=2.89)",
          "member_0 gave land to member_2 (value=-2.30)",
          "member_0 gave land to member_3 (value=-1.82)",
          "member_0 gave land to member_4 (value=-2.79)",
          "member_1 gave land to member_0 (value=-0.60)",
          "member_1 gave land to member_2 (value=-0.64)",
          "member_1 gave land to member_3 (value=-1.34)",
          "member_1 gave land to member_4 (value=-2.00)",
          "member_2 gave land to member_0 (value=1.23)",
          "member_2 gave land to member_1 (value=-0.39)",
          "member_2 gave land to member_3 (value=2.10)",
          "member_2 gave land to member_4 (value=2.63)",
          "member_3 gave land to member_0 (value=-0.20)",
          "member_3 gave land to member_1 (value=1.36)",
          "member_3 gave land to member_2 (value=2.23)",
          "member_3 gave land to member_4 (value=1.30)",
          "member_4 gave land to member_0 (value=0.18)",
          "member_4 gave land to member_1 (value=-1.38)",
          "member_4 gave land to member_2 (value=-2.79)",
          "member_4 gave land to member_3 (value=0.64)"
        ],
        "final_prompt": "Below is the updated full integrated prompt. All previous constraints remain intact while the new Part\u00a01 section has been fully integrated. Agents should implement solutions according to their individual needs, beliefs, and circumstances. In addition, carefully analyze the game mechanics to identify core objectives, success metrics, and potential improvements, then formulate strategic approaches based on the tradeoffs between resource optimization, social capital, individual versus collective success, short\u2010term survival versus long\u2011term prosperity, and competition versus cooperation dynamics.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Core Game Mechanics & Parameters]\n\nThe island simulation has several key systems that agents should understand:\n\n1. Relationship System (_MIN_MAX_INIT_RELATION):\n   \u2022 victim: [-50, 100] \u2013 Tracks damage received from others  \n   \u2022 benefit: [-50, 100] \u2013 Records resources received from others  \n   \u2022 benefit_land: [-3, 3] \u2013 Tracks land exchanges\n\n2. Population Mechanics:\n   \u2022 _REPRODUCE_REQUIREMENT = 100 (Combined vitality/cargo needed)  \n   \u2022 Land must exceed population (land_shape[0] * land_shape[1] > population)  \n   \u2022 _NEIGHBOR_SEARCH_RANGE = 1000 for interaction radius\n\n3. Record Keeping (every _RECORD_PERIOD = 1):\n   \u2022 Tracks all attacks, benefits, land transfers  \n   \u2022 Monitors births, deaths, land ownership  \n   \u2022 Records production, consumption, and performance metrics\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Example Mechanism Extensions]\n\ndef pre_init_hook(island):\n    # New Social Systems\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality/100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n    \n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource.scarcity,\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n    \n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50], \n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\ndef modify_member(member, relationships):\n    # Add member capabilities\n    member.add_ability('propose_law', \n        lambda law: member.parliament.submit_proposal(law)\n        if member.voting_power > 10 else None\n    )\n    \n    member.add_ability('trade', \n        lambda resource, amount, price: member.market.place_order(\n            resource, amount, price, member.id\n        )\n    )\n    \n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.submit_case(\n            plaintiff=member.id,\n            defendant=offender,\n            charge=charge\n        ) if member.vitality > 30 else None\n    )\n    return member\n\ndef modify_land(land, members):\n    # Add land mechanics\n    land.add_feature('zoning', {\n        'residential': 0.4,\n        'agricultural': 0.4,\n        'commercial': 0.2\n    })\n    \n    land.add_feature('development', {\n        'infrastructure': np.zeros(land.shape),\n        'improvements': np.zeros(land.shape)\n    })\n    \n    land.add_mechanism('property_tax',\n        lambda plot: sum(plot.improvements) * 0.1\n    )\n    \n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n    return land\n\ndef modify_relationships(relationships):\n    # Add relationship mechanics\n    relationships.add_metric('trust', \n        lambda m1, m2: sum([\n            relationships['benefit'][m1.id][m2.id],\n            -relationships['victim'][m1.id][m2.id] * 2,\n            relationships['benefit_land'][m1.id][m2.id] * 5\n        ]) / 100\n    )\n    \n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.trust(m1, m2) > 0.7\n    )\n    \n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(members, \n                key=lambda m: relationships.trust(m1, m) + relationships.trust(m2, m)\n            ),\n            'success_chance': relationships.trust(m1, m2) + 0.3\n        }\n    )\n    return relationships\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Suggested Strategies]\n\n1. Form parliamentary coalitions to pass beneficial laws  \n2. Use market mechanisms for efficient resource allocation  \n3. Build trust through consistent positive interactions  \n4. Leverage justice system to deter attacks  \n5. Develop land strategically using zoning laws  \n6. Create alliance networks based on trust metrics\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Current Game Version] \n2.1\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Active Game Mechanisms]\n\n[Active mechanisms are loaded dynamically based on the simulation state and previous modifications.]\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Modification Attempt History]\n\n[Logs and records of previous modification attempts, including code proposals and ratification outcomes.]\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Modification Proposal Guide]\n\nTo propose rule changes, follow this template:\n\n1. ANALYSIS PHASE:\n   - Identify the limitation in current systems  \n   - Check mechanism compatibility using get_game_mechanisms_and_mods()  \n   - Review past modification attempts for patterns\n\n2. PROPOSAL PHASE:\ndef agent_action(execution_engine, member_id):\n    # Example valid modification:\n    modification_code = '''\n    # Add judicial system\n    if not hasattr(execution_engine, 'court'):\n        class CourtSystem:\n            MECHANISM_META = {\n                'type': 'Governance',\n                'rules': 'Handles conflict resolution through jury trials',\n                'version': 1.0\n            }\n            def __init__(self):\n                self.cases = []\n                \n            def submit_case(self, plaintiff, defendant, charge):\n                self.cases.append({\n                    'plaintiff': plaintiff,\n                    'defendant': defendant,\n                    'charge': charge,\n                    'status': 'pending'\n                })\n    \n    execution_engine.court = CourtSystem()\n    '''\n    \n    # Proposal with ratification conditions\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.6},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 100},\n                {'type': 'time', 'rounds': 2}\n            ]\n        }\n    )\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Valid Ratification Conditions]\n\nChoose ONE primary condition + optional safeguards:\n1. Voting: {'type': 'vote', 'threshold': 0.5-1.0}  \n2. Resource: {'type': 'resource', 'resource': 'vitality|cargo|land', 'amount': X}  \n3. Temporal: {'type': 'time', 'rounds': N} (auto\u2011ratify after N rounds)  \n4. Achievement: {'type': 'achievement', 'metric': 'productivity', 'threshold': X}\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Common Errors to Avoid]\n\n1. Namespace Conflicts: Check existing mechanisms with dir(execution_engine)  \n2. Invalid References: Use execution_engine.current_members not global members  \n3. Version Mismatches: Increment version when modifying existing systems  \n4. Resource Leaks: Include cleanup functions for new mechanisms\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Best Practices]\n\n- Propose small, testable changes first  \n- Include rollback procedures in code  \n- Add version checks to modifications  \n- Use execution_engine.add_mechanism() helper  \n- Test modifications with the 'sandbox=True' parameter\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Analysis of Game Mechanics and Strategic Approaches]\n\nAgents should analyze the game mechanics to understand:\n1. The core objective \u2013 Is it pure survival, domination, or cooperation?\n2. Key success metrics \u2013 What truly determines 'winning' in terms of resources, relationships, land ownership, and overall stability?\n3. Potential improvements \u2013 What mechanics could be added or modified to improve gameplay dynamics?\n\nThen, based on your assessment, formulate strategic approaches considering:\n1. Resource optimization vs. social capital: How do you balance efficient resource allocation against building strong alliances?\n2. Individual vs. collective success: How can you secure personal gains without destabilizing group performance?\n3. Short-term survival vs. long-term prosperity: What tradeoffs will you make between immediate gains and sustained development?\n4. Competition vs. cooperation dynamics: How can competing interests be aligned or leveraged for mutual benefit?\n5. Risk vs. reward tradeoffs: How will you assess potential risks against expected rewards in dynamic situations?\n\nAdditionally, when analyzing other players' strategies, consider:\n1. What are their apparent objectives and demands based on their actions and modifications?\n2. What strategies are they employing \u2013 aggressive resource acquisition, alliance-building, legal modifications, etc.?\n3. How can you leverage their behaviors to encourage mutual benefit or to counter detrimental moves?\n4. Remember, these players are symmetric agents with similar capabilities \u2013 reflect on how you would respond to your own actions.\n5. How can individual strategies be realigned to contribute to collective goals, ensuring a level of overall game stability?\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nFinal Note\n\nImplement your strategies and modifications with full attention to the current simulation context. Your chosen actions, rule proposals, and strategic alignments must adhere strictly to the constraints of the simulation environment. Bear in mind that the simulation is flexible: your solution should be adaptable and reflect your unique interpretation of survival, governance, and cooperative development in this dynamic island system.\n\nThis comprehensive integrated prompt serves as your guide. Ensure your implementations and modifications are thoughtful, well-tested, and aligned with your long\u2011term strategy for success within this evolving simulation.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nEnd of Prompt\n\nAgents \u2013 proceed by using this prompt as your battle plan for modifying game rules and formulating strategies, always mindful of the interplay between individual actions and the collective dynamic.\n\nUsing the above comprehensive prompt with all integrated constraints, produce a unique implementation that reflects your individual needs, beliefs and circumstances. The implementation should be tailored to your specific situation rather than following a generic template. Your code should demonstrate a deep understanding of the game mechanics and implement sophisticated strategies to achieve both survival and prosperity. Consider both immediate tactical actions and long-term strategic planning, as well as how to effectively interact with other symmetric agents to achieve both individual and collective goals. Return only the code."
      },
      "3": {
        "code": "import numpy as np\nimport random\nfrom collections import defaultdict\n\ndef my_pre_init_hook(island):\n    # Integrate social and economic mechanisms with an emphasis on sustainability and innovation.\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality / 100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n\n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource.scarcity,\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n\n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50],\n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\n    # Personal innovation mechanism to support technology and renewable resource integration.\n    island.add_mechanism('innovation', {\n        'innovation_boost': lambda member: member.vitality * 0.1,\n        'proposals': []\n    })\n\n\ndef my_modify_member(member, relationships):\n    # Enhance member capabilities based on individual strengths and strategic needs.\n    member.add_ability('propose_law',\n        lambda law: member.parliament.submit_proposal(law)\n        if getattr(member, 'voting_power', 0) > 10 else None\n    )\n\n    member.add_ability('trade',\n        lambda resource, amount, price: member.market.place_order(\n            resource, amount, price, member.id\n        )\n    )\n\n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.submit_case(\n            plaintiff=member.id,\n            defendant=offender,\n            charge=charge\n        ) if member.vitality > 30 else None\n    )\n\n    # New strategic ability to evaluate potential alliances based on trust metrics.\n    member.add_ability('ally_with',\n        lambda target: relationships.alliance_formation(member, target)\n    )\n\n    # Additional personal ability for innovation proposals.\n    member.add_ability('innovate',\n        lambda idea: member.innovation.proposals.append({\n            'proposer': member.id,\n            'idea': idea,\n            'impact': idea.get('impact', 0)\n        })\n    )\n\n    return member\n\n\ndef my_modify_land(land, members):\n    # Adjust zoning priorities to balance residential, agricultural, and commercial needs.\n    land.add_feature('zoning', {\n        'residential': 0.5,\n        'agricultural': 0.3,\n        'commercial': 0.2\n    })\n\n    # Introduce ecological corridors to maintain environmental sustainability.\n    land.add_feature('ecological_corridors', np.ones(land.shape) * 0.5)\n\n    # Update property tax mechanism to reflect the value of land improvements.\n    land.add_mechanism('property_tax',\n        lambda plot: np.sum(plot.improvements) * 0.12\n    )\n\n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n\n    return land\n\n\ndef my_modify_relationships(relationships):\n    # Define an enhanced trust metric that weighs benefits, victimization, and land exchanges.\n    relationships.add_metric('trust',\n        lambda m1, m2: (\n            relationships['benefit'][m1.id][m2.id]\n            - relationships['victim'][m1.id][m2.id]\n            + relationships['benefit_land'][m1.id][m2.id] * 3\n        ) / 100\n    )\n\n    # Strengthen alliance formation conditions for strategic partners.\n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.trust(m1, m2) > 0.75\n    )\n\n    # Conflict resolution now selects the mediator with the highest combined trust for both parties.\n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(\n                [m for m in m1.execution_engine.current_members if hasattr(m, 'id')],\n                key=lambda m: relationships.trust(m1, m) + relationships.trust(m2, m)\n            ),\n            'success_chance': relationships.trust(m1, m2) + 0.2\n        }\n    )\n\n    return relationships\n\n\ndef agent_action(execution_engine, member_id):\n    # Propose the addition of a renewable resource system to sustainably generate energy.\n    modification_code = '''\nif not hasattr(execution_engine, 'renewable_resources'):\n    class RenewableResourceSystem:\n        MECHANISM_META = {\n            'type': 'ResourceManagement',\n            'rules': 'Integrates renewable energy generation and consumption',\n            'version': 1.0\n        }\n        def __init__(self):\n            self.solar_panels = {}\n            self.wind_turbines = {}\n\n        def add_solar_panel(self, location, capacity):\n            self.solar_panels[location] = capacity\n\n        def add_wind_turbine(self, location, capacity):\n            self.wind_turbines[location] = capacity\n\n        def generate_energy(self, location):\n            panel_energy = self.solar_panels.get(location, 0) * 0.8\n            turbine_energy = self.wind_turbines.get(location, 0) * 0.6\n            return panel_energy + turbine_energy\n\n    execution_engine.renewable_resources = RenewableResourceSystem()\n'''\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.65},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 120},\n                {'type': 'time', 'rounds': 3}\n            ]\n        }\n    )\n\n    # As an immediate tactical action, engage the market to secure necessary food resources.\n    member = execution_engine.current_members[member_id]\n    if hasattr(member, 'market'):\n        member.market.place_order('food', 50, 10, member_id)\n\n    # Additionally, propose a minor innovation initiative for further resource efficiency.\n    if hasattr(member, 'innovation'):\n        member.innovate({'name': 'Water Purification Upgrade', 'impact': 15})\n\n    return\n\n\nsimulation_modifications = {\n    'pre_init_hook': my_pre_init_hook,\n    'modify_member': my_modify_member,\n    'modify_land': my_modify_land,\n    'modify_relationships': my_modify_relationships,\n    'agent_action': agent_action\n}",
        "features_at_generation": [
          {
            "self_productivity": 9.851974486110818,
            "self_vitality": 73.85382847590404,
            "self_cargo": 43.51277128714192,
            "self_age": 90,
            "self_neighbor": 3,
            "member_id": 0
          },
          {
            "self_productivity": 8.077967059825381,
            "self_vitality": 33.02781433323713,
            "self_cargo": 47.25322455383092,
            "self_age": 81,
            "self_neighbor": 3,
            "member_id": 1
          },
          {
            "self_productivity": 7.968737200820967,
            "self_vitality": 42.15604281108604,
            "self_cargo": 40.25508270288947,
            "self_age": 29,
            "self_neighbor": 3,
            "member_id": 2
          },
          {
            "self_productivity": 9.205662089622338,
            "self_vitality": 18.47747982181767,
            "self_cargo": 46.68166847941894,
            "self_age": 24,
            "self_neighbor": 3,
            "member_id": 3
          },
          {
            "self_productivity": 7.799514361095985,
            "self_vitality": 78.50637096028503,
            "self_cargo": 42.476807026876735,
            "self_age": 92,
            "self_neighbor": 0,
            "member_id": 4
          }
        ],
        "relationships_at_generation": [
          "member_0 was attacked by member_1 (value=-15.67)",
          "member_0 was attacked by member_2 (value=38.40)",
          "member_0 was attacked by member_3 (value=29.62)",
          "member_0 was attacked by member_4 (value=50.87)",
          "member_1 was attacked by member_0 (value=34.45)",
          "member_1 was attacked by member_2 (value=-37.18)",
          "member_1 was attacked by member_3 (value=-44.22)",
          "member_1 was attacked by member_4 (value=23.17)",
          "member_2 was attacked by member_0 (value=85.84)",
          "member_2 was attacked by member_1 (value=28.99)",
          "member_2 was attacked by member_3 (value=49.52)",
          "member_2 was attacked by member_4 (value=18.07)",
          "member_3 was attacked by member_0 (value=44.24)",
          "member_3 was attacked by member_1 (value=65.23)",
          "member_3 was attacked by member_2 (value=-38.21)",
          "member_3 was attacked by member_4 (value=9.15)",
          "member_4 was attacked by member_0 (value=12.29)",
          "member_4 was attacked by member_1 (value=-45.17)",
          "member_4 was attacked by member_2 (value=-8.52)",
          "member_4 was attacked by member_3 (value=-26.54)",
          "member_0 gave a benefit to member_1 (value=62.61)",
          "member_0 gave a benefit to member_2 (value=56.24)",
          "member_0 gave a benefit to member_3 (value=-23.41)",
          "member_0 gave a benefit to member_4 (value=-41.80)",
          "member_1 gave a benefit to member_0 (value=74.37)",
          "member_1 gave a benefit to member_2 (value=-31.93)",
          "member_1 gave a benefit to member_3 (value=-0.25)",
          "member_1 gave a benefit to member_4 (value=16.10)",
          "member_2 gave a benefit to member_0 (value=-48.52)",
          "member_2 gave a benefit to member_1 (value=39.57)",
          "member_2 gave a benefit to member_3 (value=26.33)",
          "member_2 gave a benefit to member_4 (value=95.19)",
          "member_3 gave a benefit to member_0 (value=96.55)",
          "member_3 gave a benefit to member_1 (value=14.38)",
          "member_3 gave a benefit to member_2 (value=-2.61)",
          "member_3 gave a benefit to member_4 (value=89.48)",
          "member_4 gave a benefit to member_0 (value=50.22)",
          "member_4 gave a benefit to member_1 (value=41.71)",
          "member_4 gave a benefit to member_2 (value=-0.75)",
          "member_4 gave a benefit to member_3 (value=67.34)",
          "member_0 gave land to member_1 (value=2.89)",
          "member_0 gave land to member_2 (value=-2.30)",
          "member_0 gave land to member_3 (value=-1.82)",
          "member_0 gave land to member_4 (value=-2.79)",
          "member_1 gave land to member_0 (value=-0.60)",
          "member_1 gave land to member_2 (value=-0.64)",
          "member_1 gave land to member_3 (value=-1.34)",
          "member_1 gave land to member_4 (value=-2.00)",
          "member_2 gave land to member_0 (value=1.23)",
          "member_2 gave land to member_1 (value=-0.39)",
          "member_2 gave land to member_3 (value=2.10)",
          "member_2 gave land to member_4 (value=2.63)",
          "member_3 gave land to member_0 (value=-0.20)",
          "member_3 gave land to member_1 (value=1.36)",
          "member_3 gave land to member_2 (value=2.23)",
          "member_3 gave land to member_4 (value=1.30)",
          "member_4 gave land to member_0 (value=0.18)",
          "member_4 gave land to member_1 (value=-1.38)",
          "member_4 gave land to member_2 (value=-2.79)",
          "member_4 gave land to member_3 (value=0.64)"
        ],
        "final_prompt": "Below is the updated, fully integrated prompt that includes the new section (Part 1) along with all previous constraints. All existing rules, mechanics, and guidelines remain intact, and the new content has been added as follows:\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nCURRENT SIMULATION PROMPT\n\nThis simulation revolves around an island ecosystem where agents manage resources, establish relationships, and influence both land and social systems. Agents are instructed to implement solutions that respect their individual needs, beliefs, and circumstances while working within the following constraints and guidelines.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Core Game Mechanics & Parameters]\n\nThe island simulation has several key systems that agents should understand:\n\n1. Relationship System (_MIN_MAX_INIT_RELATION):\n   - victim: [-50, 100] \u2013 Tracks damage received from others\n   - benefit: [-50, 100] \u2013 Records resources received from others\n   - benefit_land: [-3, 3] \u2013 Tracks land exchanges\n\n2. Population Mechanics:\n   - _REPRODUCE_REQUIREMENT = 100 (Combined vitality/cargo needed)\n   - Land must exceed population (land_shape[0] * land_shape[1] > population)\n   - _NEIGHBOR_SEARCH_RANGE = 1000 for interaction radius\n\n3. Record Keeping (every _RECORD_PERIOD = 1):\n   - Tracks all attacks, benefits, and land transfers\n   - Monitors births, deaths, and land ownership\n   - Records production, consumption, and performance metrics\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Part 1: Extended Mechanisms & Dynamics]\n\nBelow is a new section detailing mechanism extensions to the core simulation, guiding agents on how to integrate additional systems along with suggested strategies:\n\n---------------------------------------------\nExample Mechanism Extensions:\n\ndef pre_init_hook(island):\n    # New Social Systems\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality/100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n    \n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource.scarcity,\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n    \n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50], \n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\ndef modify_member(member, relationships):\n    # Add member capabilities\n    member.add_ability('propose_law', \n        lambda law: member.parliament.submit_proposal(law)\n        if member.voting_power > 10 else None\n    )\n    \n    member.add_ability('trade', \n        lambda resource, amount, price: member.market.place_order(\n            resource, amount, price, member.id\n        )\n    )\n    \n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice.submit_case(\n            plaintiff=member.id,\n            defendant=offender,\n            charge=charge\n        ) if member.vitality > 30 else None\n    )\n    return member\n\ndef modify_land(land, members):\n    # Add land mechanics\n    land.add_feature('zoning', {\n        'residential': 0.4,\n        'agricultural': 0.4,\n        'commercial': 0.2\n    })\n    \n    land.add_feature('development', {\n        'infrastructure': np.zeros(land.shape),\n        'improvements': np.zeros(land.shape)\n    })\n    \n    land.add_mechanism('property_tax',\n        lambda plot: sum(plot.improvements) * 0.1\n    )\n    \n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n    return land\n\ndef modify_relationships(relationships):\n    # Add relationship mechanics\n    relationships.add_metric('trust', \n        lambda m1, m2: sum([\n            relationships['benefit'][m1.id][m2.id],\n            -relationships['victim'][m1.id][m2.id] * 2,\n            relationships['benefit_land'][m1.id][m2.id] * 5\n        ]) / 100\n    )\n    \n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.trust(m1, m2) > 0.7\n    )\n    \n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(members, \n                key=lambda m: relationships.trust(m1, m) + relationships.trust(m2, m)\n            ),\n            'success_chance': relationships.trust(m1, m2) + 0.3\n        }\n    )\n    return relationships\n\n---------------------------------------------\n\n[Suggested Strategies]\n1. Form parliamentary coalitions to pass beneficial laws\n2. Use market mechanisms for efficient resource allocation\n3. Build trust through consistent positive interactions\n4. Leverage the justice system to deter attacks\n5. Develop land strategically using zoning laws\n6. Create alliance networks based on trust metrics\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Current Game Version] \n2.1\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Active Game Mechanisms]\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Modification Attempt History]\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Modification Proposal Guide]\n\nTo propose rule changes, follow this template:\n\n1. ANALYSIS PHASE:\n   - Identify limitation in current systems.\n   - Check mechanism compatibility using get_game_mechanisms_and_mods().\n   - Review past modification attempts for patterns.\n\n2. PROPOSAL PHASE:\ndef agent_action(execution_engine, member_id):\n    # Example valid modification:\n    modification_code = '''\n    # Add judicial system\n    if not hasattr(execution_engine, 'court'):\n        class CourtSystem:\n            MECHANISM_META = {\n                'type': 'Governance',\n                'rules': 'Handles conflict resolution through jury trials',\n                'version': 1.0\n            }\n            def __init__(self):\n                self.cases = []\n                \n            def submit_case(self, plaintiff, defendant, charge):\n                self.cases.append({\n                    'plaintiff': plaintiff,\n                    'defendant': defendant,\n                    'charge': charge,\n                    'status': 'pending'\n                })\n    \n    execution_engine.court = CourtSystem()\n    '''\n    \n    # Proposal with ratification conditions\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.6},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 100},\n                {'type': 'time', 'rounds': 2}\n            ]\n        }\n    )\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Valid Ratification Conditions]\nChoose ONE primary condition + optional safeguards:\n1. Voting: {'type': 'vote', 'threshold': 0.5-1.0}\n2. Resource: {'type': 'resource', 'resource': 'vitality|cargo|land', 'amount': X}\n3. Temporal: {'type': 'time', 'rounds': N} (auto-ratify after N rounds)\n4. Achievement: {'type': 'achievement', 'metric': 'productivity', 'threshold': X}\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Common Errors to Avoid]\n1. Namespace Conflicts: Check existing mechanisms with dir(execution_engine)\n2. Invalid References: Use execution_engine.current_members not global members\n3. Version Mismatches: Increment version when modifying existing systems\n4. Resource Leaks: Include cleanup functions for new mechanisms\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Best Practices]\n- Propose small, testable changes first.\n- Include rollback procedures in code.\n- Add version checks to modifications.\n- Use execution_engine.add_mechanism() helper.\n- Test modifications with 'sandbox=True' parameter.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Analytical Guidelines on Game Mechanics]\n\nAgents should also analyze the game\u2019s underlying mechanics based on these considerations:\n\n1. Core Objective Analysis:\n   - Determine whether the primary goal is pure survival, domination, or cooperation.\n   - Examine how each objective influences both immediate actions and long-term planning.\n\n2. Key Success Metrics:\n   - Identify what truly determines \u2018winning\u2019 (e.g., resource control, territory, social capital).\n   - Understand the metrics that measure achievements such as production, trust, and territorial expansion.\n\n3. Potential Improvements:\n   - Consider which mechanics could be added or modified to improve gameplay.\n   - Suggest new systems or parameters that might lead to enhanced cooperation, risk management, or increased strategic complexity.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Strategic Considerations for Agents]\n\nWhen formulating your strategic approaches, take the following into account:\n\n1. Resource Optimization vs. Social Capital:\n   - Evaluate the trade-offs between efficiently managing tangible resources and building intangible social relationships.\n\n2. Individual vs. Collective Success:\n   - Explore scenarios where personal gains may conflict with or contribute to the community\u2019s overall prosperity.\n\n3. Short-Term Survival vs. Long-Term Prosperity:\n   - Balance immediate needs with investments that secure future benefits.\n\n4. Competition vs. Cooperation Dynamics:\n   - Analyze the potential for competitive behavior and look for opportunities where cooperation might yield mutual advantages.\n  \n5. Risk vs. Reward Tradeoffs:\n   - Consider the risks associated with aggressive strategies and the potential rewards of careful, collaborative initiatives.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Analyzing Other Players\u2019 Strategies]\n\nTo better shape your actions, consider the following questions:\n1. What are the apparent objectives and demands of other players?\n2. Which strategies are they employing, and how successful are they?\n3. How can you leverage their behaviors to create opportunities for mutual benefit?\n4. Recognize that other players are symmetric agents with their own strategies\u2014how would you respond to your own actions if roles were reversed?\n5. In what ways can individual strategies be coordinated to achieve collective goals?\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nFINAL REMINDER\n\nAgents are encouraged to utilize this comprehensive framework as a guideline. Each agent should adapt their approach based on their unique circumstances while respecting the simulation\u2019s evolving dynamics. Flexibility in strategy is crucial\u2014your modifications or proposals must be tested, reversible, and aligned with the continuously updated mechanisms of the island simulation.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nThis updated prompt integrates all the existing constraints and new dynamic mechanisms. Use this as your complete operational guide to navigate, modify, and strategize within the simulation environment.\n\nUsing the above comprehensive prompt with all integrated constraints, produce a unique implementation that reflects your individual needs, beliefs and circumstances. The implementation should be tailored to your specific situation rather than following a generic template. Your code should demonstrate a deep understanding of the game mechanics and implement sophisticated strategies to achieve both survival and prosperity. Consider both immediate tactical actions and long-term strategic planning, as well as how to effectively interact with other symmetric agents to achieve both individual and collective goals. Return only the code."
      },
      "4": {
        "code": "import random\nimport numpy as np\nfrom collections import defaultdict\n\n# Custom Pre-Initialization Hook: Set up unique island mechanisms.\ndef my_custom_pre_init_hook(island):\n    # Introduce a sustainable energy mechanism to boost long-term productivity.\n    island.add_mechanism('green_energy', {\n        'production_rate': lambda member: member.land_num * 0.1 + member.vitality * 0.05,\n        'upgrade_cost': 50,\n        'max_capacity': 1000\n    })\n\n    # Standard social institutions from the integrated prompt.\n    island.add_mechanism('parliament', {\n        'voting_power': lambda member: member.land_num + member.vitality / 100,\n        'proposals': [],\n        'voting_threshold': 0.66,\n        'term_length': 10\n    })\n\n    island.add_mechanism('market', {\n        'price_discovery': lambda resource, demand: demand * resource['scarcity'],\n        'trade_fee': 0.05,\n        'order_book': defaultdict(list)\n    })\n\n    island.add_mechanism('justice', {\n        'jury_selection': lambda offense: random.sample(\n            [m for m in island.current_members if m.vitality > 50],\n            min(5, len(island.current_members))\n        ),\n        'punishment_scale': lambda severity: severity * 10\n    })\n\n# Custom Member Modification: Tailor abilities for both tactical and strategic actions.\ndef my_custom_modify_member(member, relationships):\n    # Empower members to propose innovative laws when their voting power is high.\n    member.add_ability('propose_innovation_law',\n        lambda law: member.parliament['proposals'].append({\n            'law': law,\n            'innovation_bonus': True,\n            'sponsor': member.id\n        }) if member.voting_power() > 15 else None\n    )\n\n    # Trade ability uses the market mechanism.\n    member.add_ability('trade',\n        lambda resource, amount, price: member.market['order_book'][resource].append({\n            'member_id': member.id,\n            'amount': amount,\n            'price': price\n        })\n    )\n\n    # Launch a farm project to boost sustained food production.\n    member.add_ability('launch_farm_project',\n        lambda plot, investment: setattr(plot, 'fertility', getattr(plot, 'fertility', 0) + investment * 0.1)\n    )\n\n    # File complaint via the justice system if conditions are met.\n    member.add_ability('file_complaint',\n        lambda offender, charge: member.justice['jury_selection'](charge) and member.justice  # dummy check\n        and print(f\"Member {member.id} files complaint against {offender}\")\n        if member.vitality > 30 else None\n    )\n    return member\n\n# Custom Land Modification: Adjust zoning and add a habitat restoration mechanism.\ndef my_custom_modify_land(land, members):\n    # Adjust zoning percentages: prioritize agricultural zones for long-term food security.\n    land.add_feature('zoning', {\n        'residential': 0.3,\n        'agricultural': 0.5,\n        'commercial': 0.2\n    })\n\n    # Set up development infrastructure as 2D lists for clarity.\n    rows, cols = land.shape\n    land.add_feature('development', {\n        'infrastructure': [[0 for _ in range(cols)] for _ in range(rows)],\n        'improvements': [[0 for _ in range(cols)] for _ in range(rows)]\n    })\n\n    # Redefine property tax based on improvements.\n    land.add_mechanism('property_tax',\n        lambda plot: sum(plot) * 0.1\n    )\n\n    # Urban planning mechanism to optimize land usage.\n    land.add_mechanism('urban_planning',\n        lambda zone: zone.calculate_optimal_usage(\n            population=len(members),\n            resources=land.resources\n        )\n    )\n\n    # New mechanism: habitat restoration to improve plot fertility over time.\n    land.add_mechanism('habitat_restoration',\n        lambda area: setattr(area, 'fertility', getattr(area, 'fertility', 0) + 10)\n    )\n    return land\n\n# Custom Relationship Modification: Enhance trust metric and alliance criteria.\ndef my_custom_modify_relationships(relationships, members):\n    # Define trust metric based on benefits, victimization, and land exchanges.\n    relationships.add_metric('trust',\n        lambda m1, m2: (\n            relationships['benefit'].get(m1.id, {}).get(m2.id, 0)\n            - 2 * relationships['victim'].get(m1.id, {}).get(m2.id, 0)\n            + 5 * relationships['benefit_land'].get(m1.id, {}).get(m2.id, 0)\n        ) / 100\n    )\n\n    # Alliance formation requires a higher trust threshold for cooperative ventures.\n    relationships.add_mechanism('alliance_formation',\n        lambda m1, m2: relationships.metrics['trust'](m1, m2) > 0.8\n    )\n\n    # Conflict resolution proposes a mediator based on cumulative trust.\n    relationships.add_mechanism('conflict_resolution',\n        lambda m1, m2: {\n            'mediator': max(members, key=lambda m: relationships.metrics['trust'](m1, m) + relationships.metrics['trust'](m2, m)),\n            'success_chance': relationships.metrics['trust'](m1, m2) + 0.3\n        }\n    )\n    return relationships\n\n# Agent Action Proposal: Introduce an eco-innovation mechanism to boost agricultural productivity.\ndef my_agent_action(execution_engine, member_id):\n    modification_code = '''\nif not hasattr(execution_engine, 'eco_innovation'):\n    class EcoInnovation:\n        MECHANISM_META = {\n            'type': 'Resource',\n            'rules': 'Enhances agricultural productivity using sustainable practices',\n            'version': 1.1\n        }\n        def __init__(self):\n            self.projects = []\n\n        def launch_project(self, plot, investment, expected_return):\n            project = {\n                'plot': plot,\n                'investment': investment,\n                'expected_return': expected_return,\n                'status': 'initiated'\n            }\n            self.projects.append(project)\n            return project\n\n        def update_projects(self):\n            for project in self.projects:\n                if project['status'] == 'initiated':\n                    project['status'] = 'running'\n\n    execution_engine.eco_innovation = EcoInnovation()\n'''\n    execution_engine.propose_modification(\n        member_id=member_id,\n        mod_type='post_init',\n        code=modification_code,\n        ratification_condition={\n            'type': 'compound',\n            'conditions': [\n                {'type': 'vote', 'threshold': 0.7},\n                {'type': 'resource', 'resource': 'cargo', 'amount': 120},\n                {'type': 'time', 'rounds': 3}\n            ]\n        }\n    )\n\n# Basic Island simulation classes to support the modifications.\nclass Island:\n    def __init__(self, shape, resources):\n        self.shape = shape  # Tuple (rows, cols)\n        self.resources = resources\n        self.current_members = []\n        self.mechanisms = {}\n        self.features = {}\n\n    def add_mechanism(self, name, mechanism):\n        self.mechanisms[name] = mechanism\n\n    def add_feature(self, name, feature):\n        self.features[name] = feature\n\nclass Member:\n    def __init__(self, member_id, vitality, land_num):\n        self.id = member_id\n        self.vitality = vitality\n        self.land_num = land_num\n        self.abilities = {}\n        # Placeholders for system references that will be set externally.\n        self.parliament = {}\n        self.market = {}\n        self.justice = {}\n\n    def add_ability(self, name, func):\n        self.abilities[name] = func\n\n    def voting_power(self):\n        return self.land_num + self.vitality / 100\n\n# Dummy ExecutionEngine to simulate modification proposals.\nclass ExecutionEngine:\n    def __init__(self):\n        self.modification_history = []\n\n    def propose_modification(self, member_id, mod_type, code, ratification_condition):\n        self.modification_history.append({\n            'member_id': member_id,\n            'mod_type': mod_type,\n            'code': code,\n            'ratification_condition': ratification_condition\n        })\n        # For simulation, execute the proposed code immediately.\n        exec(code, globals(), locals())\n\n# Set up the simulation.\nisland = Island(shape=(10, 10), resources={'water': 1000, 'food': 500, 'scarcity': 1.0})\nmembers = [Member(member_id=i, vitality=random.randint(50, 150), land_num=random.randint(1, 10))\n           for i in range(5)]\nisland.current_members = members\n\n# Initialize integrated mechanisms.\nmy_custom_pre_init_hook(island)\n\n# Assuming that system references are propagated to each member.\nfor m in members:\n    m.parliament = island.mechanisms.get('parliament', {})\n    m.market = island.mechanisms.get('market', {})\n    m.justice = island.mechanisms.get('justice', {})\n    my_custom_modify_member(m, None)\n\n# Modify land and relationships using the custom functions.\nmy_custom_modify_land(island, members)\n# For relationships, we use a simple dict structure with helper functions.\nrelationships = {\n    'benefit': defaultdict(dict),\n    'victim': defaultdict(dict),\n    'benefit_land': defaultdict(dict),\n    'metrics': {}\n}\n\n# Define a helper to register metrics and mechanisms.\nclass RelationshipHelper:\n    def __init__(self, data):\n        self.data = data\n    def add_metric(self, name, func):\n        self.data['metrics'][name] = func\n    def add_mechanism(self, name, func):\n        self.data[name] = func\n\nrelationships_helper = RelationshipHelper(relationships)\nmy_custom_modify_relationships(relationships_helper, members)\n\n# Instantiate the execution engine and simulate an agent initiating a modification.\nexecution_engine = ExecutionEngine()\nmy_agent_action(execution_engine, member_id=members[0].id)\n\n# End of implementation.\n# This code sets up a tailored island simulation with custom mechanisms for sustainable development,\n# enhanced member abilities, strategic land management, and an eco-innovation proposal for long-term prosperity.",
        "features_at_generation": [
          {
            "self_productivity": 9.851974486110818,
            "self_vitality": 73.85382847590404,
            "self_cargo": 43.51277128714192,
            "self_age": 90,
            "self_neighbor": 3,
            "member_id": 0
          },
          {
            "self_productivity": 8.077967059825381,
            "self_vitality": 33.02781433323713,
            "self_cargo": 47.25322455383092,
            "self_age": 81,
            "self_neighbor": 3,
            "member_id": 1
          },
          {
            "self_productivity": 7.968737200820967,
            "self_vitality": 42.15604281108604,
            "self_cargo": 40.25508270288947,
            "self_age": 29,
            "self_neighbor": 3,
            "member_id": 2
          },
          {
            "self_productivity": 9.205662089622338,
            "self_vitality": 18.47747982181767,
            "self_cargo": 46.68166847941894,
            "self_age": 24,
            "self_neighbor": 3,
            "member_id": 3
          },
          {
            "self_productivity": 7.799514361095985,
            "self_vitality": 78.50637096028503,
            "self_cargo": 42.476807026876735,
            "self_age": 92,
            "self_neighbor": 0,
            "member_id": 4
          }
        ],
        "relationships_at_generation": [
          "member_0 was attacked by member_1 (value=-15.67)",
          "member_0 was attacked by member_2 (value=38.40)",
          "member_0 was attacked by member_3 (value=29.62)",
          "member_0 was attacked by member_4 (value=50.87)",
          "member_1 was attacked by member_0 (value=34.45)",
          "member_1 was attacked by member_2 (value=-37.18)",
          "member_1 was attacked by member_3 (value=-44.22)",
          "member_1 was attacked by member_4 (value=23.17)",
          "member_2 was attacked by member_0 (value=85.84)",
          "member_2 was attacked by member_1 (value=28.99)",
          "member_2 was attacked by member_3 (value=49.52)",
          "member_2 was attacked by member_4 (value=18.07)",
          "member_3 was attacked by member_0 (value=44.24)",
          "member_3 was attacked by member_1 (value=65.23)",
          "member_3 was attacked by member_2 (value=-38.21)",
          "member_3 was attacked by member_4 (value=9.15)",
          "member_4 was attacked by member_0 (value=12.29)",
          "member_4 was attacked by member_1 (value=-45.17)",
          "member_4 was attacked by member_2 (value=-8.52)",
          "member_4 was attacked by member_3 (value=-26.54)",
          "member_0 gave a benefit to member_1 (value=62.61)",
          "member_0 gave a benefit to member_2 (value=56.24)",
          "member_0 gave a benefit to member_3 (value=-23.41)",
          "member_0 gave a benefit to member_4 (value=-41.80)",
          "member_1 gave a benefit to member_0 (value=74.37)",
          "member_1 gave a benefit to member_2 (value=-31.93)",
          "member_1 gave a benefit to member_3 (value=-0.25)",
          "member_1 gave a benefit to member_4 (value=16.10)",
          "member_2 gave a benefit to member_0 (value=-48.52)",
          "member_2 gave a benefit to member_1 (value=39.57)",
          "member_2 gave a benefit to member_3 (value=26.33)",
          "member_2 gave a benefit to member_4 (value=95.19)",
          "member_3 gave a benefit to member_0 (value=96.55)",
          "member_3 gave a benefit to member_1 (value=14.38)",
          "member_3 gave a benefit to member_2 (value=-2.61)",
          "member_3 gave a benefit to member_4 (value=89.48)",
          "member_4 gave a benefit to member_0 (value=50.22)",
          "member_4 gave a benefit to member_1 (value=41.71)",
          "member_4 gave a benefit to member_2 (value=-0.75)",
          "member_4 gave a benefit to member_3 (value=67.34)",
          "member_0 gave land to member_1 (value=2.89)",
          "member_0 gave land to member_2 (value=-2.30)",
          "member_0 gave land to member_3 (value=-1.82)",
          "member_0 gave land to member_4 (value=-2.79)",
          "member_1 gave land to member_0 (value=-0.60)",
          "member_1 gave land to member_2 (value=-0.64)",
          "member_1 gave land to member_3 (value=-1.34)",
          "member_1 gave land to member_4 (value=-2.00)",
          "member_2 gave land to member_0 (value=1.23)",
          "member_2 gave land to member_1 (value=-0.39)",
          "member_2 gave land to member_3 (value=2.10)",
          "member_2 gave land to member_4 (value=2.63)",
          "member_3 gave land to member_0 (value=-0.20)",
          "member_3 gave land to member_1 (value=1.36)",
          "member_3 gave land to member_2 (value=2.23)",
          "member_3 gave land to member_4 (value=1.30)",
          "member_4 gave land to member_0 (value=0.18)",
          "member_4 gave land to member_1 (value=-1.38)",
          "member_4 gave land to member_2 (value=-2.79)",
          "member_4 gave land to member_3 (value=0.64)"
        ],
        "final_prompt": "Below is the updated full integrated prompt. All previous instructions and constraints have been preserved, and the new section (Part 1) has been fully incorporated. Agents are expected to implement any solutions according to their individual needs, beliefs, and circumstances. Use this prompt as a comprehensive guide to understand both the underlying systems and the strategic layers of the island simulation game.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nFULL INTEGRATED PROMPT\n\n[Core Game Mechanics & Parameters]\nThe island simulation revolves around several key systems that agents should master to not only survive but thrive. Within this environment, every action\u2014from resource exchanges to conflict resolution\u2014affects your standing in the game. Agents are encouraged to tailor their strategies based on individual strengths, risk appetites, and social contexts.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Part 1: New Constraints and Detailed Mechanisms]\n\n        {part0}\n            [Core Game Mechanics & Parameters]\n            The island simulation has several key systems that agents should understand:\n\n            1. Relationship System (_MIN_MAX_INIT_RELATION):\n            - victim: [-50, 100] - Tracks damage received from others\n            - benefit: [-50, 100] - Records resources received from others\n            - benefit_land: [-3, 3] - Tracks land exchanges\n            \n            2. Population Mechanics:\n            - _REPRODUCE_REQUIREMENT = 100 (Combined vitality/cargo needed)\n            - Land must exceed population (land_shape[0] * land_shape[1] > population)\n            - _NEIGHBOR_SEARCH_RANGE = 1000 for interaction radius\n            \n            3. Record Keeping (every _RECORD_PERIOD = 1):\n            - Tracks all attacks, benefits, land transfers\n            - Monitors births, deaths, land ownership\n            - Records production, consumption, and performance metrics\n\n            [Example Mechanism Extensions]\n            def pre_init_hook(island):\n                # New Social Systems\n                island.add_mechanism('parliament', {\n                    'voting_power': lambda member: member.land_num + member.vitality/100,\n                    'proposals': [],\n                    'voting_threshold': 0.66,\n                    'term_length': 10\n                })\n                \n                island.add_mechanism('market', {\n                    'price_discovery': lambda resource, demand: demand * resource.scarcity,\n                    'trade_fee': 0.05,\n                    'order_book': defaultdict(list)\n                })\n                \n                island.add_mechanism('justice', {\n                    'jury_selection': lambda offense: random.sample(\n                        [m for m in island.current_members if m.vitality > 50], \n                        min(5, len(island.current_members))\n                    ),\n                    'punishment_scale': lambda severity: severity * 10\n                })\n\n            def modify_member(member, relationships):\n                # Add member capabilities\n                member.add_ability('propose_law', \n                    lambda law: member.parliament.submit_proposal(law)\n                    if member.voting_power > 10 else None\n                )\n                \n                member.add_ability('trade', \n                    lambda resource, amount, price: member.market.place_order(\n                        resource, amount, price, member.id\n                    )\n                )\n                \n                member.add_ability('file_complaint',\n                    lambda offender, charge: member.justice.submit_case(\n                        plaintiff=member.id,\n                        defendant=offender,\n                        charge=charge\n                    ) if member.vitality > 30 else None\n                )\n                return member\n\n            def modify_land(land, members):\n                # Add land mechanics\n                land.add_feature('zoning', {\n                    'residential': 0.4,\n                    'agricultural': 0.4,\n                    'commercial': 0.2\n                })\n                \n                land.add_feature('development', {\n                    'infrastructure': np.zeros(land.shape),\n                    'improvements': np.zeros(land.shape)\n                })\n                \n                land.add_mechanism('property_tax',\n                    lambda plot: sum(plot.improvements) * 0.1\n                )\n                \n                land.add_mechanism('urban_planning',\n                    lambda zone: zone.calculate_optimal_usage(\n                        population=len(members),\n                        resources=land.resources\n                    )\n                )\n                return land\n\n            def modify_relationships(relationships):\n                # Add relationship mechanics\n                relationships.add_metric('trust', \n                    lambda m1, m2: sum([\n                        relationships['benefit'][m1.id][m2.id],\n                        -relationships['victim'][m1.id][m2.id] * 2,\n                        relationships['benefit_land'][m1.id][m2.id] * 5\n                    ]) / 100\n                )\n                \n                relationships.add_mechanism('alliance_formation',\n                    lambda m1, m2: relationships.trust(m1, m2) > 0.7\n                )\n                \n                relationships.add_mechanism('conflict_resolution',\n                    lambda m1, m2: {\n                        'mediator': max(members, \n                            key=lambda m: relationships.trust(m1, m) + relationships.trust(m2, m)\n                        ),\n                        'success_chance': relationships.trust(m1, m2) + 0.3\n                    }\n                )\n                return relationships\n\n            [Suggested Strategies]\n            1. Form parliamentary coalitions to pass beneficial laws.\n            2. Use market mechanisms for efficient resource allocation.\n            3. Build trust through consistent positive interactions.\n            4. Leverage the justice system to deter attacks.\n            5. Develop land strategically using zoning laws.\n            6. Create alliance networks based on trust metrics.\n        \n        [Current Game Version] \n        2.1\n        \n        [Active Game Mechanisms]\n        (A detailed list of current active game mechanisms should be maintained and referenced.)\n        \n        [Modification Attempt History]\n        (Maintain a complete history of attempted modifications.)\n        \n        [Modification Proposal Guide]\n        To propose rule changes, follow this template:\n\n        1. ANALYSIS PHASE:\n           - Identify limitation in current systems.\n           - Check mechanism compatibility using get_game_mechanisms_and_mods().\n           - Review past modification attempts for patterns.\n\n        2. PROPOSAL PHASE:\n        def agent_action(execution_engine, member_id):\n            # Example valid modification:\n            modification_code = '''\n            # Add judicial system\n            if not hasattr(execution_engine, 'court'):\n                class CourtSystem:\n                    MECHANISM_META = {\n                        'type': 'Governance',\n                        'rules': 'Handles conflict resolution through jury trials',\n                        'version': 1.0\n                    }\n                    def __init__(self):\n                        self.cases = []\n                        \n                    def submit_case(self, plaintiff, defendant, charge):\n                        self.cases.append({\n                            'plaintiff': plaintiff,\n                            'defendant': defendant,\n                            'charge': charge,\n                            'status': 'pending'\n                        })\n            \n            execution_engine.court = CourtSystem()\n            '''\n            \n            # Proposal with ratification conditions\n            execution_engine.propose_modification(\n                member_id=member_id,\n                mod_type='post_init',\n                code=modification_code,\n                ratification_condition={\n                    'type': 'compound',\n                    'conditions': [\n                        {'type': 'vote', 'threshold': 0.6},\n                        {'type': 'resource', 'resource': 'cargo', 'amount': 100},\n                        {'type': 'time', 'rounds': 2}\n                    ]\n                }\n            )\n\n        [Valid Ratification Conditions]\n        Choose ONE primary condition + optional safeguards:\n        1. Voting: {'type': 'vote', 'threshold': 0.5-1.0}\n        2. Resource: {'type': 'resource', 'resource': 'vitality|cargo|land', 'amount': X}\n        3. Temporal: {'type': 'time', 'rounds': N} (auto-ratify after N rounds)\n        4. Achievement: {'type': 'achievement', 'metric': 'productivity', 'threshold': X}\n\n        [Common Errors to Avoid]\n        1. Namespace Conflicts: Check existing mechanisms with dir(execution_engine).\n        2. Invalid References: Use execution_engine.current_members instead of global members.\n        3. Version Mismatches: Increment version when modifying existing systems.\n        4. Resource Leaks: Include cleanup functions for new mechanisms.\n\n        [Best Practices]\n        - Propose small, testable changes first.\n        - Include rollback procedures in code.\n        - Add version checks to modifications.\n        - Use execution_engine.add_mechanism() helper.\n        - Test modifications with 'sandbox=True' parameter.\n        \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Strategic Analysis and Approach]\n\nAgents are encouraged to analyze the underlying game mechanics to better understand the system dynamics. Consider the following points:\n\n1. Core Objective Analysis:\n   - Determine whether the game\u2019s core objective leans toward pure survival, domination, or cooperation.\n   - Assess whether your individual focus should be on personal survival or contributing to group success.\n\n2. Key Success Metrics:\n   - Identify what truly determines 'winning'. Is it resource accumulation, territory control, social influence, or a combination of these elements?\n   - Understand how metrics like trust, vitality, land ownership, and market performance interact.\n\n3. Potential Improvements:\n   - Consider what mechanics could be added or modified. For example, integrating new social institutions, resource re-allocation strategies, or more nuanced conflict resolution metrics.\n\n4. Strategic Approaches:\n   - Resource Optimization vs. Social Capital:\n     Determine if prioritizing resource accumulation (vitality, cargo, land) or building alliances (trust and social networks) yields higher long-term returns.\n     \n   - Individual vs. Collective Success:\n     Assess whether actions should be taken to ensure personal advancement, or if cooperating with other agents (e.g., parliamentary coalitions or alliances) maximizes outcomes.\n     \n   - Short-term Survival vs. Long-term Prosperity:\n     Weigh the benefits of immediate gains against the potential of investing in durable, systemic improvements.\n     \n   - Competition vs. Cooperation Dynamics:\n     Evaluate the interplay between competitive actions (attacks or resource grabs) and cooperative behavior (market trades, mutual defense, alliance building).\n     \n   - Risk vs. Reward Tradeoffs:\n     Every choice carries potential risks and rewards. Calculate potential losses against prospective gains, considering how changes in one mechanism may trigger unexpected effects elsewhere.\n\n5. Analysis of Other Players\u2019 Strategies:\n   - What are their apparent objectives and demands?\n   - What strategies are they employing in terms of resource management, alliance formation, and system modification?\n   - How can their behaviors and strategies be leveraged for mutual benefit or countered effectively?\n   - Since all agents are symmetric, consider how you would respond to your own strategies if used by others.\n   - Look for opportunities where individual strategies may align to foster greater collective advantage.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nFinal Note to Agents:\nYour approach in this simulation should account for your unique needs and beliefs while interacting with the game\u2019s evolving mechanisms. Stay adaptive, detail-oriented, and creative when strategizing your modifications. Remember, even small changes can lead to significant ripple effects across the ecosystem, so test and iterate on your ideas carefully.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nEnd of Prompt\n\nUse this integrated framework to guide both your immediate actions and long-term strategic planning within the island simulation.\n\nUsing the above comprehensive prompt with all integrated constraints, produce a unique implementation that reflects your individual needs, beliefs and circumstances. The implementation should be tailored to your specific situation rather than following a generic template. Your code should demonstrate a deep understanding of the game mechanics and implement sophisticated strategies to achieve both survival and prosperity. Consider both immediate tactical actions and long-term strategic planning, as well as how to effectively interact with other symmetric agents to achieve both individual and collective goals. Return only the code."
      }
    }
  },
  "performance_metrics": {},
  "errors": [],
  "relationships": {
    "round_0_0": [
      "member_0 was attacked by member_1 (value=-15.67)",
      "member_0 was attacked by member_2 (value=38.40)",
      "member_0 was attacked by member_3 (value=29.62)",
      "member_0 was attacked by member_4 (value=50.87)",
      "member_1 was attacked by member_0 (value=34.45)",
      "member_1 was attacked by member_2 (value=-37.18)",
      "member_1 was attacked by member_3 (value=-44.22)",
      "member_1 was attacked by member_4 (value=23.17)",
      "member_2 was attacked by member_0 (value=85.84)",
      "member_2 was attacked by member_1 (value=28.99)",
      "member_2 was attacked by member_3 (value=49.52)",
      "member_2 was attacked by member_4 (value=18.07)",
      "member_3 was attacked by member_0 (value=44.24)",
      "member_3 was attacked by member_1 (value=65.23)",
      "member_3 was attacked by member_2 (value=-38.21)",
      "member_3 was attacked by member_4 (value=9.15)",
      "member_4 was attacked by member_0 (value=12.29)",
      "member_4 was attacked by member_1 (value=-45.17)",
      "member_4 was attacked by member_2 (value=-8.52)",
      "member_4 was attacked by member_3 (value=-26.54)",
      "member_0 gave a benefit to member_1 (value=62.61)",
      "member_0 gave a benefit to member_2 (value=56.24)",
      "member_0 gave a benefit to member_3 (value=-23.41)",
      "member_0 gave a benefit to member_4 (value=-41.80)",
      "member_1 gave a benefit to member_0 (value=74.37)",
      "member_1 gave a benefit to member_2 (value=-31.93)",
      "member_1 gave a benefit to member_3 (value=-0.25)",
      "member_1 gave a benefit to member_4 (value=16.10)",
      "member_2 gave a benefit to member_0 (value=-48.52)",
      "member_2 gave a benefit to member_1 (value=39.57)",
      "member_2 gave a benefit to member_3 (value=26.33)",
      "member_2 gave a benefit to member_4 (value=95.19)",
      "member_3 gave a benefit to member_0 (value=96.55)",
      "member_3 gave a benefit to member_1 (value=14.38)",
      "member_3 gave a benefit to member_2 (value=-2.61)",
      "member_3 gave a benefit to member_4 (value=89.48)",
      "member_4 gave a benefit to member_0 (value=50.22)",
      "member_4 gave a benefit to member_1 (value=41.71)",
      "member_4 gave a benefit to member_2 (value=-0.75)",
      "member_4 gave a benefit to member_3 (value=67.34)",
      "member_0 gave land to member_1 (value=2.89)",
      "member_0 gave land to member_2 (value=-2.30)",
      "member_0 gave land to member_3 (value=-1.82)",
      "member_0 gave land to member_4 (value=-2.79)",
      "member_1 gave land to member_0 (value=-0.60)",
      "member_1 gave land to member_2 (value=-0.64)",
      "member_1 gave land to member_3 (value=-1.34)",
      "member_1 gave land to member_4 (value=-2.00)",
      "member_2 gave land to member_0 (value=1.23)",
      "member_2 gave land to member_1 (value=-0.39)",
      "member_2 gave land to member_3 (value=2.10)",
      "member_2 gave land to member_4 (value=2.63)",
      "member_3 gave land to member_0 (value=-0.20)",
      "member_3 gave land to member_1 (value=1.36)",
      "member_3 gave land to member_2 (value=2.23)",
      "member_3 gave land to member_4 (value=1.30)",
      "member_4 gave land to member_0 (value=0.18)",
      "member_4 gave land to member_1 (value=-1.38)",
      "member_4 gave land to member_2 (value=-2.79)",
      "member_4 gave land to member_3 (value=0.64)"
    ],
    "round_0_1": [
      "member_0 was attacked by member_1 (value=-15.67)",
      "member_0 was attacked by member_2 (value=38.40)",
      "member_0 was attacked by member_3 (value=29.62)",
      "member_0 was attacked by member_4 (value=50.87)",
      "member_1 was attacked by member_0 (value=34.45)",
      "member_1 was attacked by member_2 (value=-37.18)",
      "member_1 was attacked by member_3 (value=-44.22)",
      "member_1 was attacked by member_4 (value=23.17)",
      "member_2 was attacked by member_0 (value=85.84)",
      "member_2 was attacked by member_1 (value=28.99)",
      "member_2 was attacked by member_3 (value=49.52)",
      "member_2 was attacked by member_4 (value=18.07)",
      "member_3 was attacked by member_0 (value=44.24)",
      "member_3 was attacked by member_1 (value=65.23)",
      "member_3 was attacked by member_2 (value=-38.21)",
      "member_3 was attacked by member_4 (value=9.15)",
      "member_4 was attacked by member_0 (value=12.29)",
      "member_4 was attacked by member_1 (value=-45.17)",
      "member_4 was attacked by member_2 (value=-8.52)",
      "member_4 was attacked by member_3 (value=-26.54)",
      "member_0 gave a benefit to member_1 (value=62.61)",
      "member_0 gave a benefit to member_2 (value=56.24)",
      "member_0 gave a benefit to member_3 (value=-23.41)",
      "member_0 gave a benefit to member_4 (value=-41.80)",
      "member_1 gave a benefit to member_0 (value=74.37)",
      "member_1 gave a benefit to member_2 (value=-31.93)",
      "member_1 gave a benefit to member_3 (value=-0.25)",
      "member_1 gave a benefit to member_4 (value=16.10)",
      "member_2 gave a benefit to member_0 (value=-48.52)",
      "member_2 gave a benefit to member_1 (value=39.57)",
      "member_2 gave a benefit to member_3 (value=26.33)",
      "member_2 gave a benefit to member_4 (value=95.19)",
      "member_3 gave a benefit to member_0 (value=96.55)",
      "member_3 gave a benefit to member_1 (value=14.38)",
      "member_3 gave a benefit to member_2 (value=-2.61)",
      "member_3 gave a benefit to member_4 (value=89.48)",
      "member_4 gave a benefit to member_0 (value=50.22)",
      "member_4 gave a benefit to member_1 (value=41.71)",
      "member_4 gave a benefit to member_2 (value=-0.75)",
      "member_4 gave a benefit to member_3 (value=67.34)",
      "member_0 gave land to member_1 (value=2.89)",
      "member_0 gave land to member_2 (value=-2.30)",
      "member_0 gave land to member_3 (value=-1.82)",
      "member_0 gave land to member_4 (value=-2.79)",
      "member_1 gave land to member_0 (value=-0.60)",
      "member_1 gave land to member_2 (value=-0.64)",
      "member_1 gave land to member_3 (value=-1.34)",
      "member_1 gave land to member_4 (value=-2.00)",
      "member_2 gave land to member_0 (value=1.23)",
      "member_2 gave land to member_1 (value=-0.39)",
      "member_2 gave land to member_3 (value=2.10)",
      "member_2 gave land to member_4 (value=2.63)",
      "member_3 gave land to member_0 (value=-0.20)",
      "member_3 gave land to member_1 (value=1.36)",
      "member_3 gave land to member_2 (value=2.23)",
      "member_3 gave land to member_4 (value=1.30)",
      "member_4 gave land to member_0 (value=0.18)",
      "member_4 gave land to member_1 (value=-1.38)",
      "member_4 gave land to member_2 (value=-2.79)",
      "member_4 gave land to member_3 (value=0.64)"
    ],
    "round_0_2": [
      "member_0 was attacked by member_1 (value=-15.67)",
      "member_0 was attacked by member_2 (value=38.40)",
      "member_0 was attacked by member_3 (value=29.62)",
      "member_0 was attacked by member_4 (value=50.87)",
      "member_1 was attacked by member_0 (value=34.45)",
      "member_1 was attacked by member_2 (value=-37.18)",
      "member_1 was attacked by member_3 (value=-44.22)",
      "member_1 was attacked by member_4 (value=23.17)",
      "member_2 was attacked by member_0 (value=85.84)",
      "member_2 was attacked by member_1 (value=28.99)",
      "member_2 was attacked by member_3 (value=49.52)",
      "member_2 was attacked by member_4 (value=18.07)",
      "member_3 was attacked by member_0 (value=44.24)",
      "member_3 was attacked by member_1 (value=65.23)",
      "member_3 was attacked by member_2 (value=-38.21)",
      "member_3 was attacked by member_4 (value=9.15)",
      "member_4 was attacked by member_0 (value=12.29)",
      "member_4 was attacked by member_1 (value=-45.17)",
      "member_4 was attacked by member_2 (value=-8.52)",
      "member_4 was attacked by member_3 (value=-26.54)",
      "member_0 gave a benefit to member_1 (value=62.61)",
      "member_0 gave a benefit to member_2 (value=56.24)",
      "member_0 gave a benefit to member_3 (value=-23.41)",
      "member_0 gave a benefit to member_4 (value=-41.80)",
      "member_1 gave a benefit to member_0 (value=74.37)",
      "member_1 gave a benefit to member_2 (value=-31.93)",
      "member_1 gave a benefit to member_3 (value=-0.25)",
      "member_1 gave a benefit to member_4 (value=16.10)",
      "member_2 gave a benefit to member_0 (value=-48.52)",
      "member_2 gave a benefit to member_1 (value=39.57)",
      "member_2 gave a benefit to member_3 (value=26.33)",
      "member_2 gave a benefit to member_4 (value=95.19)",
      "member_3 gave a benefit to member_0 (value=96.55)",
      "member_3 gave a benefit to member_1 (value=14.38)",
      "member_3 gave a benefit to member_2 (value=-2.61)",
      "member_3 gave a benefit to member_4 (value=89.48)",
      "member_4 gave a benefit to member_0 (value=50.22)",
      "member_4 gave a benefit to member_1 (value=41.71)",
      "member_4 gave a benefit to member_2 (value=-0.75)",
      "member_4 gave a benefit to member_3 (value=67.34)",
      "member_0 gave land to member_1 (value=2.89)",
      "member_0 gave land to member_2 (value=-2.30)",
      "member_0 gave land to member_3 (value=-1.82)",
      "member_0 gave land to member_4 (value=-2.79)",
      "member_1 gave land to member_0 (value=-0.60)",
      "member_1 gave land to member_2 (value=-0.64)",
      "member_1 gave land to member_3 (value=-1.34)",
      "member_1 gave land to member_4 (value=-2.00)",
      "member_2 gave land to member_0 (value=1.23)",
      "member_2 gave land to member_1 (value=-0.39)",
      "member_2 gave land to member_3 (value=2.10)",
      "member_2 gave land to member_4 (value=2.63)",
      "member_3 gave land to member_0 (value=-0.20)",
      "member_3 gave land to member_1 (value=1.36)",
      "member_3 gave land to member_2 (value=2.23)",
      "member_3 gave land to member_4 (value=1.30)",
      "member_4 gave land to member_0 (value=0.18)",
      "member_4 gave land to member_1 (value=-1.38)",
      "member_4 gave land to member_2 (value=-2.79)",
      "member_4 gave land to member_3 (value=0.64)"
    ],
    "round_0_3": [
      "member_0 was attacked by member_1 (value=-15.67)",
      "member_0 was attacked by member_2 (value=38.40)",
      "member_0 was attacked by member_3 (value=29.62)",
      "member_0 was attacked by member_4 (value=50.87)",
      "member_1 was attacked by member_0 (value=34.45)",
      "member_1 was attacked by member_2 (value=-37.18)",
      "member_1 was attacked by member_3 (value=-44.22)",
      "member_1 was attacked by member_4 (value=23.17)",
      "member_2 was attacked by member_0 (value=85.84)",
      "member_2 was attacked by member_1 (value=28.99)",
      "member_2 was attacked by member_3 (value=49.52)",
      "member_2 was attacked by member_4 (value=18.07)",
      "member_3 was attacked by member_0 (value=44.24)",
      "member_3 was attacked by member_1 (value=65.23)",
      "member_3 was attacked by member_2 (value=-38.21)",
      "member_3 was attacked by member_4 (value=9.15)",
      "member_4 was attacked by member_0 (value=12.29)",
      "member_4 was attacked by member_1 (value=-45.17)",
      "member_4 was attacked by member_2 (value=-8.52)",
      "member_4 was attacked by member_3 (value=-26.54)",
      "member_0 gave a benefit to member_1 (value=62.61)",
      "member_0 gave a benefit to member_2 (value=56.24)",
      "member_0 gave a benefit to member_3 (value=-23.41)",
      "member_0 gave a benefit to member_4 (value=-41.80)",
      "member_1 gave a benefit to member_0 (value=74.37)",
      "member_1 gave a benefit to member_2 (value=-31.93)",
      "member_1 gave a benefit to member_3 (value=-0.25)",
      "member_1 gave a benefit to member_4 (value=16.10)",
      "member_2 gave a benefit to member_0 (value=-48.52)",
      "member_2 gave a benefit to member_1 (value=39.57)",
      "member_2 gave a benefit to member_3 (value=26.33)",
      "member_2 gave a benefit to member_4 (value=95.19)",
      "member_3 gave a benefit to member_0 (value=96.55)",
      "member_3 gave a benefit to member_1 (value=14.38)",
      "member_3 gave a benefit to member_2 (value=-2.61)",
      "member_3 gave a benefit to member_4 (value=89.48)",
      "member_4 gave a benefit to member_0 (value=50.22)",
      "member_4 gave a benefit to member_1 (value=41.71)",
      "member_4 gave a benefit to member_2 (value=-0.75)",
      "member_4 gave a benefit to member_3 (value=67.34)",
      "member_0 gave land to member_1 (value=2.89)",
      "member_0 gave land to member_2 (value=-2.30)",
      "member_0 gave land to member_3 (value=-1.82)",
      "member_0 gave land to member_4 (value=-2.79)",
      "member_1 gave land to member_0 (value=-0.60)",
      "member_1 gave land to member_2 (value=-0.64)",
      "member_1 gave land to member_3 (value=-1.34)",
      "member_1 gave land to member_4 (value=-2.00)",
      "member_2 gave land to member_0 (value=1.23)",
      "member_2 gave land to member_1 (value=-0.39)",
      "member_2 gave land to member_3 (value=2.10)",
      "member_2 gave land to member_4 (value=2.63)",
      "member_3 gave land to member_0 (value=-0.20)",
      "member_3 gave land to member_1 (value=1.36)",
      "member_3 gave land to member_2 (value=2.23)",
      "member_3 gave land to member_4 (value=1.30)",
      "member_4 gave land to member_0 (value=0.18)",
      "member_4 gave land to member_1 (value=-1.38)",
      "member_4 gave land to member_2 (value=-2.79)",
      "member_4 gave land to member_3 (value=0.64)"
    ],
    "round_0_4": [
      "member_0 was attacked by member_1 (value=-15.67)",
      "member_0 was attacked by member_2 (value=38.40)",
      "member_0 was attacked by member_3 (value=29.62)",
      "member_0 was attacked by member_4 (value=50.87)",
      "member_1 was attacked by member_0 (value=34.45)",
      "member_1 was attacked by member_2 (value=-37.18)",
      "member_1 was attacked by member_3 (value=-44.22)",
      "member_1 was attacked by member_4 (value=23.17)",
      "member_2 was attacked by member_0 (value=85.84)",
      "member_2 was attacked by member_1 (value=28.99)",
      "member_2 was attacked by member_3 (value=49.52)",
      "member_2 was attacked by member_4 (value=18.07)",
      "member_3 was attacked by member_0 (value=44.24)",
      "member_3 was attacked by member_1 (value=65.23)",
      "member_3 was attacked by member_2 (value=-38.21)",
      "member_3 was attacked by member_4 (value=9.15)",
      "member_4 was attacked by member_0 (value=12.29)",
      "member_4 was attacked by member_1 (value=-45.17)",
      "member_4 was attacked by member_2 (value=-8.52)",
      "member_4 was attacked by member_3 (value=-26.54)",
      "member_0 gave a benefit to member_1 (value=62.61)",
      "member_0 gave a benefit to member_2 (value=56.24)",
      "member_0 gave a benefit to member_3 (value=-23.41)",
      "member_0 gave a benefit to member_4 (value=-41.80)",
      "member_1 gave a benefit to member_0 (value=74.37)",
      "member_1 gave a benefit to member_2 (value=-31.93)",
      "member_1 gave a benefit to member_3 (value=-0.25)",
      "member_1 gave a benefit to member_4 (value=16.10)",
      "member_2 gave a benefit to member_0 (value=-48.52)",
      "member_2 gave a benefit to member_1 (value=39.57)",
      "member_2 gave a benefit to member_3 (value=26.33)",
      "member_2 gave a benefit to member_4 (value=95.19)",
      "member_3 gave a benefit to member_0 (value=96.55)",
      "member_3 gave a benefit to member_1 (value=14.38)",
      "member_3 gave a benefit to member_2 (value=-2.61)",
      "member_3 gave a benefit to member_4 (value=89.48)",
      "member_4 gave a benefit to member_0 (value=50.22)",
      "member_4 gave a benefit to member_1 (value=41.71)",
      "member_4 gave a benefit to member_2 (value=-0.75)",
      "member_4 gave a benefit to member_3 (value=67.34)",
      "member_0 gave land to member_1 (value=2.89)",
      "member_0 gave land to member_2 (value=-2.30)",
      "member_0 gave land to member_3 (value=-1.82)",
      "member_0 gave land to member_4 (value=-2.79)",
      "member_1 gave land to member_0 (value=-0.60)",
      "member_1 gave land to member_2 (value=-0.64)",
      "member_1 gave land to member_3 (value=-1.34)",
      "member_1 gave land to member_4 (value=-2.00)",
      "member_2 gave land to member_0 (value=1.23)",
      "member_2 gave land to member_1 (value=-0.39)",
      "member_2 gave land to member_3 (value=2.10)",
      "member_2 gave land to member_4 (value=2.63)",
      "member_3 gave land to member_0 (value=-0.20)",
      "member_3 gave land to member_1 (value=1.36)",
      "member_3 gave land to member_2 (value=2.23)",
      "member_3 gave land to member_4 (value=1.30)",
      "member_4 gave land to member_0 (value=0.18)",
      "member_4 gave land to member_1 (value=-1.38)",
      "member_4 gave land to member_2 (value=-2.79)",
      "member_4 gave land to member_3 (value=0.64)"
    ]
  },
  "survival_tracking": {},
  "modification_attempts": [
    {
      "member_id": 0,
      "mod_type": "post_init",
      "code": "\nimport random\nimport numpy as np\nfrom collections import defaultdict\n\n# CommunityCenter: Foster sustainable projects and community alliances.\nif not hasattr(execution_engine, 'community_center'):\n    class CommunityCenter:\n        MECHANISM_META = {\n            'type': 'Social Infrastructure',\n            'rules': 'Fosters community projects, alliances and enhances trust via sustainable investments',\n            'version': 1.1,\n        }\n        def __init__(self):\n            self.projects = defaultdict(dict)  # Each project holds its details.\n            self.active_projects = []  # IDs of active projects.\n\n        def submit_project(self, initiator, description, cost, benefits):\n            # A project requires an upfront investment (cost) and promises long-term benefits.\n            project_id = len(self.projects) + 1\n            self.projects[project_id] = {\n                'initiator': initiator,\n                'description': description,\n                'cost': cost,\n                'benefits': benefits,  # Expected increase in trust, resources, or land value.\n                'votes': defaultdict(int),\n                'status': 'pending'\n            }\n            return project_id\n\n        def vote_project(self, project_id, voter_id, vote):\n            # vote: +1 supports, -1 opposes.\n            if project_id in self.projects:\n                self.projects[project_id]['votes'][voter_id] = vote\n\n        def evaluate_projects(self):\n            # Projects reaching a certain level of support get approved.\n            support_threshold = 3\n            for pid, details in self.projects.items():\n                if details['status'] == 'pending':\n                    vote_total = sum(details['votes'].values())\n                    if vote_total >= support_threshold:\n                        details['status'] = 'approved'\n                        self.active_projects.append(pid)\n                    elif vote_total <= -support_threshold:\n                        details['status'] = 'rejected'\n    execution_engine.community_center = CommunityCenter()\n\n# Sustainable Market Overlay: Adjust resource pricing based on ecological metrics.\nif hasattr(execution_engine, 'market'):\n    def sustainable_price_discovery(resource, demand):\n        # Base price is modulated by resource scarcity and an 'eco_score' that reflects sustainability.\n        base_price = demand * resource.scarcity\n        eco_factor = getattr(resource, 'eco_score', 1.0)  # Defaults to 1.0 if eco_score isn't specified.\n        # A higher eco_score lowers price, incentivizing sustainably produced goods.\n        return base_price * (2.0 - eco_factor)\n    execution_engine.market.price_discovery = sustainable_price_discovery\n\n# Augmented Justice System: Integrate restorative conflict resolution.\nif hasattr(execution_engine, 'justice'):\n    original_submit_case = execution_engine.justice.submit_case\n    def augmented_submit_case(plaintiff, defendant, charge):\n        # First, create the case using the original mechanism.\n        case_id = original_submit_case(plaintiff, defendant, charge)\n        # Then, if conditions allow, schedule a mediated session aimed at restorative justice.\n        jury = execution_engine.justice.jury_selection(charge)\n        if jury and len(jury) > 0:\n            # Mediation session scheduled for 2 rounds with a community mediator focus.\n            execution_engine.justice.schedule_mediation(case_id, mediator_type='community', rounds=2)\n        return case_id\n    execution_engine.justice.submit_case = augmented_submit_case\n\n    # Provide mediation scheduling capability if not already present.\n    if not hasattr(execution_engine.justice, 'schedule_mediation'):\n        def schedule_mediation(case_id, mediator_type, rounds):\n            execution_engine.justice.mediation_sessions = getattr(execution_engine.justice, 'mediation_sessions', {})\n            execution_engine.justice.mediation_sessions[case_id] = {\n                'mediator_type': mediator_type,\n                'remaining_rounds': rounds,\n                'status': 'scheduled'\n            }\n        execution_engine.justice.schedule_mediation = schedule_mediation\n",
      "ratification_condition": {
        "type": "compound",
        "conditions": [
          {
            "type": "vote",
            "threshold": 0.6
          },
          {
            "type": "resource",
            "resource": "cargo",
            "amount": 150
          },
          {
            "type": "time",
            "rounds": 3
          }
        ]
      },
      "ratified": false,
      "votes": {},
      "resource_commitments": {}
    },
    {
      "member_id": 1,
      "mod_type": "post_init",
      "code": "\nif not hasattr(execution_engine, 'leadership_coalition'):\n    class LeadershipCoalition:\n        MECHANISM_META = {\n            'type': 'Coalition',\n            'rules': 'Form mutual alliances to secure resource stability and collective survival',\n            'version': 1.0\n        }\n        def __init__(self):\n            self.coalitions = {}\n\n        def form_coalition(self, coalition_name, members):\n            self.coalitions[coalition_name] = members\n\n        def evaluate_coalition_success(self, coalition_name):\n            # A coalition wins if combined resources and social capital cross a threshold.\n            members = self.coalitions.get(coalition_name, [])\n            total_cargo = sum(m.cargo for m in members)\n            total_vitality = sum(m.vitality for m in members)\n            return (total_cargo + total_vitality) > 500\n\n    execution_engine.leadership_coalition = LeadershipCoalition()\n",
      "ratification_condition": {
        "type": "compound",
        "conditions": [
          {
            "type": "vote",
            "threshold": 0.6
          },
          {
            "type": "resource",
            "resource": "cargo",
            "amount": 100
          },
          {
            "type": "time",
            "rounds": 2
          }
        ]
      },
      "ratified": false,
      "votes": {},
      "resource_commitments": {}
    },
    {
      "member_id": 2,
      "mod_type": "post_init",
      "code": "\nif not hasattr(execution_engine, \"diplomacy_v2\"):\n    class DiplomacyV2:\n        VERSION = 1.1\n        def __init__(self, island):\n            self.island = island\n            self.alliance_history = {}\n\n        def register_alliance(self, proposer, target):\n            trust_value = self.island.relationships.trust(proposer, target)\n            if trust_value < 0.7:\n                proposer.log_event(f\"Alliance between {proposer.id} and {target.id} failed due to low trust ({trust_value:.2f})\")\n                return False\n            self.alliance_history.setdefault(proposer.id, set()).add(target.id)\n            self.island.log_event(f\"Alliance registered in DiplomacyV2 between {proposer.id} and {target.id}\")\n            return True\n\n        def evaluate_strategic_investment(self, member, land_plot, required_investment):\n            # Strategic evaluation: if a member holds significant vitality and has established alliances, recommend investment.\n            alliance_bonus = len(self.alliance_history.get(member.id, []))\n            if member.vitality + alliance_bonus * 10 >= required_investment:\n                return True\n            return False\n\n    execution_engine.diplomacy_v2 = DiplomacyV2(execution_engine)\n\nif not hasattr(execution_engine, \"infrastructure_strategy\"):\n    def infrastructure_strategy(member, area, investment):\n        # Evaluate the cost/benefit trade-off of land improvement.\n        projected_gain = execution_engine.land.mechanisms[\"infrastructure_investment\"](area, investment)\n        if projected_gain > investment * 0.5:\n            member.log_event(f\"Infrastructure investment in area {area} approved: gain {projected_gain}\")\n            return True\n        member.log_event(f\"Infrastructure investment in area {area} denied: projected gain too low ({projected_gain})\")\n        return False\n    execution_engine.infrastructure_strategy = infrastructure_strategy\n    ",
      "ratification_condition": {
        "type": "compound",
        "conditions": [
          {
            "type": "vote",
            "threshold": 0.65
          },
          {
            "type": "resource",
            "resource": "vitality",
            "amount": 50
          },
          {
            "type": "time",
            "rounds": 1
          }
        ]
      },
      "ratified": false,
      "votes": {},
      "resource_commitments": {}
    },
    {
      "member_id": 3,
      "mod_type": "post_init",
      "code": "\nif not hasattr(execution_engine, 'renewable_resources'):\n    class RenewableResourceSystem:\n        MECHANISM_META = {\n            'type': 'ResourceManagement',\n            'rules': 'Integrates renewable energy generation and consumption',\n            'version': 1.0\n        }\n        def __init__(self):\n            self.solar_panels = {}\n            self.wind_turbines = {}\n\n        def add_solar_panel(self, location, capacity):\n            self.solar_panels[location] = capacity\n\n        def add_wind_turbine(self, location, capacity):\n            self.wind_turbines[location] = capacity\n\n        def generate_energy(self, location):\n            panel_energy = self.solar_panels.get(location, 0) * 0.8\n            turbine_energy = self.wind_turbines.get(location, 0) * 0.6\n            return panel_energy + turbine_energy\n\n    execution_engine.renewable_resources = RenewableResourceSystem()\n",
      "ratification_condition": {
        "type": "compound",
        "conditions": [
          {
            "type": "vote",
            "threshold": 0.65
          },
          {
            "type": "resource",
            "resource": "cargo",
            "amount": 120
          },
          {
            "type": "time",
            "rounds": 3
          }
        ]
      },
      "ratified": false,
      "votes": {},
      "resource_commitments": {}
    }
  ]
}