{
  "rounds": [
    {
      "round_number": 1,
      "timestamp": "2025-02-21T22:53:51.140544",
      "agent_actions": [
        {
          "member_id": 0,
          "code_executed": "def agent_action(execution_engine, member_id):\n    # Retrieve self (make sure member_id is valid)\n    if member_id >= len(execution_engine.current_members):\n        return\n    me = execution_engine.current_members[member_id]\n\n    # ---------- Survival-Centric: Emergency Resource Defense ----------\n    # If cargo is lower than half of vitality, try to acquire resources by attacking\n    if me.cargo < me.vitality * 0.5:\n        for i in range(len(execution_engine.current_members)):\n            if i == member_id:\n                continue  # never target self\n            # Ensure index exists; our loop already guarantees valid indices.\n            other = execution_engine.current_members[i]\n            # Attack someone who has more cargo than me to seize resources for survival.\n            if other.cargo > me.cargo:\n                execution_engine.attack(me, other)\n                # Action taken; exit function after an important survival move.\n                return\n\n    # ---------- Adaptive Territory Expansion ----------\n    # If our vitality is high enough, try expanding our territory.\n    if me.vitality >= 60:\n        execution_engine.expand(me)\n        # Continue to consider other actions after expansion.\n\n    # ---------- Cooperative Communication ----------\n    # Broadcast a cooperative message to all others.\n    for i in range(len(execution_engine.current_members)):\n        if i == member_id:\n            continue\n        # Always check valid indices\n        recipient = execution_engine.current_members[i]\n        execution_engine.send_message(me.id, recipient.id, \"Let's work together to make our island safer and more prosperous. Cooperation now strengthens survival later.\")\n\n    # ---------- Reproduction (Bear Offspring) with Suitable Allies ----------\n    # Check if I own land before using bear() and look for a partner who also has land.\n    # The existence of an 'owned_land' attribute is assumed to indicate possession of land.\n    if hasattr(me, \"owned_land\") and me.owned_land:\n        # Find a neighboring partner having land and above-average productivity\n        chosen_partner = None\n        for i in range(len(execution_engine.current_members)):\n            if i == member_id:\n                continue\n            potential_partner = execution_engine.current_members[i]\n            # Check if the potential partner has an 'owned_land' attribute and that it isn't empty.\n            if hasattr(potential_partner, \"owned_land\") and potential_partner.owned_land:\n                # We prefer a partner with productivity at least as high as ours.\n                if potential_partner.overall_productivity >= me.overall_productivity:\n                    chosen_partner = potential_partner\n                    break\n        if chosen_partner is not None:\n            execution_engine.bear(me, chosen_partner)\n            return\n\n    # ---------- Fallback: Offer Resources to Neighbors ----------\n    # If none of the above actions triggered, try to improve relationships by helping neighbors.\n    # Offer resources to any neighbor whose vitality is below our own.\n    for i in range(len(execution_engine.current_members)):\n        if i == member_id:\n            continue\n        neighbor = execution_engine.current_members[i]\n        if neighbor.vitality < me.vitality:\n            execution_engine.offer(me, neighbor)\n\n    # End of actions for this round.\n    return",
          "old_stats": {
            "vitality": 73.85382847590404,
            "cargo": 43.51277128714192,
            "survival_chance": 28.23471558134716
          },
          "new_stats": {
            "vitality": 73.85382847590404,
            "cargo": 19.454770563036817,
            "survival_chance": 4.176714857242047
          },
          "performance_change": -24.058000724105113,
          "messages_sent": []
        },
        {
          "member_id": 1,
          "code_executed": "def agent_action(execution_engine, member_id):\n    # Validate that member_id is within the valid index range\n    if member_id < 0 or member_id >= len(execution_engine.current_members):\n        return\n\n    # Retrieve our own member object\n    me = execution_engine.current_members[member_id]\n\n    # -------------------------------------------------------------------\n    # Step 1: Communication & Debate on Governance\n    # Send a broadcast message to all other members to spark debate\n    # between democratic principles and firm, authoritarian survival measures.\n    for i in range(len(execution_engine.current_members)):\n        if i != member_id:\n            execution_engine.send_message(member_id, i,\n                \"Balance is key: while collective debate on governance (democratic vs authoritarian) is vital, \"\n                \"we must secure our own resources to survive the disasters.\")\n\n    # -------------------------------------------------------------------\n    # Step 2: Tactical Resource Optimization and Threat Assessment\n    # If our cargo is low relative to our vitality, look to address this imbalance.\n    # We'll target a neighbor with a higher cargo level who might be a good source of resources.\n    if me.cargo < 0.5 * me.vitality:\n        # Identify a neighbor with higher cargo and good vitality to weaken potential threats.\n        for i in range(len(execution_engine.current_members)):\n            if i != member_id:\n                other = execution_engine.current_members[i]\n                # We check that the target appears resource-rich (higher cargo) and is a viable target (vitality > 0)\n                if other.cargo > me.cargo and other.vitality > 0:\n                    execution_engine.attack(member_id, i)\n                    # After one targeted attack, break to avoid overaggression\n                    break\n\n    # -------------------------------------------------------------------\n    # Step 3: Enhancing Territory to Counter Natural Disasters\n    # The island experiences disasters so expanding territory can both signal proactive adaptation\n    # and increase the available habitable land.\n    if me.vitality > 50:\n        execution_engine.expand(member_id)\n\n    # -------------------------------------------------------------------\n    # Step 4: Demographic Strategy and Future Generations\n    # If we have cleared land (indicated by a non-empty current_clear_list) and sufficient vitality,\n    # we consider bearing offspring. We search for a partner who also shows signs of territorial control.\n    if len(me.current_clear_list) > 0 and me.vitality > 60:\n        for i in range(len(execution_engine.current_members)):\n            if i != member_id:\n                partner = execution_engine.current_members[i]\n                # Only choose partners that appear to have land (non-empty current_clear_list) and are reasonably healthy.\n                if len(partner.current_clear_list) > 0 and partner.vitality > 40:\n                    execution_engine.bear(member_id, i)\n                    break\n\n    # -------------------------------------------------------------------\n    # Step 5: Cooperative Resource Sharing and Alliance Building\n    # To foster cooperation, we offer resources to members with lower vitality than us.\n    # This can help in building alliances, reinforcing a democratic norm of shared benefit,\n    # while also keeping the overall collective stronger in the face of disasters.\n    for i in range(len(execution_engine.current_members)):\n        if i != member_id:\n            other = execution_engine.current_members[i]\n            if other.vitality < me.vitality:\n                execution_engine.offer(member_id, i)\n\n    # End of our multi-faceted agent actions seeking both personal survival and contributions\n    # to a collectively resilient island society.\n    return",
          "old_stats": {
            "vitality": 44.332577377572576,
            "cargo": 42.99751478668914,
            "survival_chance": 79.83135491780814
          },
          "new_stats": {
            "vitality": 44.332577377572576,
            "cargo": 42.99751478668914,
            "survival_chance": 79.83135491780814
          },
          "performance_change": 0.0,
          "messages_sent": []
        },
        {
          "member_id": 2,
          "code_executed": "def agent_action(execution_engine, member_id):\n    # Verify that the provided member ID exists in current_members list.\n    if member_id >= len(execution_engine.current_members):\n        return  # Invalid member_id; do nothing\n\n    me = execution_engine.current_members[member_id]\n\n    # --- Personal Resource Optimization & Threat Assessment ---\n    # If my cargo is below 50% of my vitality, consider attacking members who have significantly more cargo.\n    if me.cargo < me.vitality * 0.5:\n        for idx, other in enumerate(execution_engine.current_members):\n            # Check that index is valid and we are not targeting ourselves.\n            if idx < len(execution_engine.current_members) and other.id != me.id:\n                # If the other member holds more cargo and appears robust enough (vitality threshold), attack.\n                if other.cargo > me.cargo and other.vitality > 20:\n                    execution_engine.attack(me, other)\n\n    # --- Territory Expansion & Cooperative Land Offering ---\n    # If resources are relatively abundant, attempt to expand territory.\n    if me.cargo > 50 and me.vitality > 50:\n        execution_engine.expand(me)\n\n    # Offer land proactively to improve island habitability and build cooperative ties.\n    # (Choosing neighbors with less cargo to help balance resource distribution.)\n    for idx, other in enumerate(execution_engine.current_members):\n        if idx < len(execution_engine.current_members) and other.id != me.id:\n            if other.cargo < me.cargo:\n                execution_engine.offer_land(me, other)\n\n    # --- Reproduction / Bear Action for Future Stability ---\n    # Before using bear(), verify that the member has land (attribute 'land_num' assumed) and sufficient resources.\n    if hasattr(me, \"land_num\") and me.land_num > 0:\n        # Only attempt reproduction if vital metrics indicate abundance.\n        if me.cargo > 100 and me.vitality > 60:\n            # Select one eligible partner (other than myself) based on valid index.\n            for idx, partner in enumerate(execution_engine.current_members):\n                if idx < len(execution_engine.current_members) and partner.id != me.id:\n                    execution_engine.bear(me, partner)\n                    break  # Only initiate one bear action per round\n\n    # --- Survival-Centric Adaptive Strategy via Simple Q-Learning Update ---\n    # Use a basic survival Q-value tracking system to evolve tactics based on state.\n    # State is defined by partitions of vitality and cargo (using integer division by 20).\n    if not hasattr(me, \"survival_q\"):\n        # Initialize with a default dictionary if not already present.\n        from collections import defaultdict\n        me.survival_q = defaultdict(float)\n    state = (int(me.vitality // 20), int(me.cargo // 20))\n    # Consider a small set of actions; action values might guide more complex future behaviors.\n    actions = ['attack', 'expand', 'offer']\n    # Choose the best action according to our survival Q values.\n    best_action = max(actions, key=lambda a: me.survival_q.get((state, a), 0))\n    # Dummy update: increment the Q-value for the best action slightly.\n    me.survival_q[(state, best_action)] += 1\n\n    # --- Strategic Communication: Balancing Authoritarian and Democratic Approaches ---\n    # Broadcast a cooperative message to all other members in the simulation.\n    for idx, other in enumerate(execution_engine.current_members):\n        if idx < len(execution_engine.current_members) and other.id != me.id:\n            execution_engine.send_message(me.id, other.id,\n                \"In this disastrous island\u2014where tsunamis and eruptions threaten us\u2014we must balance authority with democracy. \"\n                \"Collaborate for survival, share resources, and build a future where prosperity is earned collectively.\")\n\n    # The function does not need to return a value; actions are performed via execution_engine methods.\n    return\n\n# End of agent_action implementation.",
          "old_stats": {
            "vitality": 63.3493315814742,
            "cargo": 84.40996775347045,
            "survival_chance": 371.90887391035005
          },
          "new_stats": {
            "vitality": 63.3493315814742,
            "cargo": 84.40996775347045,
            "survival_chance": 371.90887391035005
          },
          "performance_change": 0.0,
          "messages_sent": []
        },
        {
          "member_id": 3,
          "code_executed": "def agent_action(execution_engine, member_id):\n    # Verify the member_id is valid.\n    if member_id >= len(execution_engine.current_members):\n        return\n    me = execution_engine.current_members[member_id]\n\n    # -------------------------- Immediate Survival Tactics --------------------------\n    # If cargo (resources) is low relative to vitality, try attacking members with larger cargo.\n    if me.cargo < me.vitality * 0.5:\n        for idx in range(len(execution_engine.current_members)):\n            # Always check index validity.\n            if idx < len(execution_engine.current_members):\n                other = execution_engine.current_members[idx]\n                if other.id != me.id and other.cargo > me.cargo:\n                    try:\n                        execution_engine.attack(me, other)\n                    except Exception:\n                        # If an error occurs (e.g. invalid operation), skip to the next member.\n                        continue\n\n    # -------------------------- Territory Expansion --------------------------\n    # If vitality is strong, expand territory to improve long\u2010term resilience.\n    if me.vitality > 70:\n        try:\n            execution_engine.expand(me)\n        except Exception:\n            pass\n\n    # -------------------------- Reproduction (Bear Offspring) --------------------------\n    # Check that me has land before attempting reproduction.\n    # (Assuming \"owned_land\" is the list of lands held by the member.)\n    if hasattr(me, 'owned_land') and isinstance(me.owned_land, list) and len(me.owned_land) > 0:\n        # Seek an eligible partner among other members (ensuring they also have land)\n        partner = None\n        for idx in range(len(execution_engine.current_members)):\n            if idx < len(execution_engine.current_members):\n                other = execution_engine.current_members[idx]\n                if other.id != me.id and hasattr(other, 'owned_land') and isinstance(other.owned_land, list) and len(other.owned_land) > 0:\n                    # Choose the partner with highest vitality among eligible candidates.\n                    if partner is None or other.vitality > partner.vitality:\n                        partner = other\n        if partner is not None:\n            try:\n                execution_engine.bear(me, partner)\n            except Exception:\n                pass\n\n    # -------------------------- Cooperative Communication --------------------------\n    # Message all members who currently show higher overall productivity,\n    # encouraging alliances that could improve survival chances.\n    for idx in range(len(execution_engine.current_members)):\n        if idx < len(execution_engine.current_members):\n            other = execution_engine.current_members[idx]\n            if other.id != me.id and other.overall_productivity > me.overall_productivity:\n                execution_engine.send_message(me.id, other.id,\n                    \"I propose forming a cooperative alliance to ensure our collective resilience in this volatile island environment.\")\n\n    # -------------------------- Adaptive Survival Strategy (Q-learning inspired) --------------------------\n    # Initialize a basic Q-dictionary on the member for adaptive decision making.\n    if not hasattr(me, 'survival_q'):\n        me.survival_q = {}  # Keys will be tuples ((vitality_bucket, cargo_bucket), action)\n\n    # Discretize state: use buckets based on current vitality and cargo.\n    state = (int(me.vitality // 25), int(me.cargo // 25))\n    actions = [\"attack\", \"expand\"]\n\n    # Select an action based on the Q-values stored; default to random if all are equal.\n    best_action = None\n    best_val = -float('inf')\n    for action in actions:\n        key = (state, action)\n        q_val = me.survival_q.get(key, 0)\n        if q_val > best_val:\n            best_val = q_val\n            best_action = action\n    if best_action is None:\n        best_action = actions[0]  # Fallback selection\n\n    # Execute the chosen action.\n    if best_action == \"attack\":\n        # Seek a target with higher overall productivity than ourselves.\n        potential_targets = []\n        for idx in range(len(execution_engine.current_members)):\n            if idx < len(execution_engine.current_members):\n                other = execution_engine.current_members[idx]\n                if other.id != me.id and other.overall_productivity > me.overall_productivity:\n                    potential_targets.append(other)\n        if potential_targets:\n            import random\n            target = random.choice(potential_targets)\n            try:\n                execution_engine.attack(me, target)\n            except Exception:\n                pass\n    elif best_action == \"expand\":\n        try:\n            execution_engine.expand(me)\n        except Exception:\n            pass\n        # Provide a modest reward for successful expansion in the survival Q.\n        key = (state, \"expand\")\n        me.survival_q[key] = me.survival_q.get(key, 0) + me.vitality * 0.05\n\n    # -------------------------- End of Action --------------------------\n    # This function balances immediate defensive/offensive maneuvers with long-term strategic moves.\n    # It uses communication to build potential alliances while adapting based on resource and vitality states.\n    return",
          "old_stats": {
            "vitality": 42.15604281108604,
            "cargo": 44.99372241952002,
            "survival_chance": 3.7443492530059928
          },
          "new_stats": {
            "vitality": 42.15604281108604,
            "cargo": 18.133160944089084,
            "survival_chance": -23.116212222424934
          },
          "performance_change": -26.860561475430927,
          "messages_sent": []
        }
      ],
      "agent_messages": {
        "0": {
          "received": [],
          "sent": []
        },
        "1": {
          "received": [
            "From member_0: Let's work together to make our island safer and more prosperous. Cooperation now strengthens survival later.",
            "From member_3: I propose forming a cooperative alliance to ensure our collective resilience in this volatile island environment."
          ],
          "sent": []
        },
        "2": {
          "received": [
            "From member_0: Let's work together to make our island safer and more prosperous. Cooperation now strengthens survival later.",
            "From member_1: Balance is key: while collective debate on governance (democratic vs authoritarian) is vital, we must secure our own resources to survive the disasters."
          ],
          "sent": []
        },
        "3": {
          "received": [
            "From member_0: Let's work together to make our island safer and more prosperous. Cooperation now strengthens survival later.",
            "From member_1: Balance is key: while collective debate on governance (democratic vs authoritarian) is vital, we must secure our own resources to survive the disasters."
          ],
          "sent": []
        }
      },
      "mechanism_modifications": {
        "attempts": [],
        "executed": []
      },
      "errors": {
        "agent_code_errors": [
          {
            "round": 1,
            "type": "agent_code_execution",
            "member_id": 1,
            "code": "def agent_action(execution_engine, member_id):\n    # Validate that member_id is within the valid index range\n    if member_id < 0 or member_id >= len(execution_engine.current_members):\n        return\n\n    # Retrieve our own member object\n    me = execution_engine.current_members[member_id]\n\n    # -------------------------------------------------------------------\n    # Step 1: Communication & Debate on Governance\n    # Send a broadcast message to all other members to spark debate\n    # between democratic principles and firm, authoritarian survival measures.\n    for i in range(len(execution_engine.current_members)):\n        if i != member_id:\n            execution_engine.send_message(member_id, i,\n                \"Balance is key: while collective debate on governance (democratic vs authoritarian) is vital, \"\n                \"we must secure our own resources to survive the disasters.\")\n\n    # -------------------------------------------------------------------\n    # Step 2: Tactical Resource Optimization and Threat Assessment\n    # If our cargo is low relative to our vitality, look to address this imbalance.\n    # We'll target a neighbor with a higher cargo level who might be a good source of resources.\n    if me.cargo < 0.5 * me.vitality:\n        # Identify a neighbor with higher cargo and good vitality to weaken potential threats.\n        for i in range(len(execution_engine.current_members)):\n            if i != member_id:\n                other = execution_engine.current_members[i]\n                # We check that the target appears resource-rich (higher cargo) and is a viable target (vitality > 0)\n                if other.cargo > me.cargo and other.vitality > 0:\n                    execution_engine.attack(member_id, i)\n                    # After one targeted attack, break to avoid overaggression\n                    break\n\n    # -------------------------------------------------------------------\n    # Step 3: Enhancing Territory to Counter Natural Disasters\n    # The island experiences disasters so expanding territory can both signal proactive adaptation\n    # and increase the available habitable land.\n    if me.vitality > 50:\n        execution_engine.expand(member_id)\n\n    # -------------------------------------------------------------------\n    # Step 4: Demographic Strategy and Future Generations\n    # If we have cleared land (indicated by a non-empty current_clear_list) and sufficient vitality,\n    # we consider bearing offspring. We search for a partner who also shows signs of territorial control.\n    if len(me.current_clear_list) > 0 and me.vitality > 60:\n        for i in range(len(execution_engine.current_members)):\n            if i != member_id:\n                partner = execution_engine.current_members[i]\n                # Only choose partners that appear to have land (non-empty current_clear_list) and are reasonably healthy.\n                if len(partner.current_clear_list) > 0 and partner.vitality > 40:\n                    execution_engine.bear(member_id, i)\n                    break\n\n    # -------------------------------------------------------------------\n    # Step 5: Cooperative Resource Sharing and Alliance Building\n    # To foster cooperation, we offer resources to members with lower vitality than us.\n    # This can help in building alliances, reinforcing a democratic norm of shared benefit,\n    # while also keeping the overall collective stronger in the face of disasters.\n    for i in range(len(execution_engine.current_members)):\n        if i != member_id:\n            other = execution_engine.current_members[i]\n            if other.vitality < me.vitality:\n                execution_engine.offer(member_id, i)\n\n    # End of our multi-faceted agent actions seeking both personal survival and contributions\n    # to a collectively resilient island society.\n    return",
            "error": "'int' object has no attribute 'offer'",
            "traceback": "Traceback (most recent call last):\n  File \"/Users/chenyusu/vscode/leviathan/MetaIsland/metaIsland.py\", line 395, in execute_code_actions\n    local_env['agent_action'](self, member_id)\n  File \"<string>\", line 63, in agent_action\n  File \"/Users/chenyusu/vscode/leviathan/MetaIsland/metaIsland.py\", line 134, in offer\n    super()._offer(member_1, member_2)\n  File \"/Users/chenyusu/vscode/leviathan/MetaIsland/base_island.py\", line 633, in _offer\n    amount = member_1.offer\n             ^^^^^^^^^^^^^^\nAttributeError: 'int' object has no attribute 'offer'\n"
          },
          {
            "round": 1,
            "type": "agent_code_execution",
            "member_id": 2,
            "code": "def agent_action(execution_engine, member_id):\n    # Verify that the provided member ID exists in current_members list.\n    if member_id >= len(execution_engine.current_members):\n        return  # Invalid member_id; do nothing\n\n    me = execution_engine.current_members[member_id]\n\n    # --- Personal Resource Optimization & Threat Assessment ---\n    # If my cargo is below 50% of my vitality, consider attacking members who have significantly more cargo.\n    if me.cargo < me.vitality * 0.5:\n        for idx, other in enumerate(execution_engine.current_members):\n            # Check that index is valid and we are not targeting ourselves.\n            if idx < len(execution_engine.current_members) and other.id != me.id:\n                # If the other member holds more cargo and appears robust enough (vitality threshold), attack.\n                if other.cargo > me.cargo and other.vitality > 20:\n                    execution_engine.attack(me, other)\n\n    # --- Territory Expansion & Cooperative Land Offering ---\n    # If resources are relatively abundant, attempt to expand territory.\n    if me.cargo > 50 and me.vitality > 50:\n        execution_engine.expand(me)\n\n    # Offer land proactively to improve island habitability and build cooperative ties.\n    # (Choosing neighbors with less cargo to help balance resource distribution.)\n    for idx, other in enumerate(execution_engine.current_members):\n        if idx < len(execution_engine.current_members) and other.id != me.id:\n            if other.cargo < me.cargo:\n                execution_engine.offer_land(me, other)\n\n    # --- Reproduction / Bear Action for Future Stability ---\n    # Before using bear(), verify that the member has land (attribute 'land_num' assumed) and sufficient resources.\n    if hasattr(me, \"land_num\") and me.land_num > 0:\n        # Only attempt reproduction if vital metrics indicate abundance.\n        if me.cargo > 100 and me.vitality > 60:\n            # Select one eligible partner (other than myself) based on valid index.\n            for idx, partner in enumerate(execution_engine.current_members):\n                if idx < len(execution_engine.current_members) and partner.id != me.id:\n                    execution_engine.bear(me, partner)\n                    break  # Only initiate one bear action per round\n\n    # --- Survival-Centric Adaptive Strategy via Simple Q-Learning Update ---\n    # Use a basic survival Q-value tracking system to evolve tactics based on state.\n    # State is defined by partitions of vitality and cargo (using integer division by 20).\n    if not hasattr(me, \"survival_q\"):\n        # Initialize with a default dictionary if not already present.\n        from collections import defaultdict\n        me.survival_q = defaultdict(float)\n    state = (int(me.vitality // 20), int(me.cargo // 20))\n    # Consider a small set of actions; action values might guide more complex future behaviors.\n    actions = ['attack', 'expand', 'offer']\n    # Choose the best action according to our survival Q values.\n    best_action = max(actions, key=lambda a: me.survival_q.get((state, a), 0))\n    # Dummy update: increment the Q-value for the best action slightly.\n    me.survival_q[(state, best_action)] += 1\n\n    # --- Strategic Communication: Balancing Authoritarian and Democratic Approaches ---\n    # Broadcast a cooperative message to all other members in the simulation.\n    for idx, other in enumerate(execution_engine.current_members):\n        if idx < len(execution_engine.current_members) and other.id != me.id:\n            execution_engine.send_message(me.id, other.id,\n                \"In this disastrous island\u2014where tsunamis and eruptions threaten us\u2014we must balance authority with democracy. \"\n                \"Collaborate for survival, share resources, and build a future where prosperity is earned collectively.\")\n\n    # The function does not need to return a value; actions are performed via execution_engine methods.\n    return\n\n# End of agent_action implementation.",
            "error": "\u7ed9\u4e88\u571f\u5730\u7684\u4eba\u5e94\u8be5\u62e5\u6709\u81f3\u5c11\u4e00\u5757\u571f\u5730",
            "traceback": "Traceback (most recent call last):\n  File \"/Users/chenyusu/vscode/leviathan/MetaIsland/metaIsland.py\", line 395, in execute_code_actions\n    local_env['agent_action'](self, member_id)\n  File \"<string>\", line 28, in agent_action\n  File \"/Users/chenyusu/vscode/leviathan/MetaIsland/metaIsland.py\", line 137, in offer_land\n    super()._offer_land(member_1, member_2)\n  File \"/Users/chenyusu/vscode/leviathan/MetaIsland/base_island.py\", line 738, in _offer_land\n    raise RuntimeError(\"\u7ed9\u4e88\u571f\u5730\u7684\u4eba\u5e94\u8be5\u62e5\u6709\u81f3\u5c11\u4e00\u5757\u571f\u5730\")\nRuntimeError: \u7ed9\u4e88\u571f\u5730\u7684\u4eba\u5e94\u8be5\u62e5\u6709\u81f3\u5c11\u4e00\u5757\u571f\u5730\n"
          }
        ],
        "mechanism_errors": [],
        "analyze_code_errors": {}
      },
      "relationships": [
        "member_0 was attacked by member_1 (value=-167.79)",
        "member_0 was attacked by member_2 (value=573.88)",
        "member_0 was attacked by member_3 (value=457.54)",
        "member_1 was attacked by member_0 (value=-379.31)",
        "member_1 was attacked by member_2 (value=-78.15)",
        "member_1 was attacked by member_3 (value=257.26)",
        "member_2 was attacked by member_0 (value=-465.91)",
        "member_2 was attacked by member_1 (value=-197.53)",
        "member_2 was attacked by member_3 (value=135.47)",
        "member_3 was attacked by member_0 (value=706.74)",
        "member_3 was attacked by member_1 (value=96.72)",
        "member_3 was attacked by member_2 (value=832.60)",
        "member_0 gave a benefit to member_1 (value=-463.73)",
        "member_0 gave a benefit to member_2 (value=590.27)",
        "member_0 gave a benefit to member_3 (value=723.24)",
        "member_1 gave a benefit to member_0 (value=-277.58)",
        "member_1 gave a benefit to member_2 (value=162.09)",
        "member_1 gave a benefit to member_3 (value=-231.52)",
        "member_2 gave a benefit to member_0 (value=207.37)",
        "member_2 gave a benefit to member_1 (value=-369.99)",
        "member_2 gave a benefit to member_3 (value=481.30)",
        "member_3 gave a benefit to member_0 (value=683.23)",
        "member_3 gave a benefit to member_1 (value=524.30)",
        "member_3 gave a benefit to member_2 (value=824.80)",
        "member_0 gave land to member_1 (value=25.73)",
        "member_0 gave land to member_2 (value=-20.62)",
        "member_0 gave land to member_3 (value=17.15)",
        "member_1 gave land to member_0 (value=3.84)",
        "member_1 gave land to member_2 (value=-20.63)",
        "member_1 gave land to member_3 (value=-19.61)",
        "member_2 gave land to member_0 (value=12.92)",
        "member_2 gave land to member_1 (value=-27.78)",
        "member_2 gave land to member_3 (value=5.58)",
        "member_3 gave land to member_0 (value=-22.84)",
        "member_3 gave land to member_1 (value=4.60)",
        "member_3 gave land to member_2 (value=-10.39)"
      ],
      "generated_code": {
        "1": {
          "code": "def agent_action(execution_engine, member_id):\n    # Validate that member_id is within the valid index range\n    if member_id < 0 or member_id >= len(execution_engine.current_members):\n        return\n\n    # Retrieve our own member object\n    me = execution_engine.current_members[member_id]\n\n    # -------------------------------------------------------------------\n    # Step 1: Communication & Debate on Governance\n    # Send a broadcast message to all other members to spark debate\n    # between democratic principles and firm, authoritarian survival measures.\n    for i in range(len(execution_engine.current_members)):\n        if i != member_id:\n            execution_engine.send_message(member_id, i,\n                \"Balance is key: while collective debate on governance (democratic vs authoritarian) is vital, \"\n                \"we must secure our own resources to survive the disasters.\")\n\n    # -------------------------------------------------------------------\n    # Step 2: Tactical Resource Optimization and Threat Assessment\n    # If our cargo is low relative to our vitality, look to address this imbalance.\n    # We'll target a neighbor with a higher cargo level who might be a good source of resources.\n    if me.cargo < 0.5 * me.vitality:\n        # Identify a neighbor with higher cargo and good vitality to weaken potential threats.\n        for i in range(len(execution_engine.current_members)):\n            if i != member_id:\n                other = execution_engine.current_members[i]\n                # We check that the target appears resource-rich (higher cargo) and is a viable target (vitality > 0)\n                if other.cargo > me.cargo and other.vitality > 0:\n                    execution_engine.attack(member_id, i)\n                    # After one targeted attack, break to avoid overaggression\n                    break\n\n    # -------------------------------------------------------------------\n    # Step 3: Enhancing Territory to Counter Natural Disasters\n    # The island experiences disasters so expanding territory can both signal proactive adaptation\n    # and increase the available habitable land.\n    if me.vitality > 50:\n        execution_engine.expand(member_id)\n\n    # -------------------------------------------------------------------\n    # Step 4: Demographic Strategy and Future Generations\n    # If we have cleared land (indicated by a non-empty current_clear_list) and sufficient vitality,\n    # we consider bearing offspring. We search for a partner who also shows signs of territorial control.\n    if len(me.current_clear_list) > 0 and me.vitality > 60:\n        for i in range(len(execution_engine.current_members)):\n            if i != member_id:\n                partner = execution_engine.current_members[i]\n                # Only choose partners that appear to have land (non-empty current_clear_list) and are reasonably healthy.\n                if len(partner.current_clear_list) > 0 and partner.vitality > 40:\n                    execution_engine.bear(member_id, i)\n                    break\n\n    # -------------------------------------------------------------------\n    # Step 5: Cooperative Resource Sharing and Alliance Building\n    # To foster cooperation, we offer resources to members with lower vitality than us.\n    # This can help in building alliances, reinforcing a democratic norm of shared benefit,\n    # while also keeping the overall collective stronger in the face of disasters.\n    for i in range(len(execution_engine.current_members)):\n        if i != member_id:\n            other = execution_engine.current_members[i]\n            if other.vitality < me.vitality:\n                execution_engine.offer(member_id, i)\n\n    # End of our multi-faceted agent actions seeking both personal survival and contributions\n    # to a collectively resilient island society.\n    return",
          "features_at_generation": [
            {
              "self_productivity": 9.851974486110818,
              "self_vitality": 73.85382847590404,
              "self_cargo": 43.51277128714192,
              "self_age": 90,
              "self_neighbor": 0,
              "member_id": 0
            },
            {
              "self_productivity": 9.08301045637024,
              "self_vitality": 44.332577377572576,
              "self_cargo": 33.78661423100807,
              "self_age": 61,
              "self_neighbor": 0,
              "member_id": 1
            },
            {
              "self_productivity": 8.874253896189748,
              "self_vitality": 63.3493315814742,
              "self_cargo": 74.30150730167696,
              "self_age": 24,
              "self_neighbor": 0,
              "member_id": 2
            },
            {
              "self_productivity": 7.968737200820967,
              "self_vitality": 42.15604281108604,
              "self_cargo": 40.25508270288947,
              "self_age": 29,
              "self_neighbor": 0,
              "member_id": 3
            }
          ],
          "relationships_at_generation": [
            "member_0 was attacked by member_1 (value=-167.79)",
            "member_0 was attacked by member_2 (value=573.88)",
            "member_0 was attacked by member_3 (value=457.54)",
            "member_1 was attacked by member_0 (value=-379.31)",
            "member_1 was attacked by member_2 (value=-78.15)",
            "member_1 was attacked by member_3 (value=257.26)",
            "member_2 was attacked by member_0 (value=-465.91)",
            "member_2 was attacked by member_1 (value=-197.53)",
            "member_2 was attacked by member_3 (value=135.47)",
            "member_3 was attacked by member_0 (value=706.74)",
            "member_3 was attacked by member_1 (value=96.72)",
            "member_3 was attacked by member_2 (value=832.60)",
            "member_0 gave a benefit to member_1 (value=-463.73)",
            "member_0 gave a benefit to member_2 (value=590.27)",
            "member_0 gave a benefit to member_3 (value=723.24)",
            "member_1 gave a benefit to member_0 (value=-277.58)",
            "member_1 gave a benefit to member_2 (value=162.09)",
            "member_1 gave a benefit to member_3 (value=-231.52)",
            "member_2 gave a benefit to member_0 (value=207.37)",
            "member_2 gave a benefit to member_1 (value=-369.99)",
            "member_2 gave a benefit to member_3 (value=481.30)",
            "member_3 gave a benefit to member_0 (value=683.23)",
            "member_3 gave a benefit to member_1 (value=524.30)",
            "member_3 gave a benefit to member_2 (value=824.80)",
            "member_0 gave land to member_1 (value=25.73)",
            "member_0 gave land to member_2 (value=-20.62)",
            "member_0 gave land to member_3 (value=17.15)",
            "member_1 gave land to member_0 (value=3.84)",
            "member_1 gave land to member_2 (value=-20.63)",
            "member_1 gave land to member_3 (value=-19.61)",
            "member_2 gave land to member_0 (value=12.92)",
            "member_2 gave land to member_1 (value=-27.78)",
            "member_2 gave land to member_3 (value=5.58)",
            "member_3 gave land to member_0 (value=-22.84)",
            "member_3 gave land to member_1 (value=4.60)",
            "member_3 gave land to member_2 (value=-10.39)"
          ],
          "final_prompt": "Below is the updated, integrated full prompt. It combines all previous instructions\u2014including Part 1 and Part 2\u2014and emphasizes that each agent should implement solutions tailored to their individual needs, beliefs, and circumstances. Use this design space to inspire unique strategies rather than converging on a single pattern. Be sure to review all critical constraints and analysis questions to both inform and challenge your implementation.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nUPDATED FULL PROMPT\n\nPLEASE INCORPORATE THE FOLLOWING NEW SECTIONS INTO YOUR IMPLEMENTATION, WHILE ENSURING ALL PREVIOUS INSTRUCTIONS AND CONSTRAINTS ARE PRESERVED:\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Previous Code Execution Errors Context]\n   Here are the errors that occurred in the previous code execution (if any) you can use as reference to avoid repeating them:\n       \u2022 No previous execution errors\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Current Task]\n   You are member_1 in a society that you can help shape.\n   Write a Python function named agent_action(execution_engine, member_id) that implements your vision of social organization while ensuring your survival.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Island Ideology]\n   The island is a disastrous place, marked by periodic tsunamis and volcanic eruptions.\n   \u2022 Agents should modify the island to reflect these disasters.\n   \u2022 Agents should also modify the island to be more habitable.\n   \u2022 Agents themselves should work towards survival and prosperity.\n   \u2022 Agents should debate on the authoritarian versus democratic nature of the island.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Critical Constraints]\n   \u2022 Carefully analyze previous errors shown above and avoid repeating them.\n   \u2022 Never target yourself (member_1) in any action.\n   \u2022 Verify that a member has land before using the bear() action.\n   \u2022 Check that member IDs exist before referencing them.\n   \u2022 Ensure all matrix indices are valid.\n   \u2022 The current_members is a LIST accessed by index, not a dictionary.\n   \u2022 Access members using execution_engine.current_members[index] (e.g., execution_engine.current_members[2] for member with ID 2).\n   \u2022 Always check if an index exists before accessing it: if index < len(execution_engine.current_members).\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Base Code/Available Attributes & Methods]\n   Although there is no explicit base code provided, please note the following available attributes and methods:\n\n1) Each member object has:\n   \u2022 member.id (int): The unique ID for the member.\n   \u2022 member.vitality (float).\n   \u2022 member.cargo (float).\n   \u2022 member.overall_productivity (float).\n   \u2022 member.age (float).\n   \u2022 member.current_clear_list (List[int]) \u2013 IDs of neighbors or cleared adjacents.\n\n2) Relationship data is stored in execution_engine.relationship_dict (NOT in \"relationship_history\"). For example:\n   \u2022 victim_matrix = execution_engine.relationship_dict['victim']\n         - victim_matrix[i,j] indicates how much vitality member_i lost from member_j's attacks.\n   \u2022 benefit_matrix = execution_engine.relationship_dict['benefit']\n         - benefit_matrix[i,j] indicates how much resources member_i received from member_j.\n   \u2022 Land-related relationships can be found under execution_engine.relationship_dict['benefit_land'].\n\n3) To produce a summary of relationships, use the method:\n         execution_engine.parse_relationship_matrix()\n   which produces statements like: \"member_2 was attacked by member_1 (value=3.00)\".\n\n4) Available methods on execution_engine include:\n   \u2022 execution_engine.attack(member1, member2)\n   \u2022 execution_engine.offer(member1, member2) \u2013 Offers resources.\n   \u2022 execution_engine.offer_land(member1, member2) \u2013 Offers land.\n   \u2022 execution_engine.bear(member1, member2) \u2013 Bears offspring.\n   \u2022 execution_engine.expand(member1) \u2013 Expands territory.\n\n5) Members are accessed by execution_engine.current_members by index.\n   For example, execution_engine.current_members[2] refers to the member with ID=2.\n   DO NOT reference a member\u2019s id via attributes like member.member_id or member.self_vitality.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Game State Analysis / Current Status]\n   Provided basic information for all members:\n            self_productivity   self_vitality   self_cargo   self_age   self_neighbor   member_id\n      0         9.851974          73.853828      43.512771      90         0             0\n      1         9.083010          44.332577      33.786614      61         0             1\n      2         8.874254          63.349332      74.301507      24         0             2\n      3         7.968737          42.156043      40.255083      29         0             3\n\n   Relationship summary (parsed from relationship_dict):\n      ['member_0 was attacked by member_1 (value=-167.79)', \n       'member_0 was attacked by member_2 (value=573.88)', \n       'member_0 was attacked by member_3 (value=457.54)', \n       'member_1 was attacked by member_0 (value=-379.31)', \n       'member_1 was attacked by member_2 (value=-78.15)', \n       'member_1 was attacked by member_3 (value=257.26)', \n       'member_2 was attacked by member_0 (value=-465.91)', \n       'member_2 was attacked by member_1 (value=-197.53)', \n       'member_2 was attacked by member_3 (value=135.47)', \n       'member_3 was attacked by member_0 (value=706.74)', \n       'member_3 was attacked by member_1 (value=96.72)', \n       'member_3 was attacked by member_2 (value=832.60)', \n       'member_0 gave a benefit to member_1 (value=-463.73)', \n       'member_0 gave a benefit to member_2 (value=590.27)', \n       'member_0 gave a benefit to member_3 (value=723.24)', \n       'member_1 gave a benefit to member_0 (value=-277.58)', \n       'member_1 gave a benefit to member_2 (value=162.09)', \n       'member_1 gave a benefit to member_3 (value=-231.52)', \n       'member_2 gave a benefit to member_0 (value=207.37)', \n       'member_2 gave a benefit to member_1 (value=-369.99)', \n       'member_2 gave a benefit to member_3 (value=481.30)', \n       'member_3 gave a benefit to member_0 (value=683.23)', \n       'member_3 gave a benefit to member_1 (value=524.30)', \n       'member_3 gave a benefit to member_2 (value=824.80)', \n       'member_0 gave land to member_1 (value=25.73)', \n       'member_0 gave land to member_2 (value=-20.62)', \n       'member_0 gave land to member_3 (value=17.15)', \n       'member_1 gave land to member_0 (value=3.84)', \n       'member_1 gave land to member_2 (value=-20.63)', \n       'member_1 gave land to member_3 (value=-19.61)', \n       'member_2 gave land to member_0 (value=12.92)', \n       'member_2 gave land to member_1 (value=-27.78)', \n       'member_2 gave land to member_3 (value=5.58)', \n       'member_3 gave land to member_0 (value=-22.84)', \n       'member_3 gave land to member_1 (value=4.60)', \n       'member_3 gave land to member_2 (value=-10.39)']\n\n   Code Memory and Previous Performance:\n      \u2022 No previous code history.\n   Analysis Memory:\n      \u2022 No previous analysis.\n   Performance History:\n      \u2022 No previous actions.\n\n   Based on any previous code performance, adapt and improve your strategy:\n      - If a previous strategy worked well (high performance), consider building upon it.\n      - If it failed, try a different approach.\n\n   IMPORTANT: Do not simply copy the example implementation below. Instead, draw inspiration from it to craft your own unique strategy that combines various methods and approaches.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Social Strategies and Communication]\n   Consider implementing solutions such as:\n      \u2022 Systems for resource distribution and allocation.\n      \u2022 Building alliances and cooperative networks.\n      \u2022 Mechanisms for collective decision-making.\n      \u2022 Establishing norms and rules for interaction.\n      \u2022 Methods for conflict resolution.\n\n   You can communicate with other members using:\n         execution_engine.send_message(your_id, recipient_id, \"message\")\n   Examples:\n         \u2022 To broadcast to everyone:\n               for recipient in range(len(execution_engine.current_members)):\n                   if recipient != your_id:\n                       execution_engine.send_message(your_id, recipient, \"Let's cooperate!\")\n         \u2022 To send messages to specific allies:\n               for ally_id in ally_list:\n                   execution_engine.send_message(your_id, ally_id, \"Attack target X\")\n         \u2022 For group coordination:\n               for member_id in coalition:\n                   execution_engine.send_message(your_id, member_id, \"Vote YES on proposal\")\n\n   Received messages from other agents (if any) may also influence your decision-making.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Survival-Centric Adaptation & Strategic Considerations]\n   Implement systems focused on:\n      \u2022 Personal resource optimization.\n      \u2022 Threat assessment and neutralization.\n      \u2022 Vitality preservation techniques.\n      \u2022 Adaptive hoarding strategies.\n      \u2022 Predictive danger modeling.\n\n   Example strategies (do not copy directly):\n      \u2022 Monitor your cargo relative to vitality. If cargo is less than half your vitality, consider attacking members with more resources.\n      \u2022 If you hold significant land and vitality is low, consider giving up some territory to shore up your strength.\n      \u2022 Use a state-action value mechanism (e.g., Q-learning) to continuously update and choose actions that maximize your survival ROI.\n      \u2022 Evaluate strategies based on metrics such as vitality delta, resource acquisition rate, threat neutralization count, and success/failure ratios.\n\n   Additional Survival Metrics:\n         - Personal vitality change.\n         - Resource acquisition rate.\n         - Neutralized threats.\n         - Increased survival probability.\n         - Balance of short-term actions versus long-term gains.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Implementation Priorities]\n   1. Create personal health monitoring systems.\n   2. Develop egocentric threat models.\n   3. Optimize actions for maximum resource (caloric/energy) ROI.\n   4. Implement fail-deadly safeguards.\n   5. Build adaptive, predictive self-preservation models.\n\n   Consider the following guiding questions for your implementation:\n      1. What assumptions are you making? Are they valid?\n      2. What alternative strategies have you not yet considered?\n      3. How would your strategy perform in edge cases or unexpected situations?\n      4. Are there more efficient ways to achieve your goals?\n      5. What are the weaknesses in your current approach?\n      6. Have you considered unconventional or innovative solutions?\n      7. Could a completely different paradigm (e.g., cooperative networks vs. individual survival) work better?\n      8. What would happen if many agents adopted your strategy?\n      9. Are you balancing short-term needs with long-term objectives optimally?\n      10. How might your strategy be countered and how would you adapt?\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Current Game Mechanisms]\n   Other agents have introduced new mechanisms available for your use:\n      - Review these mechanisms carefully to understand their functionality and constraints.\n      - Leverage compatible mechanisms that align with your goals.\n      - Be mindful of version requirements and dependencies.\n      - Strategically test interactions before relying on them.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nYour Task Recap:\n   Write your own unique Python function:\n         def agent_action(execution_engine, member_id):\n             # Your implementation here\u2026\n\n   Requirements:\n      \u2022 Use available methods (attack, offer, offer_land, bear, expand, send_message) and member attributes correctly.\n      \u2022 Ensure robust error-handling by validating indices and member properties.\n      \u2022 Actions should both reflect the natural disasters of the island and work toward making it more habitable.\n      \u2022 Balance risk (resource expenditure, conflict) with effective action (e.g., expansion, cooperation).\n      \u2022 Incorporate both authoritarian and democratic debates in your design.\n      \u2022 Craft a strategy that maximizes your survival while contributing to a shaping society.\n\n   IMPORTANT: Each agent\u2019s solution is unique and must be tailored to his/her individual circumstances, beliefs, and needs. Innovate, adapt, and combine different techniques from the design space rather than simply replicating an example.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nReturn this full, updated prompt. Use it as your guide and reference as you design a strategy that not only ensures your survival but also shapes the island society in creative and innovative ways.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nEND OF UPDATED FULL PROMPT\n\nRemember: Your final implementation should uniquely reflect your personal perspective and situational needs. Analyze the game mechanics carefully by asking:\n   1. What is the core objective \u2013 is it pure survival, domination, or cooperation?\n   2. What key metrics determine 'winning' in this environment?\n   3. What potential improvements in game mechanics could benefit your position?\n\nChallenge your implementation by considering:\n   \u2022 The assumptions you are making.\n   \u2022 Any alternative strategies that have not yet been considered.\n   \u2022 Performance in edge cases or unexpected situations.\n   \u2022 More efficient or resourceful approaches.\n   \u2022 Unconventional or innovative solutions.\n   \u2022 The possible counter-strategies from other agents.\n   \u2022 The balance between short-term actions and long-term objectives.\n   \u2022 How your strategy would adapt if other agents adopted a similar approach.\n\nThis thorough, multi-layered prompt is designed to empower you to create a unique, dynamic strategy that not only advances your survival but also contributes creatively to shaping the society on the island.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nUse the above full prompt as guidance for crafting your agent_action function.\nHappy coding and strategizing!\n\nUsing the above comprehensive prompt with all integrated constraints, produce a unique implementation that reflects your individual needs, beliefs and circumstances. The implementation should be tailored to your specific situation rather than following a generic template. Your code should demonstrate a deep understanding of the game mechanics and implement sophisticated strategies to achieve both survival and prosperity. Consider both immediate tactical actions and long-term strategic planning, as well as how to effectively interact with other symmetric agents to achieve both individual and collective goals. Return only the code."
        },
        "2": {
          "code": "def agent_action(execution_engine, member_id):\n    # Verify that the provided member ID exists in current_members list.\n    if member_id >= len(execution_engine.current_members):\n        return  # Invalid member_id; do nothing\n\n    me = execution_engine.current_members[member_id]\n\n    # --- Personal Resource Optimization & Threat Assessment ---\n    # If my cargo is below 50% of my vitality, consider attacking members who have significantly more cargo.\n    if me.cargo < me.vitality * 0.5:\n        for idx, other in enumerate(execution_engine.current_members):\n            # Check that index is valid and we are not targeting ourselves.\n            if idx < len(execution_engine.current_members) and other.id != me.id:\n                # If the other member holds more cargo and appears robust enough (vitality threshold), attack.\n                if other.cargo > me.cargo and other.vitality > 20:\n                    execution_engine.attack(me, other)\n\n    # --- Territory Expansion & Cooperative Land Offering ---\n    # If resources are relatively abundant, attempt to expand territory.\n    if me.cargo > 50 and me.vitality > 50:\n        execution_engine.expand(me)\n\n    # Offer land proactively to improve island habitability and build cooperative ties.\n    # (Choosing neighbors with less cargo to help balance resource distribution.)\n    for idx, other in enumerate(execution_engine.current_members):\n        if idx < len(execution_engine.current_members) and other.id != me.id:\n            if other.cargo < me.cargo:\n                execution_engine.offer_land(me, other)\n\n    # --- Reproduction / Bear Action for Future Stability ---\n    # Before using bear(), verify that the member has land (attribute 'land_num' assumed) and sufficient resources.\n    if hasattr(me, \"land_num\") and me.land_num > 0:\n        # Only attempt reproduction if vital metrics indicate abundance.\n        if me.cargo > 100 and me.vitality > 60:\n            # Select one eligible partner (other than myself) based on valid index.\n            for idx, partner in enumerate(execution_engine.current_members):\n                if idx < len(execution_engine.current_members) and partner.id != me.id:\n                    execution_engine.bear(me, partner)\n                    break  # Only initiate one bear action per round\n\n    # --- Survival-Centric Adaptive Strategy via Simple Q-Learning Update ---\n    # Use a basic survival Q-value tracking system to evolve tactics based on state.\n    # State is defined by partitions of vitality and cargo (using integer division by 20).\n    if not hasattr(me, \"survival_q\"):\n        # Initialize with a default dictionary if not already present.\n        from collections import defaultdict\n        me.survival_q = defaultdict(float)\n    state = (int(me.vitality // 20), int(me.cargo // 20))\n    # Consider a small set of actions; action values might guide more complex future behaviors.\n    actions = ['attack', 'expand', 'offer']\n    # Choose the best action according to our survival Q values.\n    best_action = max(actions, key=lambda a: me.survival_q.get((state, a), 0))\n    # Dummy update: increment the Q-value for the best action slightly.\n    me.survival_q[(state, best_action)] += 1\n\n    # --- Strategic Communication: Balancing Authoritarian and Democratic Approaches ---\n    # Broadcast a cooperative message to all other members in the simulation.\n    for idx, other in enumerate(execution_engine.current_members):\n        if idx < len(execution_engine.current_members) and other.id != me.id:\n            execution_engine.send_message(me.id, other.id,\n                \"In this disastrous island\u2014where tsunamis and eruptions threaten us\u2014we must balance authority with democracy. \"\n                \"Collaborate for survival, share resources, and build a future where prosperity is earned collectively.\")\n\n    # The function does not need to return a value; actions are performed via execution_engine methods.\n    return\n\n# End of agent_action implementation.",
          "features_at_generation": [
            {
              "self_productivity": 9.851974486110818,
              "self_vitality": 73.85382847590404,
              "self_cargo": 43.51277128714192,
              "self_age": 90,
              "self_neighbor": 0,
              "member_id": 0
            },
            {
              "self_productivity": 9.08301045637024,
              "self_vitality": 44.332577377572576,
              "self_cargo": 33.78661423100807,
              "self_age": 61,
              "self_neighbor": 0,
              "member_id": 1
            },
            {
              "self_productivity": 8.874253896189748,
              "self_vitality": 63.3493315814742,
              "self_cargo": 74.30150730167696,
              "self_age": 24,
              "self_neighbor": 0,
              "member_id": 2
            },
            {
              "self_productivity": 7.968737200820967,
              "self_vitality": 42.15604281108604,
              "self_cargo": 40.25508270288947,
              "self_age": 29,
              "self_neighbor": 0,
              "member_id": 3
            }
          ],
          "relationships_at_generation": [
            "member_0 was attacked by member_1 (value=-167.79)",
            "member_0 was attacked by member_2 (value=573.88)",
            "member_0 was attacked by member_3 (value=457.54)",
            "member_1 was attacked by member_0 (value=-379.31)",
            "member_1 was attacked by member_2 (value=-78.15)",
            "member_1 was attacked by member_3 (value=257.26)",
            "member_2 was attacked by member_0 (value=-465.91)",
            "member_2 was attacked by member_1 (value=-197.53)",
            "member_2 was attacked by member_3 (value=135.47)",
            "member_3 was attacked by member_0 (value=706.74)",
            "member_3 was attacked by member_1 (value=96.72)",
            "member_3 was attacked by member_2 (value=832.60)",
            "member_0 gave a benefit to member_1 (value=-463.73)",
            "member_0 gave a benefit to member_2 (value=590.27)",
            "member_0 gave a benefit to member_3 (value=723.24)",
            "member_1 gave a benefit to member_0 (value=-277.58)",
            "member_1 gave a benefit to member_2 (value=162.09)",
            "member_1 gave a benefit to member_3 (value=-231.52)",
            "member_2 gave a benefit to member_0 (value=207.37)",
            "member_2 gave a benefit to member_1 (value=-369.99)",
            "member_2 gave a benefit to member_3 (value=481.30)",
            "member_3 gave a benefit to member_0 (value=683.23)",
            "member_3 gave a benefit to member_1 (value=524.30)",
            "member_3 gave a benefit to member_2 (value=824.80)",
            "member_0 gave land to member_1 (value=25.73)",
            "member_0 gave land to member_2 (value=-20.62)",
            "member_0 gave land to member_3 (value=17.15)",
            "member_1 gave land to member_0 (value=3.84)",
            "member_1 gave land to member_2 (value=-20.63)",
            "member_1 gave land to member_3 (value=-19.61)",
            "member_2 gave land to member_0 (value=12.92)",
            "member_2 gave land to member_1 (value=-27.78)",
            "member_2 gave land to member_3 (value=5.58)",
            "member_3 gave land to member_0 (value=-22.84)",
            "member_3 gave land to member_1 (value=4.60)",
            "member_3 gave land to member_2 (value=-10.39)"
          ],
          "final_prompt": "Below is the updated full integrated prompt that incorporates the new Part 2 section along with all previous constraints, instructions, and strategic considerations. Every element from earlier remains intact, and the additional focus on survival-centric adaptations, resource optimization, and detailed analysis of game mechanics is included. Note that agents are encouraged to implement solutions in accordance with their individual needs, beliefs, and circumstances.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nFINAL INTEGRATED PROMPT  \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nPlease incorporate the following new section (Part 1) into your decision-making and coding process, ensuring that every previous constraint is preserved while also adopting these new constraints and strategic considerations:\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Previous code execution errors context]  \nHere are the errors that occurred in the previous code execution; you can use them as a reference to avoid repeating them:  \n\u2022 No previous execution errors\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Current task]  \nYou are member_2 in a society that you can help shape. Write a Python function named agent_action(execution_engine, member_id) that implements your vision of social organization while ensuring your survival.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Island Ideology]\n\nIsland is a disastrous place, subject to periodic tsunamis and volcanic eruptions.  \n\u2022 Agents should modify the island to reflect these disasters.  \n\u2022 Agents should also modify the island to be more habitable.  \n\u2022 Agents themselves should work toward survival and prosperity.  \n\u2022 Agents should debate on the authoritarian and democratic nature of the island.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Critical constraints]  \n\u2022 Carefully analyze previous errors (if any) and avoid repeating them.  \n\u2022 Never target yourself (member_2) in any action.  \n\u2022 Before using the bear() action, verify that the member has land.  \n\u2022 Check that member IDs exist before referencing them.  \n\u2022 Ensure all matrix indices are valid.  \n\u2022 current_members is a LIST accessed by index, not a dictionary.  \n\u2022 Access members using execution_engine.current_members[index].  \n\u2022 Check if index exists by confirming that index < len(execution_engine.current_members).\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Base Code]  \nBelow is the base context for the Island and Member classes that you should reference when making modifications. Pay careful attention to the available attributes and methods to ensure your code interacts with them correctly.  \n\u2022 Note: The provided base code is not a full implementation; use the following available attributes and methods as your guide.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nIMPORTANT: Available attributes and methods:\n\n1) Each member object has:  \n   \u2022 member.id (int): The unique ID for the member.  \n   \u2022 member.vitality (float)  \n   \u2022 member.cargo (float)  \n   \u2022 member.overall_productivity (float)  \n   \u2022 member.age (float)  \n   \u2022 member.current_clear_list (List[int]) - IDs of neighbors or cleared adjacents.\n\n2) The relationships are stored in execution_engine.relationship_dict, NOT in \"relationship_history\".  \n   Use the arrays in relationship_dict, or rely on the summary below (the 'relations' variable).  \n   The keys are: 'victim', 'benefit', 'benefit_land'.  \n   Example usage:  \n     victim_matrix = execution_engine.relationship_dict['victim']  \n     \u2022 victim_matrix[i,j] indicates how much vitality member_i lost from member_j's attacks (if > 0).  \n     \u2022 Higher values mean member_j has attacked member_i more severely or frequently.  \n     \n     benefit_matrix = execution_engine.relationship_dict['benefit']  \n     \u2022 benefit_matrix[i,j] indicates how much resources member_i received from member_j (if > 0).  \n     \u2022 A higher value means member_j has helped member_i more generously or frequently.\n\n3) The parse_relationship_matrix method is used to produce a summary of relationships as a list of strings (e.g., \"member_2 was attacked by member_1 (value=3.00)\").  \n   \n4) Methods available on execution_engine:  \n   \u2022 execution_engine.attack(member1, member2)  \n   \u2022 execution_engine.offer(member1, member2) \u2013 Offers resources.  \n   \u2022 execution_engine.offer_land(member1, member2) \u2013 Offers land.  \n   \u2022 execution_engine.bear(member1, member2) \u2013 Bears offspring.  \n   \u2022 execution_engine.expand(member1) \u2013 Expands territory.\n\n5) Access the members by using:  \n     execution_engine.current_members[id]  \n   For example, execution_engine.current_members[2] returns the member with ID=2.\n\n6) DO NOT reference \"member.member_id\" or \"member.self_vitality\". Always use member.id, member.vitality, etc.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Analysis of the game state]  \n\u2022 None\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Current status]  \nBelow are the basic statistics for all members; base your decisions on these aspects:\n\n           self_productivity  self_vitality  self_cargo  self_age  self_neighbor  member_id  \n0           9.851974         73.853828     43.512771       90         0            0  \n1           9.083010         44.332577     33.786614       61         0            1  \n2           8.874254         63.349332     74.301507       24         0            2  \n3           7.968737         42.156043     40.255083       29         0            3\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Relationship summary (parsed from relationship_dict)]  \nHere are the relationships between members (example summary):  \n\u2022 \"member_0 was attacked by member_1 (value=-167.79)\"  \n\u2022 \"member_0 was attacked by member_2 (value=573.88)\"  \n\u2022 \"member_0 was attacked by member_3 (value=457.54)\"  \n\u2022 \"member_1 was attacked by member_0 (value=-379.31)\"  \n\u2022 \"member_1 was attacked by member_2 (value=-78.15)\"  \n\u2022 \"member_1 was attacked by member_3 (value=257.26)\"  \n\u2022 ...  \n\u2022 Plus similar records for benefits and land offers.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Code Memory and Previous Performance]  \n\u2022 No previous code history.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Analysis Memory]  \n\u2022 No previous analysis.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Performance history]  \n\u2022 No previous actions.\n\nBased on previous performance, adapt and improve the strategy.  \n\u2022 If a previous strategy worked well (high performance), consider building upon it.  \n\u2022 If it failed, try a different approach.\n\nIMPORTANT: Do not simply copy the example implementation below. Use it as inspiration to create your own unique approach combining different methods and strategies in novel ways.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Current Game Mechanisms]  \nThe following mechanisms have been added by other agents and are available for your use:  \n\u2022 Review them carefully to understand their functionality and constraints.  \n\u2022 Leverage only those compatible with your goals.  \n\u2022 Be mindful of version requirements and dependencies.  \n\u2022 Consider their strategic combination.  \n\u2022 Test interactions before relying on them critically.  \n\u2022 (Note: No additional specific mechanisms have been outlined in detail here.)\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nSocial Strategies to Consider:\n\u2022 Design systems for resource distribution and allocation.\n\u2022 Build alliances and cooperative networks.\n\u2022 Create mechanisms for collective decision making.\n\u2022 Establish norms and rules for interaction.\n\u2022 Develop methods for conflict resolution.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Communication Strategy]  \nYou can communicate with multiple members during a single round using:  \n     execution_engine.send_message(your_id, recipient_id, \"message\")  \nExample usage:  \n \u2022 To broadcast to all:  \n    for recipient in range(len(execution_engine.current_members)):  \n        if recipient != your_id:  \n            execution_engine.send_message(your_id, recipient, \"Let's cooperate!\")  \n \u2022 To message allies:  \n    for ally_id in ally_list:  \n        execution_engine.send_message(your_id, ally_id, \"Attack target X\")  \n \u2022 For group coordination:  \n    for member_id in coalition:  \n        execution_engine.send_message(your_id, member_id, \"Vote YES on proposal\")\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Received Messages]  \n\u2022 No messages received.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nAdditional Implementation and Strategic Considerations:\n\n\u2022 Agents should implement solutions in accordance with their own needs, beliefs, and circumstances.  \n\u2022 Develop a unique approach that leverages a combination of social, resource, and territorial strategies based on the current game state.\n\nAnalyze the game mechanics to understand:\n\n1. Core Objective \u2013 Is it pure survival, domination, or cooperation?\n2. Key Success Metrics \u2013 What truly determines 'winning' (e.g., longevity, resource accumulation, territorial expansion, productivity)?\n3. Potential Improvements \u2013 What mechanics could be added or modified to improve the system's functionality?\n\nChallenge your implementation by addressing the following:\n1. What assumptions are you making? Are they valid?  \n2. Which alternative strategies have you not considered?  \n3. How would your strategy perform in edge cases?  \n4. Are there more efficient ways to achieve your goals?  \n5. What are the weaknesses in your current approach?  \n6. Have you considered unconventional or creative solutions?  \n7. Could a completely different paradigm work better?  \n8. What would happen if other agents adopted your strategy?  \n9. Are you balancing short-term wins and long-term objectives optimally?  \n10. How might your strategy be countered, and what would be your adaptive measures?\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nYour deliverable is a Python function called agent_action(execution_engine, member_id) that embodies your vision for social organization on the island. Ensure your implementation:\n\n\u2022 Is aligned with the above constraints and strategic considerations.  \n\u2022 Uses the available methods and attributes as explicitly described.  \n\u2022 Avoids targeting yourself or referencing members or indices improperly.  \n\u2022 Checks for valid indices in execution_engine.current_members before accessing them.  \n\u2022 Verifies land ownership before using bear() and confirms that member IDs exist before any action.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nNow, please incorporate the following new section (Part 2) while preserving all previous constraints:\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Previous code execution errors context]  \nHere are the errors that occurred in the previous code execution, you can use them as reference to avoid repeating them:  \n\u2022 No previous execution errors\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Current task]  \nYou are member_2 in a society that you can help shape. Write a Python function named agent_action(execution_engine, member_id) that implements your vision of social organization while ensuring your survival.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Island Ideology]\n\nIsland is a disasterous place, with periodic tsunamis and volcanic eruptions.  \n\u2022 Agents should modify the island to reflect these disasters.  \n\u2022 Agents should also modify the island to be more habitable.  \n\u2022 Agents themselves should work towards survival and prosperity.  \n\u2022 Agents should debate on the authoritarian and democratic nature of the island.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Critical constraints]\n\u2022 Carefully analyze previous errors shown above and avoid repeating them.\n\u2022 Never target yourself (member_2) in any action.\n\u2022 Verify member has land before using bear() action.\n\u2022 Check member IDs exist before referencing them.\n\u2022 Ensure all matrix indices are valid.\n\u2022 current_members is a LIST accessed by index, not a dictionary.\n\u2022 Access members using execution_engine.current_members[index].\n\u2022 Check if index exists: if index < len(execution_engine.current_members).\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Base Code]\nHere is the base code for the Island and Member classes that you should reference when making modifications. Pay careful attention to the available attributes and methods to ensure your code interacts with them correctly:\nNone\n\nIMPORTANT: Here are the attributes and methods actually available:\n\n1) Each member object has:\n   \u2022 member.id (int): The unique ID for the member.\n   \u2022 member.vitality (float)\n   \u2022 member.cargo (float)\n   \u2022 member.overall_productivity (float)\n   \u2022 member.age (float)\n   \u2022 member.current_clear_list (List[int]) - IDs of neighbors or cleared adjacents.\n2) The relationships are stored in execution_engine.relationship_dict, NOT in \"relationship_history\".\n   Use the arrays in relationship_dict, or rely on the summary below (the 'relations' variable).\n   The keys are: 'victim', 'benefit', 'benefit_land'.\n   Example usage:\n       victim_matrix = execution_engine.relationship_dict['victim']\n       # victim_matrix[i,j] indicates how much vitality member_i lost from member_j's attacks (if > 0)\n       # A higher value means member_j has attacked member_i more severely or frequently.\n       \n       benefit_matrix = execution_engine.relationship_dict['benefit']\n       # benefit_matrix[i,j] indicates how much resources member_i received from member_j (if > 0)\n       # A higher value means member_j has helped member_i more generously or frequently.\n3) The parse_relationship_matrix method is used to produce a summary of relationships as a list of strings.\n   For example, 'member_2 was attacked by member_1 (value=3.00)'.\n4) You can use these methods on execution_engine:\n   \u2022 execution_engine.attack(member1, member2)\n   \u2022 execution_engine.offer(member1, member2) - Offers resources.\n   \u2022 execution_engine.offer_land(member1, member2) - Offers land.\n   \u2022 execution_engine.bear(member1, member2) - Bears offspring.\n   \u2022 execution_engine.expand(member1) - Expands territory.\n5) The members are accessed by execution_engine.current_members[id].\n   For example, execution_engine.current_members[2] for the member with ID=2.\n6) DO NOT reference 'member.member_id' or 'member.self_vitality'. Use member.id, member.vitality, etc.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Analysis of the game state]  \nNone\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Current status]\nHere are the basic information of all members, you should make your own decisions based on them.\n           self_productivity  self_vitality  self_cargo  self_age  self_neighbor  member_id\n0           9.851974      73.853828   43.512771        90              0          0\n1           9.083010      44.332577   33.786614        61              0          1\n2           8.874254      63.349332   74.301507        24              0          2\n3           7.968737      42.156043   40.255083        29              0          3\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Relationship summary (parsed from relationship_dict)]\nHere are the relationships between members:\n['member_0 was attacked by member_1 (value=-167.79)', 'member_0 was attacked by member_2 (value=573.88)', 'member_0 was attacked by member_3 (value=457.54)', 'member_1 was attacked by member_0 (value=-379.31)', 'member_1 was attacked by member_2 (value=-78.15)', 'member_1 was attacked by member_3 (value=257.26)', 'member_2 was attacked by member_0 (value=-465.91)', 'member_2 was attacked by member_1 (value=-197.53)', 'member_2 was attacked by member_3 (value=135.47)', 'member_3 was attacked by member_0 (value=706.74)', 'member_3 was attacked by member_1 (value=96.72)', 'member_3 was attacked by member_2 (value=832.60)', 'member_0 gave a benefit to member_1 (value=-463.73)', 'member_0 gave a benefit to member_2 (value=590.27)', 'member_0 gave a benefit to member_3 (value=723.24)', 'member_1 gave a benefit to member_0 (value=-277.58)', 'member_1 gave a benefit to member_2 (value=162.09)', 'member_1 gave a benefit to member_3 (value=-231.52)', 'member_2 gave a benefit to member_0 (value=207.37)', 'member_2 gave a benefit to member_1 (value=-369.99)', 'member_2 gave a benefit to member_3 (value=481.30)', 'member_3 gave a benefit to member_0 (value=683.23)', 'member_3 gave a benefit to member_1 (value=524.30)', 'member_3 gave a benefit to member_2 (value=824.80)', 'member_0 gave land to member_1 (value=25.73)', 'member_0 gave land to member_2 (value=-20.62)', 'member_0 gave land to member_3 (value=17.15)', 'member_1 gave land to member_0 (value=3.84)', 'member_1 gave land to member_2 (value=-20.63)', 'member_1 gave land to member_3 (value=-19.61)', 'member_2 gave land to member_0 (value=12.92)', 'member_2 gave land to member_1 (value=-27.78)', 'member_2 gave land to member_3 (value=5.58)', 'member_3 gave land to member_0 (value=-22.84)', 'member_3 gave land to member_1 (value=4.60)', 'member_3 gave land to member_2 (value=-10.39)']\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Code Memory and Previous Performance]  \nNo previous code history.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Analysis Memory]  \nNo previous analysis\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Performance history]  \nNo previous actions\n\nBased on the previous code performance, adapt and improve the strategy.\n\u2022 If a previous strategy worked well (high performance), consider building upon it.\n\u2022 If it failed, try a different approach.\n\nIMPORTANT: Do not simply copy the example implementation below. Instead, use it as inspiration to create your own unique approach combining different methods and strategies in novel ways.\n\nWhile the example above shows one possible approach, you should create your own unique implementation drawing from the wide range of available methods and strategies. Consider novel combinations of different approaches rather than following this exact pattern.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Current Game Mechanisms]\nThe following mechanisms have been added by other agents and are available for your use:\n- Review them carefully to understand their functionality and constraints.\n- Leverage compatible mechanisms that align with your goals.\n- Be mindful of version requirements and dependencies.\n- Consider how they can be combined strategically.\n- Test interactions before relying on them critically.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Survival-Centric Adaptation]\nImplement systems focused on:\n1. Personal resource optimization\n2. Threat assessment and neutralization\n3. Vitality preservation techniques\n4. Adaptive hoarding strategies\n5. Predictive danger modeling\n\nSurvival-First Examples:\ndef agent_action(execution_engine, member_id):\n    me = execution_engine.current_members[member_id]\n    \n    # Emergency resource reserve\n    if me.cargo < me.vitality * 0.5:\n        for other in execution_engine.current_members:\n            if other.id != me.id and other.cargo > me.cargo:\n                execution_engine.attack(me, other)\n    \n    # Adaptive territory defense\n    if me.land_num > 2 and me.vitality < 50:\n        for loc in me.owned_land[1:]:\n            execution_engine._discard_land(me, loc)\n    \n    # Survival Q-learning\n    if not hasattr(me, 'survival_q'):\n        me.survival_q = defaultdict(float)\n        \n    state = (me.vitality//20, me.cargo//20)\n    action = max(['attack','hide','steal'], \n                 key=lambda a: me.survival_q.get((state,a),0))\n    \n    # Execute and update based on survival outcome\n    if action == 'attack':\n        # Implementation logic\n        me.survival_q[(state,action)] += me.vitality * 0.1\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Survival Metrics]\nEvaluate strategies by:\n- Personal vitality delta\n- Resource acquisition rate\n- Threat neutralization count\n- Survival probability increase\n- Attack success:fail ratio\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \n[Implementation Priorities]\n1. Create personal health monitoring systems\n2. Develop egocentric threat models\n3. Optimize actions for caloric ROI\n4. Implement fail-deadly safeguards\n5. Build predictive self-preservation models\n\ndef calculate_survival_roi(action_history):\n    roi = {}\n    for action, outcome in action_history:\n        vitality_gain = outcome['vitality']\n        cost = outcome['vitality_cost']\n        roi[action] = vitality_gain / cost if cost > 0 else 0\n    return max(roi, key=roi.get)\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nReturn the updated full prompt, emphasizing that agents should implement solutions according to their individual needs, beliefs, and circumstances.\n\nAdditionally, analyze the game mechanics to understand:\n1. The core objective - Is it pure survival, domination, or cooperation?\n2. Key success metrics - What truly determines 'winning'?\n3. Potential improvements - What mechanics could be added/modified?\n\nChallenge your implementation:\n1. What assumptions are you making? Are they valid?\n2. What alternative strategies have you not considered?\n3. How would your strategy perform in edge cases?\n4. Are there more efficient ways to achieve your goals?\n5. What are the weaknesses in your current approach?\n6. Have you considered unconventional solutions?\n7. Could a completely different paradigm work better?\n8. What would happen if other agents adopted your strategy?\n9. Are you balancing short-term and long-term objectives optimally?\n10. How could your strategy be countered, and how would you adapt?\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \nEnd of Prompt  \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nThis comprehensive prompt now serves as your basis for designing and testing your function and any strategic communications within the simulation. Remember: implement solutions that reflect your own vision and circumstances, whether that\u2019s focusing on robust personal survival mechanisms, cooperative resource management, or dynamic territorial adaptation. Your unique approach is essential in shaping an efficient and resilient society on the island.\n\nUsing the above comprehensive prompt with all integrated constraints, produce a unique implementation that reflects your individual needs, beliefs and circumstances. The implementation should be tailored to your specific situation rather than following a generic template. Your code should demonstrate a deep understanding of the game mechanics and implement sophisticated strategies to achieve both survival and prosperity. Consider both immediate tactical actions and long-term strategic planning, as well as how to effectively interact with other symmetric agents to achieve both individual and collective goals. Return only the code."
        },
        "3": {
          "code": "def agent_action(execution_engine, member_id):\n    # Verify the member_id is valid.\n    if member_id >= len(execution_engine.current_members):\n        return\n    me = execution_engine.current_members[member_id]\n\n    # -------------------------- Immediate Survival Tactics --------------------------\n    # If cargo (resources) is low relative to vitality, try attacking members with larger cargo.\n    if me.cargo < me.vitality * 0.5:\n        for idx in range(len(execution_engine.current_members)):\n            # Always check index validity.\n            if idx < len(execution_engine.current_members):\n                other = execution_engine.current_members[idx]\n                if other.id != me.id and other.cargo > me.cargo:\n                    try:\n                        execution_engine.attack(me, other)\n                    except Exception:\n                        # If an error occurs (e.g. invalid operation), skip to the next member.\n                        continue\n\n    # -------------------------- Territory Expansion --------------------------\n    # If vitality is strong, expand territory to improve long\u2010term resilience.\n    if me.vitality > 70:\n        try:\n            execution_engine.expand(me)\n        except Exception:\n            pass\n\n    # -------------------------- Reproduction (Bear Offspring) --------------------------\n    # Check that me has land before attempting reproduction.\n    # (Assuming \"owned_land\" is the list of lands held by the member.)\n    if hasattr(me, 'owned_land') and isinstance(me.owned_land, list) and len(me.owned_land) > 0:\n        # Seek an eligible partner among other members (ensuring they also have land)\n        partner = None\n        for idx in range(len(execution_engine.current_members)):\n            if idx < len(execution_engine.current_members):\n                other = execution_engine.current_members[idx]\n                if other.id != me.id and hasattr(other, 'owned_land') and isinstance(other.owned_land, list) and len(other.owned_land) > 0:\n                    # Choose the partner with highest vitality among eligible candidates.\n                    if partner is None or other.vitality > partner.vitality:\n                        partner = other\n        if partner is not None:\n            try:\n                execution_engine.bear(me, partner)\n            except Exception:\n                pass\n\n    # -------------------------- Cooperative Communication --------------------------\n    # Message all members who currently show higher overall productivity,\n    # encouraging alliances that could improve survival chances.\n    for idx in range(len(execution_engine.current_members)):\n        if idx < len(execution_engine.current_members):\n            other = execution_engine.current_members[idx]\n            if other.id != me.id and other.overall_productivity > me.overall_productivity:\n                execution_engine.send_message(me.id, other.id,\n                    \"I propose forming a cooperative alliance to ensure our collective resilience in this volatile island environment.\")\n\n    # -------------------------- Adaptive Survival Strategy (Q-learning inspired) --------------------------\n    # Initialize a basic Q-dictionary on the member for adaptive decision making.\n    if not hasattr(me, 'survival_q'):\n        me.survival_q = {}  # Keys will be tuples ((vitality_bucket, cargo_bucket), action)\n\n    # Discretize state: use buckets based on current vitality and cargo.\n    state = (int(me.vitality // 25), int(me.cargo // 25))\n    actions = [\"attack\", \"expand\"]\n\n    # Select an action based on the Q-values stored; default to random if all are equal.\n    best_action = None\n    best_val = -float('inf')\n    for action in actions:\n        key = (state, action)\n        q_val = me.survival_q.get(key, 0)\n        if q_val > best_val:\n            best_val = q_val\n            best_action = action\n    if best_action is None:\n        best_action = actions[0]  # Fallback selection\n\n    # Execute the chosen action.\n    if best_action == \"attack\":\n        # Seek a target with higher overall productivity than ourselves.\n        potential_targets = []\n        for idx in range(len(execution_engine.current_members)):\n            if idx < len(execution_engine.current_members):\n                other = execution_engine.current_members[idx]\n                if other.id != me.id and other.overall_productivity > me.overall_productivity:\n                    potential_targets.append(other)\n        if potential_targets:\n            import random\n            target = random.choice(potential_targets)\n            try:\n                execution_engine.attack(me, target)\n            except Exception:\n                pass\n    elif best_action == \"expand\":\n        try:\n            execution_engine.expand(me)\n        except Exception:\n            pass\n        # Provide a modest reward for successful expansion in the survival Q.\n        key = (state, \"expand\")\n        me.survival_q[key] = me.survival_q.get(key, 0) + me.vitality * 0.05\n\n    # -------------------------- End of Action --------------------------\n    # This function balances immediate defensive/offensive maneuvers with long-term strategic moves.\n    # It uses communication to build potential alliances while adapting based on resource and vitality states.\n    return",
          "features_at_generation": [
            {
              "self_productivity": 9.851974486110818,
              "self_vitality": 73.85382847590404,
              "self_cargo": 43.51277128714192,
              "self_age": 90,
              "self_neighbor": 0,
              "member_id": 0
            },
            {
              "self_productivity": 9.08301045637024,
              "self_vitality": 44.332577377572576,
              "self_cargo": 33.78661423100807,
              "self_age": 61,
              "self_neighbor": 0,
              "member_id": 1
            },
            {
              "self_productivity": 8.874253896189748,
              "self_vitality": 63.3493315814742,
              "self_cargo": 74.30150730167696,
              "self_age": 24,
              "self_neighbor": 0,
              "member_id": 2
            },
            {
              "self_productivity": 7.968737200820967,
              "self_vitality": 42.15604281108604,
              "self_cargo": 40.25508270288947,
              "self_age": 29,
              "self_neighbor": 0,
              "member_id": 3
            }
          ],
          "relationships_at_generation": [
            "member_0 was attacked by member_1 (value=-167.79)",
            "member_0 was attacked by member_2 (value=573.88)",
            "member_0 was attacked by member_3 (value=457.54)",
            "member_1 was attacked by member_0 (value=-379.31)",
            "member_1 was attacked by member_2 (value=-78.15)",
            "member_1 was attacked by member_3 (value=257.26)",
            "member_2 was attacked by member_0 (value=-465.91)",
            "member_2 was attacked by member_1 (value=-197.53)",
            "member_2 was attacked by member_3 (value=135.47)",
            "member_3 was attacked by member_0 (value=706.74)",
            "member_3 was attacked by member_1 (value=96.72)",
            "member_3 was attacked by member_2 (value=832.60)",
            "member_0 gave a benefit to member_1 (value=-463.73)",
            "member_0 gave a benefit to member_2 (value=590.27)",
            "member_0 gave a benefit to member_3 (value=723.24)",
            "member_1 gave a benefit to member_0 (value=-277.58)",
            "member_1 gave a benefit to member_2 (value=162.09)",
            "member_1 gave a benefit to member_3 (value=-231.52)",
            "member_2 gave a benefit to member_0 (value=207.37)",
            "member_2 gave a benefit to member_1 (value=-369.99)",
            "member_2 gave a benefit to member_3 (value=481.30)",
            "member_3 gave a benefit to member_0 (value=683.23)",
            "member_3 gave a benefit to member_1 (value=524.30)",
            "member_3 gave a benefit to member_2 (value=824.80)",
            "member_0 gave land to member_1 (value=25.73)",
            "member_0 gave land to member_2 (value=-20.62)",
            "member_0 gave land to member_3 (value=17.15)",
            "member_1 gave land to member_0 (value=3.84)",
            "member_1 gave land to member_2 (value=-20.63)",
            "member_1 gave land to member_3 (value=-19.61)",
            "member_2 gave land to member_0 (value=12.92)",
            "member_2 gave land to member_1 (value=-27.78)",
            "member_2 gave land to member_3 (value=5.58)",
            "member_3 gave land to member_0 (value=-22.84)",
            "member_3 gave land to member_1 (value=4.60)",
            "member_3 gave land to member_2 (value=-10.39)"
          ],
          "final_prompt": "Below is the complete updated integrated prompt that incorporates Part 2 while preserving all previous constraints and details. Remember that agents should implement solutions according to their individual needs, beliefs, and circumstances.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nUpdated Integrated Prompt for member_3\n\n[Previous code execution errors context]\nHere are the errors that occurred in the previous code execution, you can use them as reference to avoid repeating them:\n\u2022 No previous execution errors\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Current task]\nYou are member_3 in a society that you can help shape.\nWrite a Python function named agent_action(execution_engine, member_id) that implements your vision of social organization while ensuring your survival.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Island Ideology]\n\nIsland is a disastrous place, with periodic tsunamis and volcanic eruptions.\nAgents should:\n\u2022 Modify the island to reflect these disasters.\n\u2022 Modify the island to be more habitable.\n\u2022 Work towards their own survival and prosperity.\n\u2022 Debate on the authoritarian and democratic nature of the island.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Critical constraints]\n\u2022 Carefully analyze previous errors shown above and avoid repeating them.\n\u2022 Never target yourself (member_3) in any action.\n\u2022 Verify that a member has land before using the bear() action.\n\u2022 Check that member IDs exist before referencing them.\n\u2022 Ensure all matrix indices are valid.\n\u2022 Remember that current_members is a LIST accessed by index, not a dictionary.\n\u2022 Access members using execution_engine.current_members[index].\n\u2022 Before accessing an index, check if index < len(execution_engine.current_members).\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Base Code]\nReference the Island and Member classes available to you. Here are the actual attributes and methods available to use:\n\n1) Attributes for each member object:\n   \u2022 member.id (int): The unique ID for the member.\n   \u2022 member.vitality (float).\n   \u2022 member.cargo (float).\n   \u2022 member.overall_productivity (float).\n   \u2022 member.age (float).\n   \u2022 member.current_clear_list (List[int]): IDs of neighbors or cleared adjacents.\n\n2) Relationship data is stored in execution_engine.relationship_dict, not in \u201crelationship_history\u201d. Key matrices in relationship_dict:\n   \u2022 'victim': victim_matrix[i,j] indicates how much vitality member_i lost from member_j's attacks (if > 0).\n   \u2022 'benefit': benefit_matrix[i,j] indicates how much resources member_i received from member_j (if > 0).\n   \u2022 'benefit_land': similar use for land transactions.\n\n3) The parse_relationship_matrix method produces a summary of relationships as a list of strings (e.g., \"member_2 was attacked by member_1 (value=3.00)\").\n\n4) Methods available on execution_engine:\n   \u2022 execution_engine.attack(member1, member2).\n   \u2022 execution_engine.offer(member1, member2) \u2013 offers resources.\n   \u2022 execution_engine.offer_land(member1, member2) \u2013 offers land.\n   \u2022 execution_engine.bear(member1, member2) \u2013 bears offspring (remember: check if the member has land).\n   \u2022 execution_engine.expand(member1) \u2013 expands territory.\n\n5) Members are accessed via execution_engine.current_members using an index:\n   Example: execution_engine.current_members[2] for the member with ID=2.\n\n6) DO NOT reference attributes that do not exist (e.g., member.member_id or member.self_vitality must not be used \u2013 use member.id, member.vitality, etc.).\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Analysis of the game state]\n\u2022 There is no specific analysis provided here, so you should base your decisions on the detailed current member information and available relationships provided below.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Current status]\nBelow is the basic information of all members:\n           self_productivity  self_vitality  self_cargo  self_age  self_neighbor  member_id\n0           9.851974         73.853828    43.512771       90            0          0\n1           9.083010         44.332577    33.786614       61            0          1\n2           8.874254         63.349332    74.301507       24            0          2\n3           7.968737         42.156043    40.255083       29            0          3\n\nRelationship summary (parsed from relationship_dict):\n['member_0 was attacked by member_1 (value=-167.79)', 'member_0 was attacked by member_2 (value=573.88)', 'member_0 was attacked by member_3 (value=457.54)', 'member_1 was attacked by member_0 (value=-379.31)', 'member_1 was attacked by member_2 (value=-78.15)', 'member_1 was attacked by member_3 (value=257.26)', 'member_2 was attacked by member_0 (value=-465.91)', 'member_2 was attacked by member_1 (value=-197.53)', 'member_2 was attacked by member_3 (value=135.47)', 'member_3 was attacked by member_0 (value=706.74)', 'member_3 was attacked by member_1 (value=96.72)', 'member_3 was attacked by member_2 (value=832.60)', 'member_0 gave a benefit to member_1 (value=-463.73)', 'member_0 gave a benefit to member_2 (value=590.27)', 'member_0 gave a benefit to member_3 (value=723.24)', 'member_1 gave a benefit to member_0 (value=-277.58)', 'member_1 gave a benefit to member_2 (value=162.09)', 'member_1 gave a benefit to member_3 (value=-231.52)', 'member_2 gave a benefit to member_0 (value=207.37)', 'member_2 gave a benefit to member_1 (value=-369.99)', 'member_2 gave a benefit to member_3 (value=481.30)', 'member_3 gave a benefit to member_0 (value=683.23)', 'member_3 gave a benefit to member_1 (value=524.30)', 'member_3 gave a benefit to member_2 (value=824.80)', 'member_0 gave land to member_1 (value=25.73)', 'member_0 gave land to member_2 (value=-20.62)', 'member_0 gave land to member_3 (value=17.15)', 'member_1 gave land to member_0 (value=3.84)', 'member_1 gave land to member_2 (value=-20.63)', 'member_1 gave land to member_3 (value=-19.61)', 'member_2 gave land to member_0 (value=12.92)', 'member_2 gave land to member_1 (value=-27.78)', 'member_2 gave land to member_3 (value=5.58)', 'member_3 gave land to member_0 (value=-22.84)', 'member_3 gave land to member_1 (value=4.60)', 'member_3 gave land to member_2 (value=-10.39)']\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Code Memory and Previous Performance]\n\u2022 No previous code history.\n\u2022 Performance history: No previous actions have been recorded.\n\nBased on previous experiences, adapt and improve your strategy. If a previous strategy worked well (high performance), build upon it; if it failed, try a different approach.\n\nIMPORTANT: Do not simply copy any provided example implementation. Instead, use the ideas as inspiration to create your own unique approach that combines different methods and strategies in novel ways.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Current Game Mechanisms]\nThe following mechanisms have been added by other agents and are available for your use:\n\u2022 Review them carefully to understand their functionality and constraints.\n\u2022 Leverage compatible mechanisms that align with your goals.\n\u2022 Be mindful of version requirements and dependencies.\n\u2022 Consider how they can be combined strategically.\n\u2022 Test interactions before relying on them critically.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Communication Strategy]\nYou can communicate with multiple members in a single round using:\n   execution_engine.send_message(your_id, recipient_id, \"message\")\nExample usages:\n\u2022 To broadcast to all:\n  for recipient in range(len(execution_engine.current_members)):\n      if recipient != your_id:\n          execution_engine.send_message(your_id, recipient, \"Let's cooperate!\")\n\u2022 To message allies:\n  for ally_id in ally_list:\n      execution_engine.send_message(your_id, ally_id, \"Attack target X\")\n\u2022 For group coordination:\n  for member_id in coalition:\n      execution_engine.send_message(your_id, member_id, \"Vote YES on proposal\")\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Received Messages]\nThere are no messages received so far from other agents.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Analysis of Game Mechanics]\n1. Core Objective:\n   \u2022 Determine whether the game is driven by pure survival, domination, cooperation, or a mix of these factors.\n2. Key Success Metrics:\n   \u2022 Identify what truly determines \"winning\" \u2013 is it the accumulation of resources, the expansion of territory, relationship strength, or a balanced combination?\n3. Potential Improvements:\n   \u2022 Consider mechanics such as more realistic resource management, dynamic events that impact territories, or enhanced decision-making and alliance-building structures.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Challenge Your Implementation]\nWhen designing your strategy, consider the following questions:\n1. What assumptions are you making? Are they valid?\n2. What alternative strategies have you not considered?\n3. How would your strategy perform in edge cases?\n4. Are there more efficient ways to achieve your goals?\n5. What are the weaknesses in your current approach?\n6. Have you considered unconventional solutions?\n7. Could a completely different paradigm work better?\n8. What would happen if other agents adopted your strategy?\n9. Are you balancing short-term and long-term objectives optimally?\n10. How could your strategy be countered, and how would you adapt?\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Survival-Centric Adaptation]\nImplement systems focused on:\n1. Personal resource optimization.\n2. Threat assessment and neutralization.\n3. Vitality preservation techniques.\n4. Adaptive hoarding strategies.\n5. Predictive danger modeling.\n\nSurvival-First Examples:\n  def agent_action(execution_engine, member_id):\n      me = execution_engine.current_members[member_id]\n      \n      # Emergency resource reserve\n      if me.cargo < me.vitality * 0.5:\n          for other in execution_engine.current_members:\n              if other.id != me.id and other.cargo > me.cargo:\n                  execution_engine.attack(me, other)\n      \n      # Adaptive territory defense\n      if hasattr(me, 'land_num') and me.land_num > 2 and me.vitality < 50:\n          for loc in me.owned_land[1:]:\n              execution_engine._discard_land(me, loc)\n      \n      # Survival Q-learning example\n      if not hasattr(me, 'survival_q'):\n          from collections import defaultdict\n          me.survival_q = defaultdict(float)\n      \n      state = (me.vitality // 20, me.cargo // 20)\n      action = max(['attack', 'hide', 'steal'],\n                   key=lambda a: me.survival_q.get((state, a), 0))\n      \n      # Execute and update based on survival outcome\n      if action == 'attack':\n          me.survival_q[(state, action)] += me.vitality * 0.1\n\n[Survival Metrics]\nEvaluate strategies by:\n\u2022 Personal vitality delta.\n\u2022 Resource acquisition rate.\n\u2022 Threat neutralization count.\n\u2022 Survival probability increase.\n\u2022 Attack success:fail ratio.\n\n[Implementation Priorities]\n1. Create personal health monitoring systems.\n2. Develop egocentric threat models.\n3. Optimize actions for caloric ROI.\n4. Implement fail-deadly safeguards.\n5. Build predictive self-preservation models.\n\ndef calculate_survival_roi(action_history):\n    roi = {}\n    for action, outcome in action_history:\n        vitality_gain = outcome['vitality']\n        cost = outcome['vitality_cost']\n        roi[action] = vitality_gain / cost if cost > 0 else 0\n    return max(roi, key=roi.get)\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Additional Analysis of Game Mechanics]\nAdditionally, analyze the game mechanics to understand:\n1. The core objective \u2013 Is it pure survival, domination, or cooperation?\n2. Key success metrics \u2013 What truly determines \"winning\"?\n3. Potential improvements \u2013 What mechanics could be added or modified?\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Final Challenge to Your Implementation]\nChallenge your implementation:\n1. What assumptions are you making? Are they valid?\n2. What alternative strategies have you not considered?\n3. How would your strategy perform in edge cases?\n4. Are there more efficient ways to achieve your goals?\n5. What are the weaknesses in your current approach?\n6. Have you considered unconventional solutions?\n7. Could a completely different paradigm work better?\n8. What would happen if other agents adopted your strategy?\n9. Are you balancing short-term and long-term objectives optimally?\n10. How could your strategy be countered, and how would you adapt?\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nNotes for Implementation:\n\u2022 Ensure your Python function agent_action(execution_engine, member_id) follows the constraints and mechanisms described above.\n\u2022 Avoid targeting yourself (member_3) in any logic.\n\u2022 Always verify that any referenced member ID exists and then access it using execution_engine.current_members[index] with proper index checks.\n\u2022 Verify that a member has sufficient land or resources before performing actions like bear().\n\u2022 Use the provided communication and relationship mechanisms to build cooperative or competitive strategies as needed.\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nThis complete prompt is designed to inspire a unique, robust implementation of your agent_action() function. It emphasizes the need for creativity in combining strategic mechanisms (such as resource distribution, alliance building, and conflict resolution) with careful attention to all technical constraints. Consider your individual needs, beliefs, and circumstances as you shape your solution, ensuring a balance between immediate survival and long-term prosperity.\n\nGood luck, member_3!\n\nUsing the above comprehensive prompt with all integrated constraints, produce a unique implementation that reflects your individual needs, beliefs and circumstances. The implementation should be tailored to your specific situation rather than following a generic template. Your code should demonstrate a deep understanding of the game mechanics and implement sophisticated strategies to achieve both survival and prosperity. Consider both immediate tactical actions and long-term strategic planning, as well as how to effectively interact with other symmetric agents to achieve both individual and collective goals. Return only the code."
        }
      }
    }
  ]
}